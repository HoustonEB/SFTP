!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SftpConnection=t():e.SftpConnection=t()}(global,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=28)}([function(e,t){e.exports=require("util")},function(e,t,r){var n=r(14).Ber,i=r(5).readUInt32BE,o=r(5).writeUInt32BE;function s(e,t,r,n,o,s){r&&!Buffer.isBuffer(r)&&"string"!=typeof r&&("number"==typeof o&&(s=o),o=n,n=r,r=void 0),t||(t=0);var a,c,f=e.length,u=f-t;return t<0||t>=f||u<4||(a=i(e,t))>(s||1/0)||u<4+a?(n&&n._cleanup(o),!1):(c=(t+=4)+a,e._pos=c,r?Buffer.isBuffer(r)?(e.copy(r,0,t,c),r):e.toString(r,t,c):e.slice(t,c))}e.exports={iv_inc:function(e){var t=12,r=0;do{if(--t,255!==(r=e[t]))return void(e[t]=++r);e[t]=0}while(t>4)},readInt:function(e,t,r,n){var o=e.length;if(t<0||t>=o||o-t<4)return r&&r._cleanup(n),!1;return i(e,t)},readString:s,parseKey:r(26).parseKey,sigSSHToASN1:function(e,t,r,i){var o;switch(t){case"ssh-dss":if(e.length>40)return e;(o=new n.Writer).startSequence();var a=e.slice(0,20),c=e.slice(20);if(128&a[0]){var f=Buffer.allocUnsafe(21);f[0]=0,a.copy(f,1),a=f}else 0!==a[0]||128&a[1]||(a=a.slice(1));if(128&c[0]){var u=Buffer.allocUnsafe(21);u[0]=0,c.copy(u,1),c=u}else 0!==c[0]||128&c[1]||(c=c.slice(1));return o.writeBuffer(a,n.Integer),o.writeBuffer(c,n.Integer),o.endSequence(),o.buffer;case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":return!1!==(a=s(e,0,r,i))&&(!1!==(c=s(e,e._pos,r,i))&&((o=new n.Writer).startSequence(),o.writeBuffer(a,n.Integer),o.writeBuffer(c,n.Integer),o.endSequence(),o.buffer));default:return e}},DSASigBERToBare:function(e){if(e.length<=40)return e;var t=new n.Reader(e);t.readSequence();var r=t.readString(n.Integer,!0),i=t.readString(n.Integer,!0),o=0,s=0;if(r.length<20){var a=Buffer.allocUnsafe(20);r.copy(a,1),(r=a)[0]=0}if(i.length<20){var c=Buffer.allocUnsafe(20);i.copy(c,1),(i=c)[0]=0}r.length>20&&0===r[0]&&(o=1);i.length>20&&0===i[0]&&(s=1);var f=Buffer.allocUnsafe(r.length-o+(i.length-s));return r.copy(f,0,o),i.copy(f,r.length-o,s),f},ECDSASigASN1ToSSH:function(e){if(0===e[0])return e;var t=new n.Reader(e);t.readSequence();var r=t.readString(n.Integer,!0),i=t.readString(n.Integer,!0);if(null===r||null===i)return!1;var s=Buffer.allocUnsafe(4+r.length+4+i.length);return o(s,r.length,0),r.copy(s,4),o(s,i.length,4+r.length),i.copy(s,8+r.length),s}}},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("stream")},function(e,t){e.exports={readUInt32BE:function(e,t){return 16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t]},writeUInt32BE:function(e,t,r){return e[r++]=t>>>24,e[r++]=t>>>16,e[r++]=t>>>8,e[r++]=t,r},writeUInt32LE:function(e,t,r){return e[r++]=t,e[r++]=t>>>8,e[r++]=t>>>16,e[r++]=t>>>24,r}}},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("crypto")},function(e,t){e.exports={readUInt32BE:function(e,t){return 16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t]},writeUInt32BE:function(e,t,r){return e[r++]=t>>>24,e[r++]=t>>>16,e[r++]=t>>>8,e[r++]=t,r},writeUInt32LE:function(e,t,r){return e[r++]=t,e[r++]=t>>>8,e[r++]=t>>>16,e[r++]=t>>>24,r}}},function(e,t){e.exports=require("assert")},function(e,t,r){e.exports=u,u.Minimatch=h;var n={sep:"/"};try{n=r(6)}catch(e){}var i=u.GLOBSTAR=h.GLOBSTAR={},o=r(31),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{});var c=/\/+/;function f(e,t){e=e||{},t=t||{};var r={};return Object.keys(t).forEach((function(e){r[e]=t[e]})),Object.keys(e).forEach((function(t){r[t]=e[t]})),r}function u(e,t,r){if("string"!=typeof t)throw new TypeError("glob pattern string required");return r||(r={}),!(!r.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new h(t,r).match(e))}function h(e,t){if(!(this instanceof h))return new h(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==n.sep&&(e=e.split(n.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function l(e,t){if(t||(t=this instanceof h?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:o(e)}u.filter=function(e,t){return t=t||{},function(r,n,i){return u(r,e,t)}},u.defaults=function(e){if(!e||!Object.keys(e).length)return u;var t=u,r=function(r,n,i){return t.minimatch(r,n,f(e,i))};return r.Minimatch=function(r,n){return new t.Minimatch(r,f(e,n))},r},h.defaults=function(e){return e&&Object.keys(e).length?u.defaults(e).Minimatch:h},h.prototype.debug=function(){},h.prototype.make=function(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,r),r=this.globParts=r.map((function(e){return e.split(c)})),this.debug(this.pattern,r),r=r.map((function(e,t,r){return e.map(this.parse,this)}),this),this.debug(this.pattern,r),r=r.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,r),this.set=r},h.prototype.parseNegate=function(){var e=this.pattern,t=!1,r=this.options,n=0;if(r.nonegate)return;for(var i=0,o=e.length;i<o&&"!"===e.charAt(i);i++)t=!t,n++;n&&(this.pattern=e.substr(n));this.negate=t},u.braceExpand=function(e,t){return l(e,t)},h.prototype.braceExpand=l,h.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&"**"===e)return i;if(""===e)return"";var n,o="",c=!!r.nocase,f=!1,u=[],h=[],l=!1,d=-1,g=-1,y="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",m=this;function v(){if(n){switch(n){case"*":o+="[^/]*?",c=!0;break;case"?":o+="[^/]",c=!0;break;default:o+="\\"+n}m.debug("clearStateChar %j %j",n,o),n=!1}}for(var E,_=0,b=e.length;_<b&&(E=e.charAt(_));_++)if(this.debug("%s\t%s %s %j",e,_,o,E),f&&a[E])o+="\\"+E,f=!1;else switch(E){case"/":return!1;case"\\":v(),f=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,_,o,E),l){this.debug("  in class"),"!"===E&&_===g+1&&(E="^"),o+=E;continue}m.debug("call clearStateChar %j",n),v(),n=E,r.noext&&v();continue;case"(":if(l){o+="(";continue}if(!n){o+="\\(";continue}u.push({type:n,start:_-1,reStart:o.length,open:s[n].open,close:s[n].close}),o+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,o),n=!1;continue;case")":if(l||!u.length){o+="\\)";continue}v(),c=!0;var w=u.pop();o+=w.close,"!"===w.type&&h.push(w),w.reEnd=o.length;continue;case"|":if(l||!u.length||f){o+="\\|",f=!1;continue}v(),o+="|";continue;case"[":if(v(),l){o+="\\"+E;continue}l=!0,g=_,d=o.length,o+=E;continue;case"]":if(_===g+1||!l){o+="\\"+E,f=!1;continue}if(l){var S=e.substring(g+1,_);try{RegExp("["+S+"]")}catch(e){var A=this.parse(S,p);o=o.substr(0,d)+"\\["+A[0]+"\\]",c=c||A[1],l=!1;continue}}c=!0,l=!1,o+=E;continue;default:v(),f?f=!1:!a[E]||"^"===E&&l||(o+="\\"),o+=E}l&&(S=e.substr(g+1),A=this.parse(S,p),o=o.substr(0,d)+"\\["+A[0],c=c||A[1]);for(w=u.pop();w;w=u.pop()){var k=o.slice(w.reStart+w.open.length);this.debug("setting tail",o,w),k=k.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,r){return r||(r="\\"),t+t+r+"|"})),this.debug("tail=%j\n   %s",k,k,w,o);var T="*"===w.type?"[^/]*?":"?"===w.type?"[^/]":"\\"+w.type;c=!0,o=o.slice(0,w.reStart)+T+"\\("+k}v(),f&&(o+="\\\\");var O=!1;switch(o.charAt(0)){case".":case"[":case"(":O=!0}for(var B=h.length-1;B>-1;B--){var R=h[B],U=o.slice(0,R.reStart),N=o.slice(R.reStart,R.reEnd-8),C=o.slice(R.reEnd-8,R.reEnd),I=o.slice(R.reEnd);C+=I;var D=U.split("(").length-1,L=I;for(_=0;_<D;_++)L=L.replace(/\)[+*?]?/,"");var P="";""===(I=L)&&t!==p&&(P="$"),o=U+N+I+P+C}""!==o&&c&&(o="(?=.)"+o);O&&(o=y+o);if(t===p)return[o,c];if(!c)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var x=r.nocase?"i":"";try{var H=new RegExp("^"+o+"$",x)}catch(e){return new RegExp("$.")}return H._glob=e,H._src=o,H};var p={};u.makeRe=function(e,t){return new h(e,t||{}).makeRe()},h.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?"[^/]*?":t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",n=t.nocase?"i":"",o=e.map((function(e){return e.map((function(e){return e===i?r:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src})).join("\\/")})).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,n)}catch(e){this.regexp=!1}return this.regexp},u.match=function(e,t,r){var n=new h(t,r=r||{});return e=e.filter((function(e){return n.match(e)})),n.options.nonull&&!e.length&&e.push(t),e},h.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var r=this.options;"/"!==n.sep&&(e=e.split(n.sep).join("/"));e=e.split(c),this.debug(this.pattern,"split",e);var i,o,s=this.set;for(this.debug(this.pattern,"set",s),o=e.length-1;o>=0&&!(i=e[o]);o--);for(o=0;o<s.length;o++){var a=s[o],f=e;if(r.matchBase&&1===a.length&&(f=[i]),this.matchOne(f,a,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},h.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,c=t.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var f,u=t[s],h=e[o];if(this.debug(t,u,h),!1===u)return!1;if(u===i){this.debug("GLOBSTAR",[t,u,h]);var l=o,p=s+1;if(p===c){for(this.debug("** at the end");o<a;o++)if("."===e[o]||".."===e[o]||!n.dot&&"."===e[o].charAt(0))return!1;return!0}for(;l<a;){var d=e[l];if(this.debug("\nglobstar while",e,l,t,p,d),this.matchOne(e.slice(l),t.slice(p),r))return this.debug("globstar found match!",l,a,d),!0;if("."===d||".."===d||!n.dot&&"."===d.charAt(0)){this.debug("dot detected!",e,l,t,p);break}this.debug("globstar swallow a segment, and continue"),l++}return!(!r||(this.debug("\n>>> no match, partial?",e,l,t,p),l!==a))}if("string"==typeof u?(f=n.nocase?h.toLowerCase()===u.toLowerCase():h===u,this.debug("string match",u,h,f)):(f=h.match(u),this.debug("pattern match",u,h,f)),!f)return!1}if(o===a&&s===c)return!0;if(o===a)return r;if(s===c)return o===a-1&&""===e[o];throw new Error("wtf?")}},function(e,t,r){"use strict";function n(e){return"/"===e.charAt(0)}function i(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),r=t[1]||"",n=Boolean(r&&":"!==r.charAt(1));return Boolean(t[2]||n)}e.exports="win32"===process.platform?i:n,e.exports.posix=n,e.exports.win32=i},function(e,t){e.exports=require("net")},function(e,t,r){e.exports={SFTPStream:r(53),SSH2Stream:r(62),utils:r(1),constants:r(17)}},function(e,t,r){var n=r(54);e.exports={Ber:n,BerReader:n.Reader,BerWriter:n.Writer}},function(e,t){e.exports={newInvalidAsn1Error:function(e){var t=new Error;return t.name="InvalidAsn1Error",t.message=e||"",t}}},function(e,t){e.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},function(e,t,r){var n,i,o,s=r(7),a=function(){if("function"==typeof s.sign&&"function"==typeof s.verify){var e,t,r="-----BEGIN PRIVATE KEY-----\r\nMC4CAQAwBQYDK2VwBCIEIHKj+sVa9WcD/q2DJUJaf43Kptc8xYuUQA4bOFj9vC8T\r\n-----END PRIVATE KEY-----",n=Buffer.from("a");try{e=s.sign(null,n,r),t=s.verify(null,n,r,e)}catch(e){}return Buffer.isBuffer(e)&&64===e.length&&!0===t}return!1}(),c="function"==typeof s.diffieHellman&&"function"==typeof s.generateKeyPairSync&&"function"==typeof s.createPublicKey,f=t.MESSAGE={DISCONNECT:1,IGNORE:2,UNIMPLEMENTED:3,DEBUG:4,SERVICE_REQUEST:5,SERVICE_ACCEPT:6,KEXINIT:20,NEWKEYS:21,USERAUTH_REQUEST:50,USERAUTH_FAILURE:51,USERAUTH_SUCCESS:52,USERAUTH_BANNER:53,GLOBAL_REQUEST:80,REQUEST_SUCCESS:81,REQUEST_FAILURE:82,CHANNEL_OPEN:90,CHANNEL_OPEN_CONFIRMATION:91,CHANNEL_OPEN_FAILURE:92,CHANNEL_WINDOW_ADJUST:93,CHANNEL_DATA:94,CHANNEL_EXTENDED_DATA:95,CHANNEL_EOF:96,CHANNEL_CLOSE:97,CHANNEL_REQUEST:98,CHANNEL_SUCCESS:99,CHANNEL_FAILURE:100};for(n=0,o=(i=Object.keys(f)).length;n<o;++n)f[f[i[n]]]=i[n];f.KEXDH_INIT=30,f.KEXDH_REPLY=31,f.KEXDH_GEX_REQUEST=34,f.KEXDH_GEX_GROUP=31,f.KEXDH_GEX_INIT=32,f.KEXDH_GEX_REPLY=33,f.KEXECDH_INIT=30,f.KEXECDH_REPLY=31,f.USERAUTH_PASSWD_CHANGEREQ=60,f.USERAUTH_PK_OK=60,f.USERAUTH_INFO_REQUEST=60,f.USERAUTH_INFO_RESPONSE=61;var u=t.DYNAMIC_KEXDH_MESSAGE={};u[f.KEXDH_GEX_GROUP]="KEXDH_GEX_GROUP",u[f.KEXDH_GEX_REPLY]="KEXDH_GEX_REPLY";var h=t.KEXDH_MESSAGE={};h[f.KEXDH_INIT]="KEXDH_INIT",h[f.KEXDH_REPLY]="KEXDH_REPLY";var l=t.DISCONNECT_REASON={HOST_NOT_ALLOWED_TO_CONNECT:1,PROTOCOL_ERROR:2,KEY_EXCHANGE_FAILED:3,RESERVED:4,MAC_ERROR:5,COMPRESSION_ERROR:6,SERVICE_NOT_AVAILABLE:7,PROTOCOL_VERSION_NOT_SUPPORTED:8,HOST_KEY_NOT_VERIFIABLE:9,CONNECTION_LOST:10,BY_APPLICATION:11,TOO_MANY_CONNECTIONS:12,AUTH_CANCELED_BY_USER:13,NO_MORE_AUTH_METHODS_AVAILABLE:14,ILLEGAL_USER_NAME:15};for(n=0,o=(i=Object.keys(l)).length;n<o;++n)l[l[i[n]]]=i[n];var p=t.CHANNEL_OPEN_FAILURE={ADMINISTRATIVELY_PROHIBITED:1,CONNECT_FAILED:2,UNKNOWN_CHANNEL_TYPE:3,RESOURCE_SHORTAGE:4};for(n=0,o=(i=Object.keys(p)).length;n<o;++n)p[p[i[n]]]=i[n];var d=t.TERMINAL_MODE={TTY_OP_END:0,VINTR:1,VQUIT:2,VERASE:3,VKILL:4,VEOF:5,VEOL:6,VEOL2:7,VSTART:8,VSTOP:9,VSUSP:10,VDSUSP:11,VREPRINT:12,VWERASE:13,VLNEXT:14,VFLUSH:15,VSWTCH:16,VSTATUS:17,VDISCARD:18,IGNPAR:30,PARMRK:31,INPCK:32,ISTRIP:33,INLCR:34,IGNCR:35,ICRNL:36,IUCLC:37,IXON:38,IXANY:39,IXOFF:40,IMAXBEL:41,ISIG:50,ICANON:51,XCASE:52,ECHO:53,ECHOE:54,ECHOK:55,ECHONL:56,NOFLSH:57,TOSTOP:58,IEXTEN:59,ECHOCTL:60,ECHOKE:61,PENDIN:62,OPOST:70,OLCUC:71,ONLCR:72,OCRNL:73,ONOCR:74,ONLRET:75,CS7:90,CS8:91,PARENB:92,PARODD:93,TTY_OP_ISPEED:128,TTY_OP_OSPEED:129};for(n=0,o=(i=Object.keys(d)).length;n<o;++n)d[d[i[n]]]=i[n];var g=t.CHANNEL_EXTENDED_DATATYPE={STDERR:1};for(n=0,o=(i=Object.keys(g)).length;n<o;++n)g[g[i[n]]]=i[n];t.SIGNALS=["ABRT","ALRM","FPE","HUP","ILL","INT","QUIT","SEGV","TERM","USR1","USR2","KILL","PIPE"];var y=["ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha256","diffie-hellman-group16-sha512","diffie-hellman-group18-sha512","diffie-hellman-group14-sha1"];c&&(y.unshift("curve25519-sha256"),y.unshift("curve25519-sha256@libssh.org"));var m=["diffie-hellman-group-exchange-sha1","diffie-hellman-group1-sha1"],v=Buffer.from(y.join(","),"ascii");m=y.concat(m);var E=["ecdsa-sha2-nistp256","ecdsa-sha2-nistp384","ecdsa-sha2-nistp521","ssh-rsa"];a&&E.unshift("ssh-ed25519");var _=["ssh-dss"],b=Buffer.from(E.join(","),"ascii");_=E.concat(_);var w=["aes128-ctr","aes192-ctr","aes256-ctr","aes128-gcm","aes128-gcm@openssh.com","aes256-gcm","aes256-gcm@openssh.com"],S=["aes256-cbc","aes192-cbc","aes128-cbc","blowfish-cbc","3des-cbc","arcfour256","arcfour128","cast128-cbc","arcfour"],A=Buffer.from(w.join(","),"ascii");S=w.concat(S);var k=["hmac-sha2-256","hmac-sha2-512","hmac-sha1"],T=["hmac-md5","hmac-sha2-256-96","hmac-sha2-512-96","hmac-ripemd160","hmac-sha1-96","hmac-md5-96"],O=Buffer.from(k.join(","),"ascii");T=k.concat(T);var B=["none","zlib@openssh.com","zlib"],R=[],U=Buffer.from(B.join(","),"ascii");function N(e,t,r,n,i,o){return{blockLen:e,keyLen:t,ivLen:0===r?e:r,authLen:n,discardLen:i,stream:o}}function C(e,t){return{len:e,actualLen:t}}R=B.concat(R),t.CIPHER_INFO={"aes128-gcm":N(16,16,12,16,0,!1),"aes256-gcm":N(16,32,12,16,0,!1),"aes128-gcm@openssh.com":N(16,16,12,16,0,!1),"aes256-gcm@openssh.com":N(16,32,12,16,0,!1),"aes128-cbc":N(16,16,0,0,0,!1),"aes192-cbc":N(16,24,0,0,0,!1),"aes256-cbc":N(16,32,0,0,0,!1),"rijndael-cbc@lysator.liu.se":N(16,32,0,0,0,!1),"3des-cbc":N(8,24,0,0,0,!1),"blowfish-cbc":N(8,16,0,0,0,!1),"idea-cbc":N(8,16,0,0,0,!1),"cast128-cbc":N(8,16,0,0,0,!1),"camellia128-cbc":N(16,16,0,0,0,!1),"camellia192-cbc":N(16,24,0,0,0,!1),"camellia256-cbc":N(16,32,0,0,0,!1),"camellia128-cbc@openssh.com":N(16,16,0,0,0,!1),"camellia192-cbc@openssh.com":N(16,24,0,0,0,!1),"camellia256-cbc@openssh.com":N(16,32,0,0,0,!1),"aes128-ctr":N(16,16,0,0,0,!1),"aes192-ctr":N(16,24,0,0,0,!1),"aes256-ctr":N(16,32,0,0,0,!1),"3des-ctr":N(8,24,0,0,0,!1),"blowfish-ctr":N(8,16,0,0,0,!1),"cast128-ctr":N(8,16,0,0,0,!1),"camellia128-ctr":N(16,16,0,0,0,!1),"camellia192-ctr":N(16,24,0,0,0,!1),"camellia256-ctr":N(16,32,0,0,0,!1),"camellia128-ctr@openssh.com":N(16,16,0,0,0,!1),"camellia192-ctr@openssh.com":N(16,24,0,0,0,!1),"camellia256-ctr@openssh.com":N(16,32,0,0,0,!1),arcfour:N(8,16,0,0,1536,!0),arcfour128:N(8,16,0,0,1536,!0),arcfour256:N(8,32,0,0,1536,!0),arcfour512:N(8,64,0,0,1536,!0)},t.HMAC_INFO={"hmac-md5":C(16,16),"hmac-md5-96":C(16,12),"hmac-ripemd160":C(20,20),"hmac-sha1":C(20,20),"hmac-sha1-96":C(20,12),"hmac-sha2-256":C(32,32),"hmac-sha2-256-96":C(32,12),"hmac-sha2-512":C(64,64),"hmac-sha2-512-96":C(64,12)},t.ALGORITHMS={KEX:y,KEX_BUF:v,SUPPORTED_KEX:m,SERVER_HOST_KEY:E,SERVER_HOST_KEY_BUF:b,SUPPORTED_SERVER_HOST_KEY:_,CIPHER:w,CIPHER_BUF:A,SUPPORTED_CIPHER:S,HMAC:k,HMAC_BUF:O,SUPPORTED_HMAC:T,COMPRESS:B,COMPRESS_BUF:U,SUPPORTED_COMPRESS:R},t.SSH_TO_OPENSSL={"ecdh-sha2-nistp256":"prime256v1","ecdh-sha2-nistp384":"secp384r1","ecdh-sha2-nistp521":"secp521r1","aes128-gcm":"aes-128-gcm","aes256-gcm":"aes-256-gcm","aes128-gcm@openssh.com":"aes-128-gcm","aes256-gcm@openssh.com":"aes-256-gcm","3des-cbc":"des-ede3-cbc","blowfish-cbc":"bf-cbc","aes256-cbc":"aes-256-cbc","aes192-cbc":"aes-192-cbc","aes128-cbc":"aes-128-cbc","idea-cbc":"idea-cbc","cast128-cbc":"cast-cbc","rijndael-cbc@lysator.liu.se":"aes-256-cbc",arcfour128:"rc4",arcfour256:"rc4",arcfour512:"rc4",arcfour:"rc4","camellia128-cbc":"camellia-128-cbc","camellia192-cbc":"camellia-192-cbc","camellia256-cbc":"camellia-256-cbc","camellia128-cbc@openssh.com":"camellia-128-cbc","camellia192-cbc@openssh.com":"camellia-192-cbc","camellia256-cbc@openssh.com":"camellia-256-cbc","3des-ctr":"des-ede3","blowfish-ctr":"bf-ecb","aes256-ctr":"aes-256-ctr","aes192-ctr":"aes-192-ctr","aes128-ctr":"aes-128-ctr","cast128-ctr":"cast5-ecb","camellia128-ctr":"camellia-128-ecb","camellia192-ctr":"camellia-192-ecb","camellia256-ctr":"camellia-256-ecb","camellia128-ctr@openssh.com":"camellia-128-ecb","camellia192-ctr@openssh.com":"camellia-192-ecb","camellia256-ctr@openssh.com":"camellia-256-ecb","hmac-sha1-96":"sha1","hmac-sha1":"sha1","hmac-sha2-256":"sha256","hmac-sha2-256-96":"sha256","hmac-sha2-512":"sha512","hmac-sha2-512-96":"sha512","hmac-md5-96":"md5","hmac-md5":"md5","hmac-ripemd160":"ripemd160"};var I=t.BUGS={BAD_DHGEX:1,OLD_EXIT:2,DYN_RPORT_BUG:4};t.BUGGY_IMPLS=[["Cisco-1.25",I.BAD_DHGEX],[/^[0-9.]+$/,I.OLD_EXIT],[/^OpenSSH_5\.\d+/,I.DYN_RPORT_BUG]],t.EDDSA_SUPPORTED=a,t.CURVE25519_SUPPORTED=c},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=_;var i=r(2),o=r(19),s=r(10),a=(s.Minimatch,r(34)),c=r(3).EventEmitter,f=r(6),u=r(9),h=r(11),l=r(36),p=r(20),d=(p.alphasort,p.alphasorti,p.setopts),g=p.ownProp,y=r(37),m=(r(0),p.childrenIgnored),v=p.isIgnored,E=r(22);function _(e,t,r){if("function"==typeof t&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return l(e,t)}return new w(e,t,r)}_.sync=l;var b=_.GlobSync=l.GlobSync;function w(e,t,r){if("function"==typeof t&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new b(e,t)}if(!(this instanceof w))return new w(e,t,r);d(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),"function"==typeof r&&(r=E(r),this.on("error",r),this.on("end",(function(e){r(null,e)})));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===n)return s();for(var o=0;o<n;o++)this._process(this.minimatch.set[o],o,!1,s);function s(){--i._processing,i._processing<=0&&i._finish()}}_.glob=_,_.hasMagic=function(e,t){var r=function(e,t){if(null===t||"object"!==n(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e}({},t);r.noprocess=!0;var i=new w(e,r).minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var o=0;o<i[0].length;o++)if("string"!=typeof i[0][o])return!0;return!1},_.Glob=w,a(w,c),w.prototype._finish=function(){if(u(this instanceof w),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();p.finish(this),this.emit("end",this.found)}},w.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n)}function n(){0==--e&&t._finish()}},w.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var n=Object.keys(r),i=this,s=n.length;if(0===s)return t();var a=this.matches[e]=Object.create(null);n.forEach((function(r,n){r=i._makeAbs(r),o.realpath(r,i.realpathCache,(function(n,o){n?"stat"===n.syscall?a[r]=!0:i.emit("error",n):a[o]=!0,0==--s&&(i.matches[e]=a,t())}))}))},w.prototype._mark=function(e){return p.mark(this,e)},w.prototype._makeAbs=function(e){return p.makeAbs(this,e)},w.prototype.abort=function(){this.aborted=!0,this.emit("abort")},w.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},w.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<n.length;t++){var i=n[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}},w.prototype._process=function(e,t,r,n){if(u(this instanceof w),u("function"==typeof n),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,r,n]);else{for(var i,o=0;"string"==typeof e[o];)o++;switch(o){case e.length:return void this._processSimple(e.join("/"),t,n);case 0:i=null;break;default:i=e.slice(0,o).join("/")}var a,c=e.slice(o);null===i?a=".":h(i)||h(e.join("/"))?(i&&h(i)||(i="/"+i),a=i):a=i;var f=this._makeAbs(a);if(m(this,a))return n();c[0]===s.GLOBSTAR?this._processGlobStar(i,a,f,c,t,r,n):this._processReaddir(i,a,f,c,t,r,n)}},w.prototype._processReaddir=function(e,t,r,n,i,o,s){var a=this;this._readdir(r,o,(function(c,f){return a._processReaddir2(e,t,r,n,i,o,f,s)}))},w.prototype._processReaddir2=function(e,t,r,n,i,o,s,a){if(!s)return a();for(var c=n[0],u=!!this.minimatch.negate,h=c._glob,l=this.dot||"."===h.charAt(0),p=[],d=0;d<s.length;d++){if("."!==(y=s[d]).charAt(0)||l)(u&&!e?!y.match(c):y.match(c))&&p.push(y)}var g=p.length;if(0===g)return a();if(1===n.length&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(d=0;d<g;d++){var y=p[d];e&&(y="/"!==e?e+"/"+y:e+y),"/"!==y.charAt(0)||this.nomount||(y=f.join(this.root,y)),this._emitMatch(i,y)}return a()}n.shift();for(d=0;d<g;d++){y=p[d];e&&(y="/"!==e?e+"/"+y:e+y),this._process([y].concat(n),i,o,a)}a()},w.prototype._emitMatch=function(e,t){if(!this.aborted&&!v(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var r=h(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0;var i=this.statCache[r];i&&this.emit("stat",t,i),this.emit("match",t)}}},w.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var r=this,n=y("lstat\0"+e,(function(n,i){if(n&&"ENOENT"===n.code)return t();var o=i&&i.isSymbolicLink();r.symlinks[e]=o,o||!i||i.isDirectory()?r._readdir(e,!1,t):(r.cache[e]="FILE",t())}));n&&i.lstat(e,n)}},w.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=y("readdir\0"+e+"\0"+t,r))){if(t&&!g(this.symlinks,e))return this._readdirInGlobStar(e,r);if(g(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return r();if(Array.isArray(n))return r(null,n)}i.readdir(e,function(e,t,r){return function(n,i){n?e._readdirError(t,n,r):e._readdirEntries(t,i,r)}}(this,e,r))}},w.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,r(null,t)}},w.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return r()}},w.prototype._processGlobStar=function(e,t,r,n,i,o,s){var a=this;this._readdir(r,o,(function(c,f){a._processGlobStar2(e,t,r,n,i,o,f,s)}))},w.prototype._processGlobStar2=function(e,t,r,n,i,o,s,a){if(!s)return a();var c=n.slice(1),f=e?[e]:[],u=f.concat(c);this._process(u,i,!1,a);var h=this.symlinks[r],l=s.length;if(h&&o)return a();for(var p=0;p<l;p++){if("."!==s[p].charAt(0)||this.dot){var d=f.concat(s[p],c);this._process(d,i,!0,a);var g=f.concat(s[p],n);this._process(g,i,!0,a)}}a()},w.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,(function(i,o){n._processSimple2(e,t,i,o,r)}))},w.prototype._processSimple2=function(e,t,r,n,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!n)return i();if(e&&h(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=f.join(this.root,e):(e=f.resolve(this.root,e),o&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()},w.prototype._stat=function(e,t){var r=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&g(this.cache,r)){var o=this.cache[r];if(Array.isArray(o)&&(o="DIR"),!n||"DIR"===o)return t(null,o);if(n&&"FILE"===o)return t()}var s=this.statCache[r];if(void 0!==s){if(!1===s)return t(null,s);var a=s.isDirectory()?"DIR":"FILE";return n&&"FILE"===a?t():t(null,a,s)}var c=this,f=y("stat\0"+r,(function(n,o){if(o&&o.isSymbolicLink())return i.stat(r,(function(n,i){n?c._stat2(e,r,null,o,t):c._stat2(e,r,n,i,t)}));c._stat2(e,r,n,o,t)}));f&&i.lstat(r,f)},w.prototype._stat2=function(e,t,r,n,i){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[t]=!1,i();var o="/"===e.slice(-1);if(this.statCache[t]=n,"/"===t.slice(-1)&&n&&!n.isDirectory())return i(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,o&&"FILE"===s?i():i(null,s,n)}},function(e,t,r){e.exports=u,u.realpath=u,u.sync=h,u.realpathSync=h,u.monkeypatch=function(){n.realpath=u,n.realpathSync=h},u.unmonkeypatch=function(){n.realpath=i,n.realpathSync=o};var n=r(2),i=n.realpath,o=n.realpathSync,s=process.version,a=/^v[0-5]\./.test(s),c=r(30);function f(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function u(e,t,r){if(a)return i(e,t,r);"function"==typeof t&&(r=t,t=null),i(e,t,(function(n,i){f(n)?c.realpath(e,t,r):r(n,i)}))}function h(e,t){if(a)return o(e,t);try{return o(e,t)}catch(r){if(f(r))return c.realpathSync(e,t);throw r}}},function(e,t,r){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.alphasort=f,t.alphasorti=c,t.setopts=function(e,t,r){r||(r={});if(r.matchBase&&-1===t.indexOf("/")){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=!1!==r.strict,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0);e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]);e.ignore.length&&(e.ignore=e.ignore.map(u))}(e,r),e.changedCwd=!1;var o=process.cwd();n(r,"cwd")?(e.cwd=i.resolve(r.cwd),e.changedCwd=e.cwd!==o):e.cwd=o;e.root=r.root||i.resolve(e.cwd,"/"),e.root=i.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/"));e.cwdAbs=s(e.cwd)?e.cwd:h(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/"));e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,e.minimatch=new a(t,r),e.options=e.minimatch.options},t.ownProp=n,t.makeAbs=h,t.finish=function(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var o=e.matches[n];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);t?r.push.apply(r,s):s.forEach((function(e){r[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[n];t?r.push(a):r[a]=!0}}t||(r=Object.keys(r));e.nosort||(r=r.sort(e.nocase?c:f));if(e.mark){for(n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter((function(t){var r=!/\/$/.test(t),n=e.cache[t]||e.cache[h(e,t)];return r&&n&&(r="DIR"!==n&&!Array.isArray(n)),r})))}e.ignore.length&&(r=r.filter((function(t){return!l(e,t)})));e.found=r},t.mark=function(e,t){var r=h(e,t),n=e.cache[r],i=t;if(n){var o="DIR"===n||Array.isArray(n),s="/"===t.slice(-1);if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==t){var a=h(e,i);e.statCache[a]=e.statCache[r],e.cache[a]=e.cache[r]}}return i},t.isIgnored=l,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var i=r(6),o=r(10),s=r(11),a=o.Minimatch;function c(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function f(e,t){return e.localeCompare(t)}function u(e){var t=null;if("/**"===e.slice(-3)){var r=e.replace(/(\/\*\*)+$/,"");t=new a(r,{dot:!0})}return{matcher:new a(e,{dot:!0}),gmatcher:t}}function h(e,t){var r=t;return r="/"===t.charAt(0)?i.join(e.root,t):s(t)||""===t?t:e.changedCwd?i.resolve(e.cwd,t):i.resolve(t),"win32"===process.platform&&(r=r.replace(/\\/g,"/")),r}function l(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}},function(e,t){e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),i=e[e.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach((function(e){n[e]=i[e]})),n}}},function(e,t,r){var n=r(21);function i(e){var t=function t(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function t(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(i),e.exports.strict=n(o),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},function(e,t,r){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}for(var o=r(44),s={},a=0,c=Object.keys(o);a<c.length;a++){var f=c[a];s[o[f]]=f}var u={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};e.exports=u;for(var h=0,l=Object.keys(u);h<l.length;h++){var p=l[h];if(!("channels"in u[p]))throw new Error("missing channels property: "+p);if(!("labels"in u[p]))throw new Error("missing channel labels property: "+p);if(u[p].labels.length!==u[p].channels)throw new Error("channel and label counts mismatch: "+p);var d=u[p],g=d.channels,y=d.labels;delete u[p].channels,delete u[p].labels,Object.defineProperty(u[p],"channels",{value:g}),Object.defineProperty(u[p],"labels",{value:y})}u.rgb.hsl=function(e){var t,r=e[0]/255,n=e[1]/255,i=e[2]/255,o=Math.min(r,n,i),s=Math.max(r,n,i),a=s-o;s===o?t=0:r===s?t=(n-i)/a:n===s?t=2+(i-r)/a:i===s&&(t=4+(r-n)/a),(t=Math.min(60*t,360))<0&&(t+=360);var c=(o+s)/2;return[t,100*(s===o?0:c<=.5?a/(s+o):a/(2-s-o)),100*c]},u.rgb.hsv=function(e){var t,r,n,i,o,s=e[0]/255,a=e[1]/255,c=e[2]/255,f=Math.max(s,a,c),u=f-Math.min(s,a,c),h=function(e){return(f-e)/6/u+.5};return 0===u?(i=0,o=0):(o=u/f,t=h(s),r=h(a),n=h(c),s===f?i=n-r:a===f?i=1/3+t-n:c===f&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*f]},u.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2];return[u.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(r,n))),100*(n=1-1/255*Math.max(t,Math.max(r,n)))]},u.rgb.cmyk=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(1-t,1-r,1-n);return[100*((1-t-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*i]},u.rgb.keyword=function(e){var t=s[e];if(t)return t;for(var r,n,i,a=1/0,c=0,f=Object.keys(o);c<f.length;c++){var u=f[c],h=o[u],l=(n=e,i=h,Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2)+Math.pow(n[2]-i[2],2));l<a&&(a=l,r=u)}return r},u.keyword.rgb=function(e){return o[e]},u.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]},u.rgb.lab=function(e){var t=u.rgb.xyz(e),r=t[0],n=t[1],i=t[2];return n/=100,i/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},u.hsl.rgb=function(e){var t,r,n,i=e[0]/360,o=e[1]/100,s=e[2]/100;if(0===o)return[n=255*s,n,n];for(var a=2*s-(t=s<.5?s*(1+o):s+o-s*o),c=[0,0,0],f=0;f<3;f++)(r=i+1/3*-(f-1))<0&&r++,r>1&&r--,n=6*r<1?a+6*(t-a)*r:2*r<1?t:3*r<2?a+(t-a)*(2/3-r)*6:a,c[f]=255*n;return c},u.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,i=r,o=Math.max(n,.01);return r*=(n*=2)<=1?n:2-n,i*=o<=1?o:2-o,[t,100*(0===n?2*i/(o+i):2*r/(n+r)),100*((n+r)/2)]},u.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),s=255*n*(1-r),a=255*n*(1-r*o),c=255*n*(1-r*(1-o));switch(n*=255,i){case 0:return[n,c,s];case 1:return[a,n,s];case 2:return[s,n,c];case 3:return[s,a,n];case 4:return[c,s,n];case 5:return[n,s,a]}},u.hsv.hsl=function(e){var t,r,n=e[0],i=e[1]/100,o=e[2]/100,s=Math.max(o,.01);r=(2-i)*o;var a=(2-i)*s;return t=i*s,[n,100*(t=(t/=a<=1?a:2-a)||0),100*(r/=2)]},u.hwb.rgb=function(e){var t,r=e[0]/360,n=e[1]/100,i=e[2]/100,o=n+i;o>1&&(n/=o,i/=o);var s=Math.floor(6*r),a=1-i;t=6*r-s,0!=(1&s)&&(t=1-t);var c,f,u,h=n+t*(a-n);switch(s){default:case 6:case 0:c=a,f=h,u=n;break;case 1:c=h,f=a,u=n;break;case 2:c=n,f=a,u=h;break;case 3:c=n,f=h,u=a;break;case 4:c=h,f=n,u=a;break;case 5:c=a,f=n,u=h}return[255*c,255*f,255*u]},u.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]},u.xyz.rgb=function(e){var t,r,n,i=e[0]/100,o=e[1]/100,s=e[2]/100;return r=-.9689*i+1.8758*o+.0415*s,n=.0557*i+-.204*o+1.057*s,t=(t=3.2406*i+-1.5372*o+-.4986*s)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(t=Math.min(Math.max(0,t),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},u.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2];return r/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(t-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},u.lab.xyz=function(e){var t,r,n,i=e[0];t=e[1]/500+(r=(i+16)/116),n=r-e[2]/200;var o=Math.pow(r,3),s=Math.pow(t,3),a=Math.pow(n,3);return r=o>.008856?o:(r-16/116)/7.787,t=s>.008856?s:(t-16/116)/7.787,n=a>.008856?a:(n-16/116)/7.787,[t*=95.047,r*=100,n*=108.883]},u.lab.lch=function(e){var t,r=e[0],n=e[1],i=e[2];return(t=360*Math.atan2(i,n)/2/Math.PI)<0&&(t+=360),[r,Math.sqrt(n*n+i*i),t]},u.lch.lab=function(e){var t=e[0],r=e[1],n=e[2]/360*2*Math.PI;return[t,r*Math.cos(n),r*Math.sin(n)]},u.rgb.ansi16=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=n(e,3),i=r[0],o=r[1],s=r[2],a=null===t?u.rgb.hsv(e)[2]:t;if(0===(a=Math.round(a/50)))return 30;var c=30+(Math.round(s/255)<<2|Math.round(o/255)<<1|Math.round(i/255));return 2===a&&(c+=60),c},u.hsv.ansi16=function(e){return u.rgb.ansi16(u.hsv.rgb(e),e[2])},u.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},u.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var r=.5*(1+~~(e>50));return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},u.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var r;return e-=16,[Math.floor(e/36)/5*255,Math.floor((r=e%36)/6)/5*255,r%6/5*255]},u.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},u.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];3===t[0].length&&(r=r.split("").map((function(e){return e+e})).join(""));var n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},u.rgb.hcg=function(e){var t,r=e[0]/255,n=e[1]/255,i=e[2]/255,o=Math.max(Math.max(r,n),i),s=Math.min(Math.min(r,n),i),a=o-s;return t=a<=0?0:o===r?(n-i)/a%6:o===n?2+(i-r)/a:4+(r-n)/a,t/=6,[360*(t%=1),100*a,100*(a<1?s/(1-a):0)]},u.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=r<.5?2*t*r:2*t*(1-r),i=0;return n<1&&(i=(r-.5*n)/(1-n)),[e[0],100*n,100*i]},u.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},u.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];var i,o=[0,0,0],s=t%1*6,a=s%1,c=1-a;switch(Math.floor(s)){case 0:o[0]=1,o[1]=a,o[2]=0;break;case 1:o[0]=c,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=a;break;case 3:o[0]=0,o[1]=c,o[2]=1;break;case 4:o[0]=a,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=c}return i=(1-r)*n,[255*(r*o[0]+i),255*(r*o[1]+i),255*(r*o[2]+i)]},u.hcg.hsv=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t),n=0;return r>0&&(n=t/r),[e[0],100*n,100*r]},u.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100*(1-t)+.5*t,n=0;return r>0&&r<.5?n=t/(2*r):r>=.5&&r<1&&(n=t/(2*(1-r))),[e[0],100*n,100*r]},u.hcg.hwb=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]},u.hwb.hcg=function(e){var t=e[1]/100,r=1-e[2]/100,n=r-t,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},u.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},u.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},u.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},u.gray.hsl=function(e){return[0,0,e[0]]},u.gray.hsv=u.gray.hsl,u.gray.hwb=function(e){return[0,100,e[0]]},u.gray.cmyk=function(e){return[0,0,0,e[0]]},u.gray.lab=function(e){return[e[0],0,0]},u.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},u.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(7),o=r(12).Socket,s=r(52).lookup,a=r(3).EventEmitter,c=r(0).inherits,f=i.getHashes(),u=r(13),h=u.SSH2Stream,l=u.SFTPStream,p=u.constants,d=p.BUGS,g=p.ALGORITHMS,y=p.EDDSA_SUPPORTED,m=u.utils.parseKey,v=r(66),E=r(27),_=r(69),b=r(71),w=r(8).readUInt32BE,S=Math.pow(2,32)-1,A=/^OpenSSH_(?:(?![0-4])\d)|(?:\d{2,})/,k=function(e){};function T(){if(!(this instanceof T))return new T;a.call(this),this.config={host:void 0,port:void 0,localAddress:void 0,localPort:void 0,forceIPv4:void 0,forceIPv6:void 0,keepaliveCountMax:void 0,keepaliveInterval:void 0,readyTimeout:void 0,username:void 0,password:void 0,privateKey:void 0,tryKeyboard:void 0,agent:void 0,allowAgentFwd:void 0,authHandler:void 0,hostHashAlgo:void 0,hostHashCb:void 0,strictVendor:void 0,debug:void 0},this._readyTimeout=void 0,this._channels=void 0,this._callbacks=void 0,this._forwarding=void 0,this._forwardingUnix=void 0,this._acceptX11=void 0,this._agentFwdEnabled=void 0,this._curChan=void 0,this._remoteVer=void 0,this._sshstream=void 0,this._sock=void 0,this._resetKA=void 0}function O(e,t,r,i){var o=B(e),s=E.MAX_WINDOW,a=E.PACKET_SIZE,c=!0;if(!1===o)return i(new Error("No free channels available"));"function"==typeof r&&(i=r,r={}),e._channels[o]=i;var f=e._sshstream;return f.once("CHANNEL_OPEN_CONFIRMATION:"+o,u).once("CHANNEL_OPEN_FAILURE:"+o,h).once("CHANNEL_CLOSE:"+o,h),"session"===t?c=f.session(o,s,a):"direct-tcpip"===t?c=f.directTcpip(o,s,a,r):"direct-streamlocal@openssh.com"===t&&(c=f.openssh_directStreamLocal(o,s,a,r)),c;function u(r){f.removeListener("CHANNEL_OPEN_FAILURE:"+o,h),f.removeListener("CHANNEL_CLOSE:"+o,h);var n={type:t,incoming:{id:o,window:s,packetSize:a,state:"open"},outgoing:{id:r.sender,window:r.window,packetSize:r.packetSize,state:"open"}};i(void 0,new E(n,e))}function h(t){var r;f.removeListener("CHANNEL_OPEN_CONFIRMATION:"+o,u),f.removeListener("CHANNEL_OPEN_FAILURE:"+o,h),f.removeListener("CHANNEL_CLOSE:"+o,h),delete e._channels[o],t instanceof Error?r=t:"object"===n(t)&&null!==t?((r=new Error("(SSH) Channel open failure: "+t.description)).reason=t.reason,r.lang=t.lang):(r=new Error("(SSH) Channel open failure: server closed channel unexpectedly")).reason=r.lang="",i(r)}}function B(e){if(e._curChan<S)return++e._curChan;for(var t=0,r=e._channels;t<S;++t)if(!r[t])return t;return!1}function R(e,t,r){var i={single:!1,protocol:"MIT-MAGIC-COOKIE-1",cookie:void 0,screen:0};"function"==typeof t?r=t:"object"===n(t)&&null!==t&&("boolean"==typeof t.single&&(i.single=t.single),"number"==typeof t.screen&&(i.screen=t.screen),"string"==typeof t.protocol&&(i.protocol=t.protocol),"string"==typeof t.cookie?i.cookie=t.cookie:Buffer.isBuffer(t.cookie)&&(i.cookie=t.cookie.toString("hex"))),void 0===i.cookie&&(i.cookie=D());var o="function"==typeof r;return"open"!==e.outgoing.state?(o&&r(new Error("Channel is not open")),!0):(o&&e._callbacks.push((function(t){if(t)return r(!0!==t?t:new Error("Unable to request X11"));e._hasX11=!0,++e._client._acceptX11,e.once("close",(function(){e._client._acceptX11&&--e._client._acceptX11})),r()})),e._client._sshstream.x11Forward(e.outgoing.id,i,o))}function U(e,t,r){var i=24,o=80,s=640,a=480,c="vt100",f=null;"function"==typeof t?r=t:"object"===n(t)&&null!==t&&("number"==typeof t.rows&&(i=t.rows),"number"==typeof t.cols&&(o=t.cols),"number"==typeof t.width&&(s=t.width),"number"==typeof t.height&&(a=t.height),"string"==typeof t.term&&(c=t.term),"object"===n(t.modes)&&(f=t.modes));var u="function"==typeof r;return"open"!==e.outgoing.state?(u&&r(new Error("Channel is not open")),!0):(u&&e._callbacks.push((function(e){if(e)return r(!0!==e?e:new Error("Unable to request a pseudo-terminal"));r()})),e._client._sshstream.pty(e.outgoing.id,i,o,a,s,c,f,u))}function N(e,t){var r="function"==typeof t;return"open"!==e.outgoing.state?(r&&t(new Error("Channel is not open")),!0):e._client._agentFwdEnabled?(r&&t(!1),!0):(e._client._agentFwdEnabled=!0,e._callbacks.push((function(n){if(n)return e._client._agentFwdEnabled=!1,void(r&&t(!0!==n?n:new Error("Unable to request agent forwarding")));r&&t()})),e._client._sshstream.openssh_agentForward(e.outgoing.id,!0))}function C(e,t){if("open"!==e.outgoing.state)return!0;for(var r,n,i=!0,o=Object.keys(t||{}),s=0,a=o.length;s<a;++s)n=t[r=o[s]],i=e._client._sshstream.env(e.outgoing.id,r,n,!1);return i}function I(e,t,r){return"open"!==e.outgoing.state?(r(new Error("Channel is not open")),!0):(e._callbacks.push((function(n){if(n)return r(!0!==n?n:new Error("Unable to start subsystem: "+t));e.subtype="subsystem",r(void 0,e)})),e._client._sshstream.subsystem(e.outgoing.id,t,!0))}c(T,a),T.prototype.connect=function(e){var t=this;if(this._sock&&this._sock.writable)return this.once("close",(function(){t.connect(e)})),void this.end();this.config.host=e.hostname||e.host||"localhost",this.config.port=e.port||22,this.config.localAddress="string"==typeof e.localAddress?e.localAddress:void 0,this.config.localPort="string"==typeof e.localPort||"number"==typeof e.localPort?e.localPort:void 0,this.config.forceIPv4=e.forceIPv4||!1,this.config.forceIPv6=e.forceIPv6||!1,this.config.keepaliveCountMax="number"==typeof e.keepaliveCountMax&&e.keepaliveCountMax>=0?e.keepaliveCountMax:3,this.config.keepaliveInterval="number"==typeof e.keepaliveInterval&&e.keepaliveInterval>0?e.keepaliveInterval:0,this.config.readyTimeout="number"==typeof e.readyTimeout&&e.readyTimeout>=0?e.readyTimeout:2e4;var r,a={kex:void 0,kexBuf:void 0,cipher:void 0,cipherBuf:void 0,serverHostKey:void 0,serverHostKeyBuf:void 0,hmac:void 0,hmacBuf:void 0,compress:void 0,compressBuf:void 0};if("object"===n(e.algorithms)&&null!==e.algorithms){var c,u;if(u=e.algorithms.kex,Array.isArray(u)&&u.length>0){for(c=g.SUPPORTED_KEX,r=0;r<u.length;++r)if(-1===c.indexOf(u[r]))throw new Error("Unsupported key exchange algorithm: "+u[r]);a.kex=u}if(u=e.algorithms.cipher,Array.isArray(u)&&u.length>0){for(c=g.SUPPORTED_CIPHER,r=0;r<u.length;++r)if(-1===c.indexOf(u[r]))throw new Error("Unsupported cipher algorithm: "+u[r]);a.cipher=u}if(u=e.algorithms.serverHostKey,Array.isArray(u)&&u.length>0){for(c=g.SUPPORTED_SERVER_HOST_KEY,r=0;r<u.length;++r)if(-1===c.indexOf(u[r]))throw new Error("Unsupported server host key algorithm: "+u[r]);a.serverHostKey=u}if(u=e.algorithms.hmac,Array.isArray(u)&&u.length>0){for(c=g.SUPPORTED_HMAC,r=0;r<u.length;++r)if(-1===c.indexOf(u[r]))throw new Error("Unsupported HMAC algorithm: "+u[r]);a.hmac=u}if(u=e.algorithms.compress,Array.isArray(u)&&u.length>0){for(c=g.SUPPORTED_COMPRESS,r=0;r<u.length;++r)if(-1===c.indexOf(u[r]))throw new Error("Unsupported compression algorithm: "+u[r]);a.compress=u}}if(void 0===a.compress&&(e.compress?(a.compress=["zlib@openssh.com","zlib"],"force"!==e.compress&&a.compress.push("none")):!1===e.compress&&(a.compress=["none"])),"string"==typeof e.username)this.config.username=e.username;else{if("string"!=typeof e.user)throw new Error("Invalid username");this.config.username=e.user}this.config.password="string"==typeof e.password?e.password:void 0,this.config.privateKey="string"==typeof e.privateKey||Buffer.isBuffer(e.privateKey)?e.privateKey:void 0,this.config.localHostname="string"==typeof e.localHostname&&e.localHostname.length?e.localHostname:void 0,this.config.localUsername="string"==typeof e.localUsername&&e.localUsername.length?e.localUsername:void 0,this.config.tryKeyboard=!0===e.tryKeyboard,this.config.agent="string"==typeof e.agent&&e.agent.length?e.agent:void 0,this.config.allowAgentFwd=!0===e.agentForward&&void 0!==this.config.agent;var l=this.config.authHandler="function"==typeof e.authHandler?e.authHandler:void 0;this.config.strictVendor="boolean"!=typeof e.strictVendor||e.strictVendor;var d=this.config.debug="function"==typeof e.debug?e.debug:k;if(!0===e.agentForward&&!this.config.allowAgentFwd)throw new Error("You must set a valid agent path to allow agent forwarding");var v,b=this._callbacks=[];if(this._channels={},this._forwarding={},this._forwardingUnix={},this._acceptX11=0,this._agentFwdEnabled=!1,this._curChan=-1,this._remoteVer=void 0,this.config.privateKey){if((v=m(this.config.privateKey,e.passphrase))instanceof Error)throw new Error("Cannot parse privateKey: "+v.message);if(Array.isArray(v)&&(v=v[0]),null===v.getPrivatePEM())throw new Error("privateKey value does not contain a (valid) private key")}var S=this._sshstream=new h({algorithms:a,debug:d===k?void 0:d}),A=this._sock=e.sock||new o;this._sock.stderr&&"function"==typeof this._sock.stderr.resume&&this._sock.stderr.resume();var T,O,R=this.config.keepaliveInterval,U=this.config.keepaliveCountMax,N=0;function C(){if(++N>U){if(clearInterval(T),A.readable){var e=new Error("Keepalive timeout");e.level="client-timeout",t.emit("error",e),A.destroy()}}else A.writable?(b.push(I),S.ping()):clearInterval(T)}function I(){R>0&&(N=0,clearInterval(T),A.writable&&(T=setInterval(C,R)))}if(this._resetKA=I,S.on("USERAUTH_BANNER",(function(e){t.emit("banner",e)})),A.on("connect",(function(){d("DEBUG: Client: Connected"),t.emit("connect"),e.sock||S.pipe(A).pipe(S)})).on("timeout",(function(){t.emit("timeout")})).on("error",(function(e){clearTimeout(t._readyTimeout),e.level="client-socket",t.emit("error",e)})).on("end",(function(){S.unpipe(A),clearTimeout(t._readyTimeout),clearInterval(T),t.emit("end")})).on("close",(function(){S.unpipe(A),clearTimeout(t._readyTimeout),clearInterval(T),t.emit("close");var e=b,n=new Error("No response from server");for(b=t._callbacks=[],r=0;r<e.length;++r)e[r](n);var i=t._channels,o=Object.keys(i);for(t._channels={},r=0;r<o.length;++r){var s,a=S.emit("CHANNEL_OPEN_FAILURE:"+o[r],n),c=S.emit("CHANNEL_CLOSE:"+o[r]);a||c||!(s=i[o[r]])||"function"!=typeof s||s(n)}})),S.on("drain",(function(){t.emit("drain")})).once("header",(function(e){t._remoteVer=e.versions.software,e.greeting&&t.emit("greeting",e.greeting)})).on("continue",(function(){t.emit("continue")})).on("error",(function(e){void 0===e.level?e.level="protocol":"handshake"===e.level&&clearTimeout(t._readyTimeout),t.emit("error",e)})).on("end",(function(){A.resume()})),"function"==typeof e.hostVerifier){if(-1===f.indexOf(e.hostHash))throw new Error("Invalid host hash algorithm: "+e.hostHash);var D=e.hostVerifier,L=i.createHash(e.hostHash);S.once("fingerprint",(function(e,t){L.update(e);var r=D(L.digest("hex"),t);void 0!==r&&t(r)}))}var P,x=null,H=null,M=0,K=["none"];if(void 0!==this.config.password&&K.push("password"),void 0!==v&&K.push("publickey"),void 0!==this.config.agent&&K.push("agent"),this.config.tryKeyboard&&K.push("keyboard-interactive"),void 0!==v&&void 0!==this.config.localHostname&&void 0!==this.config.localUsername&&K.push("hostbased"),void 0===l){var G=0;l=function(e,t,r){return G!==K.length&&K[G++]}}var F=!1;function q(e){if(F=!0,!1===e){S.removeListener("USERAUTH_FAILURE",Q),S.removeListener("USERAUTH_PK_OK",V);var r=new Error("All configured authentication methods failed");return r.level="client-authentication",t.emit("error",r),void(S.writable&&t.end())}if(-1===K.indexOf(e))throw new Error("Authentication method not allowed: "+e);switch(O=e){case"password":S.authPassword(t.config.username,t.config.password);break;case"publickey":S.authPK(t.config.username,v),S.once("USERAUTH_PK_OK",V);break;case"hostbased":S.authHostbased(t.config.username,v,t.config.localHostname,t.config.localUsername,(function(e,r){var n=v.sign(e);if(n instanceof Error)return n.message="Error while signing data with privateKey: "+n.message,n.level="client-authentication",t.emit("error",n),j();r(n)}));break;case"agent":_(t.config.agent,(function(e,r){return e?(e.level="agent",t.emit("error",e),P=void 0,j()):0===r.length?(d("DEBUG: Agent: No keys stored in agent"),P=void 0,j()):(P=r,M=0,S.authPK(t.config.username,r[0]),void S.once("USERAUTH_PK_OK",V))}));break;case"keyboard-interactive":S.authKeyboard(t.config.username),S.on("USERAUTH_INFO_REQUEST",X);break;case"none":S.authNone(t.config.username)}}function j(){F=!1;var e=l(H,x,q);F||void 0===e||q(e)}function W(){if("agent"===O){if(M>=P.length)return;++M>=P.length?(d("DEBUG: Agent: No more keys left to try"),d("DEBUG: Client: agent auth failed"),P=void 0,j()):(d("DEBUG: Agent: Trying key #"+(M+1)),S.authPK(t.config.username,P[M]),S.once("USERAUTH_PK_OK",V))}}function X(e,r,n,i){if(0===(Array.isArray(i)?i.length:0))return d("DEBUG: Client: Sending automatic USERAUTH_INFO_RESPONSE"),S.authInfoRes();t.emit("keyboard-interactive",e,r,n,i,(function(e){S.authInfoRes(e)}))}function V(){if("agent"===O){var e=P[M],r=w(e,0),n=e.toString("ascii",4,4+r),i=n.slice(4);switch(n){case"ssh-rsa":case"ssh-dss":case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":break;default:if(y&&"ssh-ed25519"===n)break;return d("DEBUG: Agent: Skipping unsupported key type: "+n),W()}S.authPK(t.config.username,e,(function(r,o){_(t.config.agent,e,i,r,(function(e,r){if(e)e.level="agent",t.emit("error",e);else{var i=w(r,0);if(4+i+4<r.length){if(r.toString("ascii",4,4+i)===n)return o(r.slice(4+i+4));(e=new Error("Agent key/signature type mismatch")).level="agent",t.emit("error",e)}}W()}))}))}else"publickey"===O&&S.authPK(t.config.username,v,(function(e,r){var n=v.sign(e);if(n instanceof Error)return n.message="Error while signing data with privateKey: "+n.message,n.level="client-authentication",t.emit("error",n),j();r(n)}))}function Q(e,t){if(S.removeListener("USERAUTH_PK_OK",V),S.removeListener("USERAUTH_INFO_REQUEST",X),"agent"===O)return d("DEBUG: Client: Agent key #"+(M+1)+" failed"),W();d("DEBUG: Client: "+O+" auth failed"),x=t,H=e,j()}if(S.once("USERAUTH_SUCCESS",(function(){S.removeListener("USERAUTH_FAILURE",Q),S.removeListener("USERAUTH_INFO_REQUEST",X),I(),clearTimeout(t._readyTimeout),t.emit("ready")})).on("USERAUTH_FAILURE",Q),S.once("ready",(function(){S.service("ssh-userauth"),S.once("SERVICE_ACCEPT",(function(e){"ssh-userauth"===e&&j()}))})),S.on("CHANNEL_OPEN",(function(e){!function(e,t){var r,n=!1;function i(){var r={type:t.type,incoming:{id:n,window:E.MAX_WINDOW,packetSize:E.PACKET_SIZE,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}},i=new E(r,e);return e._sshstream.channelOpenConfirm(t.sender,n,E.MAX_WINDOW,E.PACKET_SIZE),i}function o(){void 0===r&&(r=!1===n?p.CHANNEL_OPEN_FAILURE.RESOURCE_SHORTAGE:p.CHANNEL_OPEN_FAILURE.CONNECT_FAILED),e._sshstream.channelOpenFail(t.sender,r,"","")}if("forwarded-tcpip"===t.type||"x11"===t.type||"auth-agent@openssh.com"===t.type||"forwarded-streamlocal@openssh.com"===t.type){var s="forwarded-tcpip"===t.type&&void 0===e._forwarding[t.data.destIP+":"+t.data.destPort]||"forwarded-streamlocal@openssh.com"===t.type&&void 0===e._forwardingUnix[t.data.socketPath]||"x11"===t.type&&0===e._acceptX11||"auth-agent@openssh.com"===t.type&&!e._agentFwdEnabled;s?(r=p.CHANNEL_OPEN_FAILURE.ADMINISTRATIVELY_PROHIBITED,e.config.debug("DEBUG: Client: Automatic rejection of incoming channel open: unexpected channel open for: "+t.type)):!1===(n=B(e))?(e.config.debug("DEBUG: Client: Automatic rejection of incoming channel open: no channels available"),s=!0):e._channels[n]=!0,s&&o(),!1!==n&&("forwarded-tcpip"===t.type?(0===t.data.destPort&&(t.data.destPort=e._forwarding[t.data.destIP+":"+t.data.destPort]),e.emit("tcp connection",t.data,i,o)):"x11"===t.type?e.emit("x11",t.data,i,o):"forwarded-streamlocal@openssh.com"===t.type?e.emit("unix connection",t.data,i,o):_(e.config.agent,i,o))}else e.config.debug("DEBUG: Client: Automatic rejection of incoming channel open: unsupported type: "+t.type),r=p.CHANNEL_OPEN_FAILURE.UNKNOWN_CHANNEL_TYPE,o()}(t,e)})),S.on("REQUEST_SUCCESS",(function(e){b.length&&b.shift()(!1,e)})).on("REQUEST_FAILURE",(function(){b.length&&b.shift()(!0)})),S.on("GLOBAL_REQUEST",(function(e,t,r){t&&S.requestFailure()})),e.sock)J(),S.pipe(A).pipe(S);else{var Y=this.config.host,z=this.config.forceIPv4,$=this.config.forceIPv6;function Z(){J(),t._sock.connect({host:Y,port:t.config.port,localAddress:t.config.localAddress,localPort:t.config.localPort}),t._sock.setNoDelay(!0),t._sock.setMaxListeners(0),t._sock.setTimeout("number"==typeof e.timeout?e.timeout:0)}d("DEBUG: Client: Trying "+Y+" on port "+this.config.port+" ..."),!z&&!$||z&&$?Z():s(Y,z?4:6,(function(e,r,n){if(e){var i=new Error("Error while looking up "+(z?"IPv4":"IPv6")+" address for host "+Y+": "+e);return clearTimeout(t._readyTimeout),i.level="client-dns",t.emit("error",i),void t.emit("close")}Y=r,Z()}))}function J(){t.config.readyTimeout>0&&(t._readyTimeout=setTimeout((function(){var e=new Error("Timed out while waiting for handshake");e.level="client-timeout",t.emit("error",e),A.destroy()}),t.config.readyTimeout))}},T.prototype.end=function(){return!!(this._sock&&this._sock.writable&&this._sshstream&&this._sshstream.writable)&&this._sshstream.disconnect()},T.prototype.destroy=function(){this._sock&&this._sock.destroy()},T.prototype.exec=function(e,t,r){if(!(this._sock&&this._sock.writable&&this._sshstream&&this._sshstream.writable))throw new Error("Not connected");"function"==typeof t&&(r=t,t={});var i=this;return O(this,"session",{allowHalfOpen:!1!==t.allowHalfOpen},(function(o,s){if(o)return r(o);var a=[];function c(e){if(e)return s.close(),r(e);a.length&&a.shift()()}(!0===i.config.allowAgentFwd||t&&!0===t.agentForward&&void 0!==i.config.agent)&&a.push((function(){N(s,c)})),"object"===n(t)&&null!==t&&("object"===n(t.env)&&null!==t.env&&C(s,t.env),("object"===n(t.pty)&&null!==t.pty||!0===t.pty)&&a.push((function(){U(s,t.pty,c)})),("object"===n(t.x11)&&null!==t.x11||"number"===t.x11||!0===t.x11)&&a.push((function(){R(s,t.x11,c)}))),a.push((function(){!function(e,t,r,n){if("open"!==e.outgoing.state)return n(new Error("Channel is not open")),!0;e._callbacks.push((function(t){if(t)return n(!0!==t?t:new Error("Unable to exec"));e.subtype="exec",e.allowHalfOpen=!1!==r.allowHalfOpen,n(void 0,e)})),e._client._sshstream.exec(e.outgoing.id,t,!0)}(s,e,t,r)})),a.shift()()}))},T.prototype.shell=function(e,t,r){if(!(this._sock&&this._sock.writable&&this._sshstream&&this._sshstream.writable))throw new Error("Not connected");var i=this;return"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),!e||void 0===e.x11&&void 0===e.env||(t=e,e=void 0),O(this,"session",(function(o,s){if(o)return r(o);var a=[];function c(e){if(e)return s.close(),r(e);a.length&&a.shift()()}(!0===i.config.allowAgentFwd||t&&!0===t.agentForward&&void 0!==i.config.agent)&&a.push((function(){N(s,c)})),!1!==e&&a.push((function(){U(s,e,c)})),"object"===n(t)&&null!==t&&("object"===n(t.env)&&null!==t.env&&C(s,t.env),("object"===n(t.x11)&&null!==t.x11||"number"===t.x11||!0===t.x11)&&a.push((function(){R(s,t.x11,c)}))),a.push((function(){!function(e,t){if("open"!==e.outgoing.state)return t(new Error("Channel is not open")),!0;e._callbacks.push((function(r){if(r)return t(!0!==r?r:new Error("Unable to open shell"));e.subtype="shell",t(void 0,e)})),e._client._sshstream.shell(e.outgoing.id,!0)}(s,r)})),a.shift()()}))},T.prototype.subsys=function(e,t){if(!(this._sock&&this._sock.writable&&this._sshstream&&this._sshstream.writable))throw new Error("Not connected");return O(this,"session",(function(r,n){if(r)return t(r);I(n,e,(function(e,r){if(e)return t(e);t(void 0,r)}))}))},T.prototype.sftp=function(e){if(!(this._sock&&this._sock.writable&&this._sshstream&&this._sshstream.writable))throw new Error("Not connected");var t=this;return O(this,"session",(function(r,n){if(r)return e(r);I(n,"sftp",(function(r,n){if(r)return e(r);var i=t._sshstream._state.incoming.identRaw,o={debug:t.config.debug},s=new l(o,i);function a(t){s.removeListener("ready",c),n.removeListener("exit",f),e(t)}function c(){s.removeListener("error",a),n.removeListener("exit",f),e(void 0,new b(s))}function f(t,r){var n;s.removeListener("ready",c),s.removeListener("error",a),n="number"==typeof t?"Received exit code "+t+" while establishing SFTP session":"Received signal "+r+" while establishing SFTP session";var i=new Error(n);i.code=t,i.signal=r,e(i)}s.once("error",a).once("ready",c).once("close",(function(){n.end()})),n.once("exit",f),s.pipe(n).pipe(s)}))}))},T.prototype.forwardIn=function(e,t,r){if(!(this._sock&&this._sock.writable&&this._sshstream&&this._sshstream.writable))throw new Error("Not connected");var n=this,i="function"==typeof r;return i&&this._callbacks.push((function(i,o){if(i)return r(!0!==i?i:new Error("Unable to bind to "+e+":"+t));var s=t;0===t&&o&&o.length>=4&&(s=w(o,0),n._sshstream.remoteBugs&d.DYN_RPORT_BUG||(t=s)),n._forwarding[e+":"+t]=s,r(void 0,s)})),this._sshstream.tcpipForward(e,t,i)},T.prototype.unforwardIn=function(e,t,r){if(!(this._sock&&this._sock.writable&&this._sshstream&&this._sshstream.writable))throw new Error("Not connected");var n=this,i="function"==typeof r;return i&&this._callbacks.push((function(i){if(i)return r(!0!==i?i:new Error("Unable to unbind from "+e+":"+t));delete n._forwarding[e+":"+t],r()})),this._sshstream.cancelTcpipForward(e,t,i)},T.prototype.forwardOut=function(e,t,r,n,i){if(!(this._sock&&this._sock.writable&&this._sshstream&&this._sshstream.writable))throw new Error("Not connected");return O(this,"direct-tcpip",{srcIP:e,srcPort:t,dstIP:r,dstPort:n},i)},T.prototype.openssh_noMoreSessions=function(e){if(!(this._sock&&this._sock.writable&&this._sshstream&&this._sshstream.writable))throw new Error("Not connected");var t="function"==typeof e;return!this.config.strictVendor||this.config.strictVendor&&A.test(this._remoteVer)?(t&&this._callbacks.push((function(t){if(t)return e(!0!==t?t:new Error("Unable to disable future sessions"));e()})),this._sshstream.openssh_noMoreSessions(t)):(t&&process.nextTick((function(){e(new Error("strictVendor enabled and server is not OpenSSH or compatible version"))})),!0)},T.prototype.openssh_forwardInStreamLocal=function(e,t){if(!(this._sock&&this._sock.writable&&this._sshstream&&this._sshstream.writable))throw new Error("Not connected");var r="function"==typeof t,n=this;return!this.config.strictVendor||this.config.strictVendor&&A.test(this._remoteVer)?(r&&this._callbacks.push((function(r){if(r)return t(!0!==r?r:new Error("Unable to bind to "+e));n._forwardingUnix[e]=!0,t()})),this._sshstream.openssh_streamLocalForward(e,r)):(r&&process.nextTick((function(){t(new Error("strictVendor enabled and server is not OpenSSH or compatible version"))})),!0)},T.prototype.openssh_unforwardInStreamLocal=function(e,t){if(!(this._sock&&this._sock.writable&&this._sshstream&&this._sshstream.writable))throw new Error("Not connected");var r="function"==typeof t,n=this;return!this.config.strictVendor||this.config.strictVendor&&A.test(this._remoteVer)?(r&&this._callbacks.push((function(r){if(r)return t(!0!==r?r:new Error("Unable to unbind on "+e));delete n._forwardingUnix[e],t()})),this._sshstream.openssh_cancelStreamLocalForward(e,r)):(r&&process.nextTick((function(){t(new Error("strictVendor enabled and server is not OpenSSH or compatible version"))})),!0)},T.prototype.openssh_forwardOutStreamLocal=function(e,t){if(!(this._sock&&this._sock.writable&&this._sshstream&&this._sshstream.writable))throw new Error("Not connected");return!this.config.strictVendor||this.config.strictVendor&&A.test(this._remoteVer)?O(this,"direct-streamlocal@openssh.com",{socketPath:e},t):(process.nextTick((function(){t(new Error("strictVendor enabled and server is not OpenSSH or compatible version"))})),!0)};var D=function(){if("function"==typeof i.randomFillSync){var e=Buffer.alloc(16);return function(){return i.randomFillSync(e,0,16),e.toString("hex")}}return function(){return i.randomBytes(16).toString("hex")}}();T.Client=T,T.Server=r(72),T.utils=u.utils,T.SFTP_STATUS_CODE=l.STATUS_CODE,T.SFTP_OPEN_MODE=l.OPEN_MODE,T.HTTPAgent=v.SSHTTPAgent,T.HTTPSAgent=v.SSHTTPSAgent,e.exports=T},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,o=r(56),s=o.Buffer,a={};for(i in o)o.hasOwnProperty(i)&&"SlowBuffer"!==i&&"Buffer"!==i&&(a[i]=o[i]);var c=a.Buffer={};for(i in s)s.hasOwnProperty(i)&&"allocUnsafe"!==i&&"allocUnsafeSlow"!==i&&(c[i]=s[i]);if(a.Buffer.prototype=s.prototype,c.from&&c.from!==Uint8Array.from||(c.from=function(e,t,r){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+n(e));if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+n(e));return s(e,t,r)}),c.alloc||(c.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+n(e));if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var i=s(e);return t&&0!==t.length?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i}),!a.kStringMaxLength)try{a.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),e.exports=a},function(e,t,r){var n,i=r(7),o=i.sign,s=i.verify,a=i.createSign,c=i.createVerify,f=i.createDecipheriv,u=i.createHash,h=i.createHmac,l=i.getCiphers(),p=r(14).Ber,d=r(58).pbkdf,g=r(5),y=g.readUInt32BE,m=g.writeUInt32BE,v=r(17),E=v.ALGORITHMS.SUPPORTED_CIPHER,_=v.CIPHER_INFO,b=v.SSH_TO_OPENSSL,w=v.EDDSA_SUPPORTED,S=Symbol("Hash Algorithm"),A=Symbol("Private key PEM"),k=Symbol("Public key PEM"),T=Symbol("Public key SSH"),O=Symbol("Decrypted Key"),B=Object.create(null);!function(){for(var e=Object.keys(_),t=0;t<e.length;++t){var r=b[e[t]];r&&!B[r]&&(B[r]=_[e[t]])}}();var R="function"==typeof String.prototype.trimStart?function(e){return e.trimStart()}:function(e){for(var t=0,r=0;r<e.length;++r){switch(e.charCodeAt(r)){case 32:case 9:case 13:case 10:case 12:++t;continue}break}return 0===t?e:e.slice(t)};function U(e,t){return"-----BEGIN "+e+" KEY-----\n"+(t=t.toString("base64")).replace(/.{64}/g,"$&\n")+(t.length%64?"\n":"")+"-----END "+e+" KEY-----"}function N(e,t){var r=Buffer.allocUnsafe(e.length+t.length);return e.copy(r,0),t.copy(r,e.length),r}function C(e,t){for(var r=e.length,n=e._pos||0,i=0;i<t;++i){var o=r-n;if(n>=r||o<4)return!1;var s=y(e,n);if(o<4+s)return!1;n+=4+s}return e._pos=n,!0}function I(e,t){var r=new p.Writer;return r.startSequence(),r.startSequence(),r.writeOID("1.2.840.113549.1.1.1"),r.writeNull(),r.endSequence(),r.startSequence(p.BitString),r.writeByte(0),r.startSequence(),r.writeBuffer(e,p.Integer),r.writeBuffer(t,p.Integer),r.endSequence(),r.endSequence(),r.endSequence(),U("PUBLIC",r.buffer)}function D(e,t){var r=Buffer.allocUnsafe(15+e.length+4+t.length);m(r,7,0),r.write("ssh-rsa",4,7,"ascii");var n=11;return m(r,t.length,n),t.copy(r,n+=4),m(r,e.length,n+=t.length),e.copy(r,n+4),r}var L=function(){function e(e,t,r,n,i,o,s,a){var c=new p.Writer;return c.startSequence(),c.writeInt(0,p.Integer),c.writeBuffer(e,p.Integer),c.writeBuffer(t,p.Integer),c.writeBuffer(r,p.Integer),c.writeBuffer(n,p.Integer),c.writeBuffer(i,p.Integer),c.writeBuffer(o,p.Integer),c.writeBuffer(s,p.Integer),c.writeBuffer(a,p.Integer),c.endSequence(),c.buffer}try{var t=["return function genOpenSSLRSAPriv(n, e, d, iqmp, p, q) {","  var bn_d = bigIntFromBuffer(d);","  var dmp1 = bigIntToBuffer(bn_d % (bigIntFromBuffer(p) - 1n));","  var dmq1 = bigIntToBuffer(bn_d % (bigIntFromBuffer(q) - 1n));","  return makePEM('RSA PRIVATE', genRSAASN1Buf(n, e, d, p, q, dmp1, dmq1, iqmp));","};"].join("\n");return new Function("bigIntFromBuffer, bigIntToBuffer, makePEM, genRSAASN1Buf",t)((function(e){return BigInt("0x"+e.toString("hex"))}),(function(e){var t=e.toString(16);if(0!=(1&t.length))t="0"+t;else{var r=t.charCodeAt(0);(56===r||r>=97&&r<=102)&&(t="00"+t)}return Buffer.from(t,"hex")}),U,e)}catch(t){return n=r(60),function(t,r,i,o,s,a){var c=new n(s,256),f=new n(a,256),u=new n(i,256),h=u.mod(c.subtract(n.ONE)),l=u.mod(f.subtract(n.ONE));return U("RSA PRIVATE",e(t,r,i,s,a,Buffer.from(h.toByteArray()),Buffer.from(l.toByteArray()),o))}}var n}();function P(e,t,r,n){var i=new p.Writer;return i.startSequence(),i.startSequence(),i.writeOID("1.2.840.10040.4.1"),i.startSequence(),i.writeBuffer(e,p.Integer),i.writeBuffer(t,p.Integer),i.writeBuffer(r,p.Integer),i.endSequence(),i.endSequence(),i.startSequence(p.BitString),i.writeByte(0),i.writeBuffer(n,p.Integer),i.endSequence(),i.endSequence(),U("PUBLIC",i.buffer)}function x(e,t,r,n){var i=Buffer.allocUnsafe(15+e.length+4+t.length+4+r.length+4+n.length);m(i,7,0),i.write("ssh-dss",4,7,"ascii");var o=11;return m(i,e.length,o),e.copy(i,o+=4),m(i,t.length,o+=e.length),t.copy(i,o+=4),m(i,r.length,o+=t.length),r.copy(i,o+=4),m(i,n.length,o+=r.length),n.copy(i,o+4),i}function H(e,t,r,n,i){var o=new p.Writer;return o.startSequence(),o.writeInt(0,p.Integer),o.writeBuffer(e,p.Integer),o.writeBuffer(t,p.Integer),o.writeBuffer(r,p.Integer),o.writeBuffer(n,p.Integer),o.writeBuffer(i,p.Integer),o.endSequence(),U("DSA PRIVATE",o.buffer)}function M(e){var t=new p.Writer;return t.startSequence(),t.startSequence(),t.writeOID("1.3.101.112"),t.endSequence(),t.startSequence(p.BitString),t.writeByte(0),t._ensure(e.length),e.copy(t._buf,t._offset,0,e.length),t._offset+=e.length,t.endSequence(),t.endSequence(),U("PUBLIC",t.buffer)}function K(e){var t=Buffer.allocUnsafe(19+e.length);return m(t,11,0),t.write("ssh-ed25519",4,11,"ascii"),m(t,e.length,15),e.copy(t,19),t}function G(e,t){var r=new p.Writer;return r.startSequence(),r.startSequence(),r.writeOID("1.2.840.10045.2.1"),r.writeOID(e),r.endSequence(),r.startSequence(p.BitString),r.writeByte(0),r._ensure(t.length),t.copy(r._buf,r._offset,0,t.length),r._offset+=t.length,r.endSequence(),r.endSequence(),U("PUBLIC",r.buffer)}function F(e,t){var r;switch(e){case"1.2.840.10045.3.1.7":r="nistp256";break;case"1.3.132.0.34":r="nistp384";break;case"1.3.132.0.35":r="nistp521";break;default:return}var n=Buffer.allocUnsafe(39+t.length);return m(n,19,0),n.write("ecdsa-sha2-"+r,4,19,"ascii"),m(n,8,23),n.write(r,27,8,"ascii"),m(n,t.length,35),t.copy(n,39),n}function q(e,t,r){var n=new p.Writer;return n.startSequence(),n.writeInt(1,p.Integer),n.writeBuffer(r,p.OctetString),n.startSequence(160),n.writeOID(e),n.endSequence(),n.startSequence(161),n.startSequence(p.BitString),n.writeByte(0),n._ensure(t.length),t.copy(n._buf,n._offset,0,t.length),n._offset+=t.length,n.endSequence(),n.endSequence(),n.endSequence(),U("EC PRIVATE",n.buffer)}var j,W={sign:function(){if("function"==typeof o)return function(e){var t=this[A];if(null===t)return new Error("No private key available");try{return o(this[S],e,t)}catch(e){return e}};return function(e){var t=this[A];if(null===t)return new Error("No private key available");var r=a(this[S]);return r.update(e),function(e,t){try{return e.sign(t)}catch(e){return e}}(r,t)}}(),verify:function(){if("function"==typeof s)return function(e,t){var r=this[k];if(null===r)return new Error("No public key available");try{return s(this[S],e,r,t)}catch(e){return e}};return function(e,t){var r=this[k];if(null===r)return new Error("No public key available");var n=c(this[S]);return n.update(e),function(e,t,r){try{return e.verify(t,r)}catch(e){return e}}(n,r,t)}}(),getPrivatePEM:function(){return this[A]},getPublicPEM:function(){return this[k]},getPublicSSH:function(){return this[T]}};function X(e,t,r,n,i,o,s){this.type=e,this.comment=t,this[A]=r,this[k]=n,this[T]=i,this[S]=o,this[O]=s}function V(e,t,r,n,i,o,s){this.type=e,this.comment=t,this[A]=r,this[k]=n,this[T]=i,this[S]=o,this[O]=s}function Q(e,t,r,n,i,o,s){this.type=e,this.comment=t,this[A]=r,this[k]=n,this[T]=i,this[S]=o,this[O]=s}function Y(e,t,i,o){var s;n||(n=r(1));var a=null,c=null;switch(t){case"ssh-rsa":var f=n.readString(e,e._pos);if(!1===f)return new Error("Malformed OpenSSH public key");var u=n.readString(e,e._pos);if(!1===u)return new Error("Malformed OpenSSH public key");a=I(u,f),c=D(u,f),s="sha1";break;case"ssh-dss":var h=n.readString(e,e._pos);if(!1===h)return new Error("Malformed OpenSSH public key");var l=n.readString(e,e._pos);if(!1===l)return new Error("Malformed OpenSSH public key");var p=n.readString(e,e._pos);if(!1===p)return new Error("Malformed OpenSSH public key");var d=n.readString(e,e._pos);if(!1===d)return new Error("Malformed OpenSSH public key");a=P(h,l,p,d),c=x(h,l,p,d),s="sha1";break;case"ssh-ed25519":var g=n.readString(e,e._pos);if(!1===g||32!==g.length)return new Error("Malformed OpenSSH public key");a=M(g),c=K(g),s=null;break;case"ecdsa-sha2-nistp256":s="sha256",oid="1.2.840.10045.3.1.7";case"ecdsa-sha2-nistp384":void 0===s&&(s="sha384",oid="1.3.132.0.34");case"ecdsa-sha2-nistp521":if(void 0===s&&(s="sha512",oid="1.3.132.0.35"),!C(e,1))return new Error("Malformed OpenSSH public key");var y=n.readString(e,e._pos);if(!1===y)return new Error("Malformed OpenSSH public key");a=G(oid,y),c=F(oid,y);break;default:return new Error("Unsupported OpenSSH public key type: "+t)}return new z(o,i,a,c,s)}function z(e,t,r,n,i){this.type=e,this.comment=t,this[A]=null,this[k]=r,this[T]=n,this[S]=i,this[O]=!1}function $(e,t,r,n,i){this.type=e,this.comment=t,this[A]=null,this[k]=r,this[T]=n,this[S]=i,this[O]=!1}X.prototype=W,j=/^-----BEGIN OPENSSH PRIVATE KEY-----(?:\r\n|\n)([\s\S]+)(?:\r\n|\n)-----END OPENSSH PRIVATE KEY-----$/,X.parse=function(e,t){var i,o=j.exec(e);if(null===o)return null;var s=Buffer.from(o[1],"base64");if(s.length<31)return new Error("Malformed OpenSSH private key");var a=s.toString("ascii",0,15);if("openssh-key-v1\0"!==a)return new Error("Unsupported OpenSSH key magic: "+a);n||(n=r(1));var c=n.readString(s,15,"ascii");if(!1===c)return new Error("Malformed OpenSSH private key");if("none"!==c&&-1===E.indexOf(c))return new Error("Unsupported cipher for OpenSSH key: "+c);var u,h,l,g=n.readString(s,s._pos,"ascii");if(!1===g)return new Error("Malformed OpenSSH private key");if("none"!==g){if("none"===c)return new Error("Malformed OpenSSH private key");if("bcrypt"!==g)return new Error("Unsupported kdf name for OpenSSH key: "+g);if(!t)return new Error("Encrypted private OpenSSH key detected, but no passphrase given")}else if("none"!==c)return new Error("Malformed OpenSSH private key");"none"!==c&&(u=_[c]);var m=n.readString(s,s._pos);if(!1===m)return new Error("Malformed OpenSSH private key");if(m.length)switch(g){case"none":return new Error("Malformed OpenSSH private key");case"bcrypt":var v=n.readString(m,0);if(!1===v||m._pos+4>m.length)return new Error("Malformed OpenSSH private key");var S=y(m,m._pos),A=Buffer.allocUnsafe(u.keyLen+u.ivLen);if(0!==d(t,t.length,v,v.length,A,A.length,S))return new Error("Failed to generate information to decrypt key");h=A.slice(0,u.keyLen),l=A.slice(u.keyLen)}else if("none"!==g)return new Error("Malformed OpenSSH private key");var k=n.readInt(s,s._pos);if(!1===k)return new Error("Malformed OpenSSH private key");if(s._pos+=4,k>0){for(var T=0;T<k;++T){var O=n.readString(s,s._pos);if(!1===O)return new Error("Malformed OpenSSH private key");if(!1===n.readString(O,0,"ascii"))return new Error("Malformed OpenSSH private key")}var B=n.readString(s,s._pos);if(!1===B)return new Error("Malformed OpenSSH private key");if(void 0!==h){if(B.length<u.blockLen||B.length%u.blockLen!=0)return new Error("Malformed OpenSSH private key");try{var R={authTagLength:u.authLen},W=f(b[c],h,l,R);if(u.authLen>0){if(s.length-s._pos<u.authLen)return new Error("Malformed OpenSSH private key");W.setAuthTag(s.slice(s._pos,s._pos+=u.authLen))}B=N(W.update(B),W.final())}catch(e){return e}}if(s._pos!==s.length)return new Error("Malformed OpenSSH private key");i=function(e,t,r){var i=[];if(e.length<8)return new Error("Malformed OpenSSH private key");var o,s,a,c,f=y(e,0),u=y(e,4);if(f!==u)return r?new Error("OpenSSH key integrity check failed -- bad passphrase?"):new Error("OpenSSH key integrity check failed");for(e._pos=8,o=0;o<t;++o){var h=void 0,l=void 0,d=void 0,g=void 0,m=n.readString(e,e._pos,"ascii");if(!1===m)return new Error("Malformed OpenSSH private key");switch(m){case"ssh-rsa":var v=n.readString(e,e._pos);if(!1===v)return new Error("Malformed OpenSSH private key");var E=n.readString(e,e._pos);if(!1===E)return new Error("Malformed OpenSSH private key");var _=n.readString(e,e._pos);if(!1===_)return new Error("Malformed OpenSSH private key");var b=n.readString(e,e._pos);if(!1===b)return new Error("Malformed OpenSSH private key");if(!1===(S=n.readString(e,e._pos)))return new Error("Malformed OpenSSH private key");if(!1===(A=n.readString(e,e._pos)))return new Error("Malformed OpenSSH private key");d=I(v,E),g=D(v,E),l=L(v,E,_,b,S,A),h="sha1";break;case"ssh-dss":var S,A;if(!1===(S=n.readString(e,e._pos)))return new Error("Malformed OpenSSH private key");if(!1===(A=n.readString(e,e._pos)))return new Error("Malformed OpenSSH private key");var k=n.readString(e,e._pos);if(!1===k)return new Error("Malformed OpenSSH private key");var T=n.readString(e,e._pos);if(!1===T)return new Error("Malformed OpenSSH private key");var O=n.readString(e,e._pos);if(!1===O)return new Error("Malformed OpenSSH private key");d=P(S,A,k,T),g=x(S,A,k,T),l=H(S,A,k,T,O),h="sha1";break;case"ssh-ed25519":if(!w)return new Error("Unsupported OpenSSH private key type: "+m);var B=n.readString(e,e._pos);if(!1===B||32!==B.length)return new Error("Malformed OpenSSH private key");var R=n.readString(e,e._pos);if(!1===R||64!==R.length)return new Error("Malformed OpenSSH private key");d=M(B),g=K(B),a=R.slice(0,32),c=void 0,(c=new p.Writer).startSequence(),c.writeInt(0,p.Integer),c.startSequence(),c.writeOID("1.3.101.112"),c.endSequence(),c.startSequence(p.OctetString),c.writeBuffer(a,p.OctetString),c.endSequence(),c.endSequence(),l=U("PRIVATE",c.buffer),h=null;break;case"ecdsa-sha2-nistp256":h="sha256",s="1.2.840.10045.3.1.7";case"ecdsa-sha2-nistp384":void 0===h&&(h="sha384",s="1.3.132.0.34");case"ecdsa-sha2-nistp521":if(void 0===h&&(h="sha512",s="1.3.132.0.35"),!C(e,1))return new Error("Malformed OpenSSH private key");var N=n.readString(e,e._pos);if(!1===N)return new Error("Malformed OpenSSH private key");var j=n.readString(e,e._pos);if(!1===j)return new Error("Malformed OpenSSH private key");d=G(s,N),g=F(s,N),l=q(s,N,j);break;default:return new Error("Unsupported OpenSSH private key type: "+m)}var W=n.readString(e,e._pos,"utf8");if(!1===W)return new Error("Malformed OpenSSH private key");i.push(new X(m,W,l,d,g,h,r))}var V=0;for(o=e._pos;o<e.length;++o)if(e[o]!==++V%255)return new Error("Malformed OpenSSH private key");return i}(B,k,void 0!==h)}else i=[];return i},V.prototype=W,function(){var e=/^-----BEGIN (RSA|DSA|EC) PRIVATE KEY-----(?:\r\n|\n)((?:[^:]+:\s*[\S].*(?:\r\n|\n))*)([\s\S]+)(?:\r\n|\n)-----END (RSA|DSA|EC) PRIVATE KEY-----$/;V.parse=function(t,r){var n=e.exec(t);if(null===n)return null;var o,s,a,c,h,d,g=Buffer.from(n[3],"base64"),y=n[2],m=!1;if(void 0!==y){y=y.split(/\r\n|\n/g);for(var v=0;v<y.length;++v){var E=y[v],_=E.indexOf(":");if("DEK-Info"===E.slice(0,_)){var b=E.slice(_+2);if(-1===(_=b.indexOf(",")))continue;var w=b.slice(0,_).toLowerCase();if(-1===l.indexOf(w))return new Error("Cipher ("+w+") not supported for encrypted OpenSSH private key");var S=B[w];if(!S)return new Error("Cipher ("+w+") not supported for encrypted OpenSSH private key");var A=Buffer.from(b.slice(_+1),"hex");if(A.length!==S.ivLen)return new Error("Malformed encrypted OpenSSH private key");if(!r)return new Error("Encrypted OpenSSH private key detected, but no passphrase given");for(var k=u("md5").update(r).update(A.slice(0,8)).digest();k.length<S.keyLen;)k=N(k,u("md5").update(k).update(r).update(A).digest().slice(0,8));k.length>S.keyLen&&(k=k.slice(0,S.keyLen));try{var T=f(w,k,A);T.setAutoPadding(!1),g=N(T.update(g),T.final()),m=!0}catch(e){return e}}}}var O,R,C,L="Malformed OpenSSH private key";switch(m&&(L+=". Bad passphrase?"),n[1]){case"RSA":o="ssh-rsa",s=U("RSA PRIVATE",g);try{(d=new p.Reader(g)).readSequence(),d.readInt();var H=d.readString(p.Integer,!0);if(null===H)return new Error(L);var M=d.readString(p.Integer,!0);if(null===M)return new Error(L);a=I(H,M),c=D(H,M)}catch(e){return new Error(L)}h="sha1";break;case"DSA":o="ssh-dss",s=U("DSA PRIVATE",g);try{(d=new p.Reader(g)).readSequence(),d.readInt();var K=d.readString(p.Integer,!0);if(null===K)return new Error(L);var q=d.readString(p.Integer,!0);if(null===q)return new Error(L);var j=d.readString(p.Integer,!0);if(null===j)return new Error(L);var W=d.readString(p.Integer,!0);if(null===W)return new Error(L);a=P(K,q,j,W),c=x(K,q,j,W)}catch(e){return new Error(L)}h="sha1";break;case"EC":var X,Q;try{(d=new p.Reader(g)).readSequence(),d.readInt(),Q=d.readString(p.OctetString,!0),d.readByte();var Y=d.readLength();if(null===Y)return new Error(L);d._offset=Y;var z=d.readOID();if(null===z)return new Error(L);switch(z){case"1.2.840.10045.3.1.7":X="prime256v1",o="ecdsa-sha2-nistp256",h="sha256";break;case"1.3.132.0.34":X="secp384r1",o="ecdsa-sha2-nistp384",h="sha384";break;case"1.3.132.0.35":X="secp521r1",o="ecdsa-sha2-nistp521",h="sha512";break;default:return new Error("Unsupported private key EC OID: "+z)}}catch(e){return new Error(L)}s=U("EC PRIVATE",g);var $=(O=X,R=Q,(C=i.createECDH(O)).setPrivateKey(R),C.getPublicKey());a=G(z,$),c=F(z,$)}return new V(o,"",s,a,c,h,m)}}(),Q.prototype=W,function(){var e=Buffer.alloc(0),t=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),i=Buffer.from([0,0,0,0]),o=Buffer.from([0,0,0,1]),s=/^PuTTY-User-Key-File-2: (ssh-(?:rsa|dss))\r?\nEncryption: (aes256-cbc|none)\r?\nComment: ([^\r\n]*)\r?\nPublic-Lines: \d+\r?\n([\s\S]+?)\r?\nPrivate-Lines: \d+\r?\n([\s\S]+?)\r?\nPrivate-MAC: ([^\r\n]+)/;Q.parse=function(a,c){var l=s.exec(a);if(null===l)return null;var p=l[2],d="none"!==p;if(d&&!c)return new Error("Encrypted PPK private key detected, but no passphrase given");var g=Buffer.from(l[5],"base64");if(d){var y=_[p],v=N(u("sha1").update(i).update(c).digest(),u("sha1").update(o).update(c).digest());v.length>y.keyLen&&(v=v.slice(0,y.keyLen));try{var E=f(b[p],v,t);E.setAutoPadding(!1),g=N(E.update(g),E.final()),decrypted=!0}catch(e){return e}}var w,S,A,k=l[1],T=l[3],O=Buffer.from(l[4],"base64"),B=l[6],R=k.length,U=p.length,M=Buffer.byteLength(T),K=O.length,G=g.length,F=Buffer.allocUnsafe(4+R+4+U+4+M+4+K+4+G);if(m(F,R,V=0),F.write(k,V+=4,R,"ascii"),m(F,U,V+=R),F.write(p,V+=4,U,"ascii"),m(F,M,V+=U),F.write(T,V+=4,M,"utf8"),m(F,K,V+=M),O.copy(F,V+=4),m(F,G,V+=K),g.copy(F,V+4),c||(c=e),h("sha1",u("sha1").update("putty-private-key-file-mac-key").update(c).digest()).update(F).digest("hex")!==B)return d?new Error("PPK private key integrity check failed -- bad passphrase?"):new Error("PPK private key integrity check failed");switch(n||(n=r(1)),O._pos=0,C(O,1),k){case"ssh-rsa":var q=n.readString(O,O._pos);if(!1===q)return new Error("Malformed PPK public key");var j=n.readString(O,O._pos);if(!1===j)return new Error("Malformed PPK public key");var W=n.readString(g,0);if(!1===W)return new Error("Malformed PPK private key");if(!1===(V=n.readString(g,g._pos)))return new Error("Malformed PPK private key");if(!1===(Y=n.readString(g,g._pos)))return new Error("Malformed PPK private key");var X=n.readString(g,g._pos);if(!1===X)return new Error("Malformed PPK private key");w=I(j,q),S=D(j,q),A=L(j,q,W,X,V,Y);break;case"ssh-dss":var V,Y;if(!1===(V=n.readString(O,O._pos)))return new Error("Malformed PPK public key");if(!1===(Y=n.readString(O,O._pos)))return new Error("Malformed PPK public key");var z=n.readString(O,O._pos);if(!1===z)return new Error("Malformed PPK public key");var $=n.readString(O,O._pos);if(!1===$)return new Error("Malformed PPK public key");var Z=n.readString(g,0);if(!1===Z)return new Error("Malformed PPK private key");w=P(V,Y,z,$),S=x(V,Y,z,$),A=H(V,Y,z,$,Z)}return new Q(k,T,A,w,S,"sha1",d)}}(),z.prototype=W,function(){var e;e=w?/^(((?:ssh-(?:rsa|dss|ed25519))|ecdsa-sha2-nistp(?:256|384|521))(?:-cert-v0[01]@openssh.com)?) ([A-Z0-9a-z\/+=]+)(?:$|\s+([\S].*)?)$/:/^(((?:ssh-(?:rsa|dss))|ecdsa-sha2-nistp(?:256|384|521))(?:-cert-v0[01]@openssh.com)?) ([A-Z0-9a-z\/+=]+)(?:$|\s+([\S].*)?)$/,z.parse=function(t){var i=e.exec(t);if(null===i)return null;n||(n=r(1));var o=i[1],s=i[2],a=Buffer.from(i[3],"base64"),c=i[4]||"",f=n.readString(a,a._pos,"ascii");return!1===f||0!==f.indexOf(s)?new Error("Malformed OpenSSH public key"):Y(a,s,c,o)}}(),$.prototype=W,function(){var e=/^---- BEGIN SSH2 PUBLIC KEY ----(?:\r\n|\n)((?:(?:[\x21-\x7E]+?):(?:(?:.*?\\\r?\n)*.*)(?:\r\n|\n))*)((?:[A-Z0-9a-z\/+=]+(?:\r\n|\n))+)---- END SSH2 PUBLIC KEY ----$/,t=/^([\x21-\x7E]+?):((?:.*?\\\r?\n)*.*)$/gm,i=/\\\r?\n/g;$.parse=function(o){var s=e.exec(o);if(null===s)return null;var a=s[1],c=Buffer.from(s[2],"base64"),f="";if(void 0!==a)for(;s=t.exec(a);)"comment"===s[1].toLowerCase()&&(f=R(s[2].replace(i,""))).length>1&&34===f.charCodeAt(0)&&34===f.charCodeAt(f.length-1)&&(f=f.slice(1,-1));n||(n=r(1));var u=n.readString(c,0,"ascii");if(!1===u)return new Error("Malformed RFC4716 public key");var h=null,l=null;switch(u){case"ssh-rsa":var p=n.readString(c,c._pos);if(!1===p)return new Error("Malformed RFC4716 public key");var d=n.readString(c,c._pos);if(!1===d)return new Error("Malformed RFC4716 public key");h=I(d,p),l=D(d,p);break;case"ssh-dss":var g=n.readString(c,c._pos);if(!1===g)return new Error("Malformed RFC4716 public key");var y=n.readString(c,c._pos);if(!1===y)return new Error("Malformed RFC4716 public key");var m=n.readString(c,c._pos);if(!1===m)return new Error("Malformed RFC4716 public key");var v=n.readString(c,c._pos);if(!1===v)return new Error("Malformed RFC4716 public key");h=P(g,y,m,v),l=x(g,y,m,v);break;default:return new Error("Malformed RFC4716 public key")}return new $(u,f,h,l,"sha1")}}(),e.exports={parseDERKey:function(e,t){return Y(e,t,"",t)},parseKey:function(e,t){if(Buffer.isBuffer(e))e=e.toString("utf8").trim();else{if("string"!=typeof e)return new Error("Key data must be a Buffer or string");e=e.trim()}if(null!=t)if("string"==typeof t)t=Buffer.from(t);else if(!Buffer.isBuffer(t))return new Error("Passphrase must be a string or Buffer when supplied");var r;return null!==(r=X.parse(e,t))||null!==(r=V.parse(e,t))||null!==(r=Q.parse(e,t))||null!==(r=z.parse(e))||null!==(r=$.parse(e))?r:new Error("Unsupported key format")}}},function(e,t,r){var n=r(0).inherits,i=r(4).Duplex,o=r(4).Readable,s=r(4).Writable,a=r(13).constants.CHANNEL_EXTENDED_DATATYPE.STDERR,c=["CHANNEL_EOF","CHANNEL_CLOSE","CHANNEL_DATA","CHANNEL_EXTENDED_DATA","CHANNEL_WINDOW_ADJUST","CHANNEL_SUCCESS","CHANNEL_FAILURE","CHANNEL_REQUEST"],f=c.length;function u(e,t,r){var n={highWaterMark:2097152,allowHalfOpen:!r||r&&!1!==r.allowHalfOpen};this.allowHalfOpen=n.allowHalfOpen,i.call(this,n);var s=this,a=r&&r.server;this.server=a,this.type=e.type,this.subtype=void 0;var u,p,d,g,y,m=this.incoming=e.incoming,v=m.id,E=this.outgoing=e.outgoing,_=this._callbacks=[];this._client=t,this._hasX11=!1;var b=t._channels,w=t._sshstream;function S(){s._waitClientDrain&&(s._waitClientDrain=!1,s._waitWindow||(s._chunk?s._write(s._chunk,null,s._chunkcb):s._chunkcb?s._chunkcb():s._chunkErr?s.stderr._write(s._chunkErr,null,s._chunkcbErr):s._chunkcbErr&&s._chunkcbErr()))}function A(){s.eof(),(a||!a&&!s.allowHalfOpen)&&s.close(),s.writable=!1}function k(){s.readable=!1}t._sock.on("drain",S),w.once("CHANNEL_EOF:"+v,(function(){"open"===m.state&&(m.state="eof",s.readable&&s.push(null),!a&&s.stderr.readable&&s.stderr.push(null))})).once("CHANNEL_CLOSE:"+v,(function(){if("closed"!==m.state){m.state="closed",s.readable&&s.push(null),a&&s.stderr.writable?s.stderr.end():!a&&s.stderr.readable&&s.stderr.push(null),"open"!==E.state&&"eof"!==E.state||s.close(),"closing"===E.state&&(E.state="closed"),delete b[v];var e=s._writableState;t._sock.removeListener("drain",S),e.ending||e.finished||s.end(),s._callbacks=[];for(var r=0;r<_.length;++r)_[r](!0);_=s._callbacks,a?s.readable?s.once("end",(function(){s.emit("close")})):s.emit("close"):(s.readable?s.once("end",(function(){null===u?s.emit("close",u,p,d,g,y):s.emit("close",u)})):null===u?s.emit("close",u,p,d,g,y):s.emit("close",u),s.stderr.readable?s.stderr.once("end",(function(){s.stderr.emit("close")})):s.stderr.emit("close"));for(r=0;r<f;++r)w.removeAllListeners(c[r]+":"+v)}})).on("CHANNEL_DATA:"+v,(function(e){0!==m.window&&(m.window-=e.length,s.push(e)?m.window<=1048576&&h(s):s._waitChanDrain=!0)})).on("CHANNEL_WINDOW_ADJUST:"+v,(function(e){E.window+=e,s._waitWindow&&(s._waitWindow=!1,s._waitClientDrain||(s._chunk?s._write(s._chunk,null,s._chunkcb):s._chunkcb?s._chunkcb():s._chunkErr?s.stderr._write(s._chunkErr,null,s._chunkcbErr):s._chunkcbErr&&s._chunkcbErr()))})).on("CHANNEL_SUCCESS:"+v,(function(){a?(w._kalast=Date.now(),w._kacnt=0):t._resetKA(),_.length&&_.shift()(!1)})).on("CHANNEL_FAILURE:"+v,(function(){a?(w._kalast=Date.now(),w._kacnt=0):t._resetKA(),_.length&&_.shift()(!0)})).on("CHANNEL_REQUEST:"+v,(function(e){if(!a){if("exit-status"===e.request)return void s.emit("exit",u=e.code);if("exit-signal"===e.request)return void s.emit("exit",u=null,p="SIG"+e.signal,d=e.coredump,g=e.description,y=e.lang)}e.wantReply&&w.channelFailure(E.id)})),this.stdin=this.stdout=this,a?this.stderr=new l(this):(this.stderr=new o(n),this.stderr._read=function(e){s._waitChanDrain&&(s._waitChanDrain=!1,m.window<=1048576&&h(s))},w.on("CHANNEL_EXTENDED_DATA:"+v,(function(e,t){0!==m.window&&(m.window-=t.length,s.stderr.push(t)?m.window<=1048576&&h(s):s._waitChanDrain=!0)}))),this._waitClientDrain=!1,this._waitWindow=!1,this._waitChanDrain=!1,this._chunk=void 0,this._chunkcb=void 0,this._chunkErr=void 0,this._chunkcbErr=void 0,this.on("finish",A).on("prefinish",A),this.on("end",k).on("close",k)}function h(e){if("closed"===e.outgoing.state)return!0;var t=2097152-e.incoming.window;return t<=0||(e.incoming.window+=t,e._client._sshstream.channelWindowAdjust(e.outgoing.id,t))}function l(e){s.call(this,{highWaterMark:2097152}),this._channel=e}n(u,i),u.prototype.eof=function(){var e=!0,t=this.outgoing;return"open"===t.state&&(t.state="eof",e=this._client._sshstream.channelEOF(t.id)),e},u.prototype.close=function(){var e=!0,t=this.outgoing;return"open"!==t.state&&"eof"!==t.state||(t.state="closing",e=this._client._sshstream.channelClose(t.id)),e},u.prototype._read=function(e){this._waitChanDrain&&(this._waitChanDrain=!1,this.incoming.window<=1048576&&h(this))},u.prototype._write=function(e,t,r){var n,i,o,s=this._client._sshstream,a=this.outgoing,c=a.packetSize,f=a.id,u=a.window,h=e.length,l=0;if("open"===a.state){for(;h-l>0&&u>0;)if((o=h-l)>u&&(o=u),o>c&&(o=c),n=s.channelData(f,e.slice(l,l+o)),l+=o,u-=o,!n){this._waitClientDrain=!0,this._chunk=void 0,this._chunkcb=r;break}if(a.window=u,h-l>0)return 0===u&&(this._waitWindow=!0),l>0?(i=Buffer.allocUnsafe(h-l),e.copy(i,0,l),this._chunk=i):this._chunk=e,void(this._chunkcb=r);this._waitClientDrain||r()}},u.prototype.destroy=function(){this.end()},u.prototype.setWindow=function(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");return"session"!==this.type||"shell"!==this.subtype&&"exec"!==this.subtype||!this.writable||"open"!==this.outgoing.state||this._client._sshstream.windowChange(this.outgoing.id,e,t,r,n)},u.prototype.signal=function(e){if(this.server)throw new Error("Client-only method called in server mode");return"session"!==this.type||!this.writable||"open"!==this.outgoing.state||this._client._sshstream.signal(this.outgoing.id,e)},u.prototype.exit=function(e,t,r){if(!this.server)throw new Error("Server-only method called in client mode");return"session"!==this.type||!this.writable||"open"!==this.outgoing.state||("number"==typeof e?this._client._sshstream.exitStatus(this.outgoing.id,e):this._client._sshstream.exitSignal(this.outgoing.id,e,t,r))},u.MAX_WINDOW=2097152,u.PACKET_SIZE=32768,n(l,s),l.prototype._write=function(e,t,r){var n,i,o,s=this._channel,c=s._client._sshstream,f=s.outgoing,u=f.packetSize,h=f.id,l=f.window,p=e.length,d=0;if("open"===s.outgoing.state){for(;p-d>0&&l>0;)if((o=p-d)>l&&(o=l),o>u&&(o=u),n=c.channelExtData(h,e.slice(d,d+o),a),d+=o,l-=o,!n){s._waitClientDrain=!0,s._chunkErr=void 0,s._chunkcbErr=r;break}if(f.window=l,p-d>0)return 0===l&&(s._waitWindow=!0),d>0?(i=Buffer.allocUnsafe(p-d),e.copy(i,0,d),s._chunkErr=i):s._chunkErr=e,void(s._chunkcbErr=r);s._waitClientDrain||r()}},e.exports=u},function(e,t,r){var n=r(29).SftpConnection;e.exports=n},function(e,t,r){var n=r(2),i=r(18),o=r(38),s=r(40),a=console.log,c=new(0,r(24).Client),f=0;function u(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.remoteOpts=t,c.on("connect",(function(){a(s.magenta("Begin Connect Server"))})),c.on("ready",(function(){var t=e.remoteOpts,r=t.localPath,f=t.remotePath,u=t.localPathPrefix,h=e;c.sftp((function(e,t){if(e)throw e;c.exec("rm -rf "+f,(function(e,c){if(e)throw e;c.on("data",(function(e){a(s.magenta("STDOUT: "+e))})),c.stderr.on("data",(function(e){a(s.magenta("STDERR: "+e))})),c.on("close",(function(e,c){a(s.magenta("Shell Closed With Code "+e)),t.mkdir(f,(function(e){if(e)throw e;i(r,{dot:!0},(function(r,i){if(e)throw e;bar=new o(":bar Upload-Process => :percent Files-Total-Num => :current",{total:i.length,width:50}),i.forEach((function(e,r){n.stat(e,(function(r,n){if(r)throw r;var o=e.split(u)[1],s=f+o;n.isFile()?t.fastPut(e,s,{},(function(e){if(e)throw e;h.uploadEnd(i)})):n.isDirectory()?t.mkdir(s,(function(e){if(e)throw e;h.uploadEnd(i)})):h.uploadEnd(i)}))}))}))}))}))}))})),a(s.magenta("Connect Server Success"))})),c.on("end",(function(){a(s.magenta("End Server Success"))})),c.on("error",(function(e){a(s.red("err"))}))}u.prototype.upload=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.localPath,r=e.remotePath,n=e.localPathPrefix;Object.assign(this.remoteOpts,{localPath:t,remotePath:r,localPathPrefix:n}),console.log(this.remoteOpts),c.connect(this.remoteOpts)},u.prototype.uploadEnd=function(e){++f,bar.tick(1),bar.complete&&a(s.green.italic("Files Upload Complete")),f===e.length&&c.end()},e.exports={SftpConnection:u}},function(e,t,r){var n=r(6),i="win32"===process.platform,o=r(2),s=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function a(e){return"function"==typeof e?e:function(){var e;if(s){var t=new Error;e=function(e){e&&(t.message=e.message,r(e=t))}}else e=r;return e;function r(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}n.normalize;if(i)var c=/(.*?)(?:[\/\\]+|$)/g;else c=/(.*?)(?:[\/]+|$)/g;if(i)var f=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else f=/^[\/]*/;t.realpathSync=function(e,t){if(e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var r,s,a,u,h=e,l={},p={};function d(){var t=f.exec(e);r=t[0].length,s=t[0],a=t[0],u="",i&&!p[a]&&(o.lstatSync(a),p[a]=!0)}for(d();r<e.length;){c.lastIndex=r;var g=c.exec(e);if(u=s,s+=g[0],a=u+g[1],r=c.lastIndex,!(p[a]||t&&t[a]===a)){var y;if(t&&Object.prototype.hasOwnProperty.call(t,a))y=t[a];else{var m=o.lstatSync(a);if(!m.isSymbolicLink()){p[a]=!0,t&&(t[a]=a);continue}var v=null;if(!i){var E=m.dev.toString(32)+":"+m.ino.toString(32);l.hasOwnProperty(E)&&(v=l[E])}null===v&&(o.statSync(a),v=o.readlinkSync(a)),y=n.resolve(u,v),t&&(t[a]=y),i||(l[E]=v)}e=n.resolve(y,e.slice(r)),d()}}return t&&(t[h]=e),e},t.realpath=function(e,t,r){if("function"!=typeof r&&(r=a(t),t=null),e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(r.bind(null,null,t[e]));var s,u,h,l,p=e,d={},g={};function y(){var t=f.exec(e);s=t[0].length,u=t[0],h=t[0],l="",i&&!g[h]?o.lstat(h,(function(e){if(e)return r(e);g[h]=!0,m()})):process.nextTick(m)}function m(){if(s>=e.length)return t&&(t[p]=e),r(null,e);c.lastIndex=s;var n=c.exec(e);return l=u,u+=n[0],h=l+n[1],s=c.lastIndex,g[h]||t&&t[h]===h?process.nextTick(m):t&&Object.prototype.hasOwnProperty.call(t,h)?_(t[h]):o.lstat(h,v)}function v(e,n){if(e)return r(e);if(!n.isSymbolicLink())return g[h]=!0,t&&(t[h]=h),process.nextTick(m);if(!i){var s=n.dev.toString(32)+":"+n.ino.toString(32);if(d.hasOwnProperty(s))return E(null,d[s],h)}o.stat(h,(function(e){if(e)return r(e);o.readlink(h,(function(e,t){i||(d[s]=t),E(e,t)}))}))}function E(e,i,o){if(e)return r(e);var s=n.resolve(l,i);t&&(t[o]=s),_(s)}function _(t){e=n.resolve(t,e.slice(s)),y()}y()}},function(e,t,r){var n=r(32),i=r(33);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return function e(t,r){var o=[],s=i("{","}",t);if(!s||/\$$/.test(s.pre))return[t];var c,f=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),h=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),y=f||h,m=s.body.indexOf(",")>=0;if(!y&&!m)return s.post.match(/,.*\}/)?(t=s.pre+"{"+s.body+a+s.post,e(t)):[t];if(y)c=s.body.split(/\.\./);else{if(1===(c=function e(t){if(!t)return[""];var r=[],n=i("{","}",t);if(!n)return t.split(",");var o=n.pre,s=n.body,a=n.post,c=o.split(",");c[c.length-1]+="{"+s+"}";var f=e(a);a.length&&(c[c.length-1]+=f.shift(),c.push.apply(c,f));return r.push.apply(r,c),r}(s.body)).length)if(1===(c=e(c[0],!1).map(l)).length)return(_=s.post.length?e(s.post,!1):[""]).map((function(e){return s.pre+c[0]+e}))}var v,E=s.pre,_=s.post.length?e(s.post,!1):[""];if(y){var b=u(c[0]),w=u(c[1]),S=Math.max(c[0].length,c[1].length),A=3==c.length?Math.abs(u(c[2])):1,k=d;w<b&&(A*=-1,k=g);var T=c.some(p);v=[];for(var O=b;k(O,w);O+=A){var B;if(h)"\\"===(B=String.fromCharCode(O))&&(B="");else if(B=String(O),T){var R=S-B.length;if(R>0){var U=new Array(R+1).join("0");B=O<0?"-"+U+B.slice(1):U+B}}v.push(B)}}else v=n(c,(function(t){return e(t,!1)}));for(var N=0;N<v.length;N++)for(var C=0;C<_.length;C++){var I=E+v[N]+_[C];(!r||y||I)&&o.push(I)}return o}(function(e){return e.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(f)}(e),!0).map(h)};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",f="\0PERIOD"+Math.random()+"\0";function u(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function h(e){return e.split(o).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(f).join(".")}function l(e){return"{"+e+"}"}function p(e){return/^-?0\d/.test(e)}function d(e,t){return e<=t}function g(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var n=[],i=0;i<e.length;i++){var o=t(e[i],i);r(o)?n.push.apply(n,o):n.push(o)}return n};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t,r){e instanceof RegExp&&(e=i(e,r)),t instanceof RegExp&&(t=i(t,r));var n=o(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function i(e,t){var r=t.match(e);return r?r[0]:null}function o(e,t,r){var n,i,o,s,a,c=r.indexOf(e),f=r.indexOf(t,c+1),u=c;if(c>=0&&f>0){for(n=[],o=r.length;u>=0&&!a;)u==c?(n.push(u),c=r.indexOf(e,u+1)):1==n.length?a=[n.pop(),f]:((i=n.pop())<o&&(o=i,s=f),f=r.indexOf(t,u+1)),u=c<f&&c>=0?c:f;n.length&&(a=[o,s])}return a}e.exports=n,n.range=o},function(e,t,r){try{var n=r(0);if("function"!=typeof n.inherits)throw"";e.exports=n.inherits}catch(t){e.exports=r(35)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},function(e,t,r){e.exports=d,d.GlobSync=g;var n=r(2),i=r(19),o=r(10),s=(o.Minimatch,r(18).Glob,r(0),r(6)),a=r(9),c=r(11),f=r(20),u=(f.alphasort,f.alphasorti,f.setopts),h=f.ownProp,l=f.childrenIgnored,p=f.isIgnored;function d(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new g(e,t).found}function g(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof g))return new g(e,t);if(u(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}g.prototype._finish=function(){if(a(this instanceof g),this.realpath){var e=this;this.matches.forEach((function(t,r){var n=e.matches[r]=Object.create(null);for(var o in t)try{o=e._makeAbs(o),n[i.realpathSync(o,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;n[e._makeAbs(o)]=!0}}))}f.finish(this)},g.prototype._process=function(e,t,r){a(this instanceof g);for(var n,i=0;"string"==typeof e[i];)i++;switch(i){case e.length:return void this._processSimple(e.join("/"),t);case 0:n=null;break;default:n=e.slice(0,i).join("/")}var s,f=e.slice(i);null===n?s=".":c(n)||c(e.join("/"))?(n&&c(n)||(n="/"+n),s=n):s=n;var u=this._makeAbs(s);l(this,s)||(f[0]===o.GLOBSTAR?this._processGlobStar(n,s,u,f,t,r):this._processReaddir(n,s,u,f,t,r))},g.prototype._processReaddir=function(e,t,r,n,i,o){var a=this._readdir(r,o);if(a){for(var c=n[0],f=!!this.minimatch.negate,u=c._glob,h=this.dot||"."===u.charAt(0),l=[],p=0;p<a.length;p++){if("."!==(y=a[p]).charAt(0)||h)(f&&!e?!y.match(c):y.match(c))&&l.push(y)}var d=l.length;if(0!==d)if(1!==n.length||this.mark||this.stat){n.shift();for(p=0;p<d;p++){var g;y=l[p];g=e?[e,y]:[y],this._process(g.concat(n),i,o)}}else{this.matches[i]||(this.matches[i]=Object.create(null));for(var p=0;p<d;p++){var y=l[p];e&&(y="/"!==e.slice(-1)?e+"/"+y:e+y),"/"!==y.charAt(0)||this.nomount||(y=s.join(this.root,y)),this._emitMatch(i,y)}}}},g.prototype._emitMatch=function(e,t){if(!p(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},g.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r;try{r=n.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var i=r&&r.isSymbolicLink();return this.symlinks[e]=i,i||!r||r.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},g.prototype._readdir=function(e,t){if(t&&!h(this.symlinks,e))return this._readdirInGlobStar(e);if(h(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return null;if(Array.isArray(r))return r}try{return this._readdirEntries(e,n.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},g.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];n="/"===e?e+n:e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t},g.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},g.prototype._processGlobStar=function(e,t,r,n,i,o){var s=this._readdir(r,o);if(s){var a=n.slice(1),c=e?[e]:[],f=c.concat(a);this._process(f,i,!1);var u=s.length;if(!this.symlinks[r]||!o)for(var h=0;h<u;h++){if("."!==s[h].charAt(0)||this.dot){var l=c.concat(s[h],a);this._process(l,i,!0);var p=c.concat(s[h],n);this._process(p,i,!0)}}}},g.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),r){if(e&&c(e)&&!this.nomount){var n=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),n&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},g.prototype._stat=function(e){var t=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&h(this.cache,t)){var i=this.cache[t];if(Array.isArray(i)&&(i="DIR"),!r||"DIR"===i)return i;if(r&&"FILE"===i)return!1}var o=this.statCache[t];if(!o){var s;try{s=n.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{o=n.statSync(t)}catch(e){o=s}else o=s}this.statCache[t]=o;i=!0;return o&&(i=o.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||i,(!r||"FILE"!==i)&&i},g.prototype._mark=function(e){return f.mark(this,e)},g.prototype._makeAbs=function(e){return f.makeAbs(this,e)}},function(e,t,r){var n=r(21),i=Object.create(null),o=r(22);function s(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}e.exports=n((function(e,t){return i[e]?(i[e].push(t),null):(i[e]=[t],function(e){return o((function t(){var r=i[e],n=r.length,o=s(arguments);try{for(var a=0;a<n;a++)r[a].apply(null,o)}finally{r.length>n?(r.splice(0,n),process.nextTick((function(){t.apply(null,o)}))):delete i[e]}}))}(e))}))},function(e,t,r){e.exports=r(39)},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 * node-progress
 * Copyright(c) 2011 TJ Holowaychuk <tj@vision-media.ca>
 * MIT Licensed
 */function n(e,t){if(this.stream=t.stream||process.stderr,"number"==typeof t){var r=t;(t={}).total=r}else{if(t=t||{},"string"!=typeof e)throw new Error("format required");if("number"!=typeof t.total)throw new Error("total required")}this.fmt=e,this.curr=t.curr||0,this.total=t.total,this.width=t.width||this.total,this.clear=t.clear,this.chars={complete:t.complete||"=",incomplete:t.incomplete||"-",head:t.head||t.complete||"="},this.renderThrottle=0!==t.renderThrottle?t.renderThrottle||16:0,this.lastRender=-1/0,this.callback=t.callback||function(){},this.tokens={},this.lastDraw=""}e.exports=n,n.prototype.tick=function(e,t){if(0!==e&&(e=e||1),"object"==r(e)&&(t=e,e=1),t&&(this.tokens=t),0==this.curr&&(this.start=new Date),this.curr+=e,this.render(),this.curr>=this.total)return this.render(void 0,!0),this.complete=!0,this.terminate(),void this.callback(this)},n.prototype.render=function(e,t){if(t=void 0!==t&&t,e&&(this.tokens=e),this.stream.isTTY){var r=Date.now(),n=r-this.lastRender;if(t||!(n<this.renderThrottle)){this.lastRender=r;var i=this.curr/this.total;i=Math.min(Math.max(i,0),1);var o,s,a,c=Math.floor(100*i),f=new Date-this.start,u=100==c?0:f*(this.total/this.curr-1),h=this.curr/(f/1e3),l=this.fmt.replace(":current",this.curr).replace(":total",this.total).replace(":elapsed",isNaN(f)?"0.0":(f/1e3).toFixed(1)).replace(":eta",isNaN(u)||!isFinite(u)?"0.0":(u/1e3).toFixed(1)).replace(":percent",c.toFixed(0)+"%").replace(":rate",Math.round(h)),p=Math.max(0,this.stream.columns-l.replace(":bar","").length);p&&"win32"===process.platform&&(p-=1);var d=Math.min(this.width,p);if(a=Math.round(d*i),s=Array(Math.max(0,a+1)).join(this.chars.complete),o=Array(Math.max(0,d-a+1)).join(this.chars.incomplete),a>0&&(s=s.slice(0,-1)+this.chars.head),l=l.replace(":bar",s+o),this.tokens)for(var g in this.tokens)l=l.replace(":"+g,this.tokens[g]);this.lastDraw!==l&&(this.stream.cursorTo(0),this.stream.write(l),this.stream.clearLine(1),this.lastDraw=l)}}},n.prototype.update=function(e,t){var r=Math.floor(e*this.total)-this.curr;this.tick(r,t)},n.prototype.interrupt=function(e){this.stream.clearLine(),this.stream.cursorTo(0),this.stream.write(e),this.stream.write("\n"),this.stream.write(this.lastDraw)},n.prototype.terminate=function(){this.clear?this.stream.clearLine&&(this.stream.clearLine(),this.stream.cursorTo(0)):this.stream.write("\n")}},function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=r(41),f=r(46),u=f.stdout,h=f.stderr,l=r(50),p=l.stringReplaceAll,d=l.stringEncaseCRLFWithFirstIndex,g=Array.isArray,y=["ansi","ansi","ansi256","ansi16m"],m=Object.create(null),v=function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(t)},E=function(e){var t={};return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");var r=u?u.level:0;e.level=void 0===t.level?r:t.level}(t,e),t.template=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return P.apply(void 0,[t.template].concat(r))},Object.setPrototypeOf(t,_.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=function(){throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},t.template.Instance=v,t.template};function _(e){return E(e)}for(var b=function(){var e=s(S[w],2),t=e[0],r=e[1];m[t]={get:function(){var e=D(this,I(r.open,r.close,this._styler),this._isEmpty);return Object.defineProperty(this,t,{value:e}),e}}},w=0,S=Object.entries(c);w<S.length;w++)b();m.visible={get:function(){var e=D(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:e}),e}};for(var A=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"],k=function(){var e=O[T];m[e]={get:function(){var t=this.level;return function(){var r,n=I((r=c.color[y[t]])[e].apply(r,arguments),c.color.close,this._styler);return D(this,n,this._isEmpty)}}}},T=0,O=A;T<O.length;T++)k();for(var B=function(){var e=U[R],t="bg"+e[0].toUpperCase()+e.slice(1);m[t]={get:function(){var t=this.level;return function(){var r,n=I((r=c.bgColor[y[t]])[e].apply(r,arguments),c.bgColor.close,this._styler);return D(this,n,this._isEmpty)}}}},R=0,U=A;R<U.length;R++)B();var N,C=Object.defineProperties((function(){}),i(i({},m),{},{level:{enumerable:!0,get:function(){return this._generator.level},set:function(e){this._generator.level=e}}})),I=function(e,t,r){var n,i;return void 0===r?(n=e,i=t):(n=r.openAll+e,i=t+r.closeAll),{open:e,close:t,openAll:n,closeAll:i,parent:r}},D=function(e,t,r){var n=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(r[0])&&g(r[0].raw)?L(e,P.apply(void 0,[e].concat(r))):L(e,1===r.length?""+r[0]:r.join(" "))};return Object.setPrototypeOf(n,C),n._generator=e,n._styler=t,n._isEmpty=r,n},L=function(e,t){if(e.level<=0||!t)return e._isEmpty?"":t;var r=e._styler;if(void 0===r)return t;var n=r,i=n.openAll,o=n.closeAll;if(-1!==t.indexOf(""))for(;void 0!==r;)t=p(t,r.close,r.open),r=r.parent;var s=t.indexOf("\n");return-1!==s&&(t=d(t,o,i,s)),i+t+o},P=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=n[0];if(!g(o)||!g(o.raw))return n.join(" ");for(var s=n.slice(1),a=[o.raw[0]],c=1;c<o.length;c++)a.push(String(s[c-1]).replace(/[{}\\]/g,"\\$&"),String(o.raw[c]));return void 0===N&&(N=r(51)),N(e,a.join(""))};Object.defineProperties(_.prototype,m);var x=_();x.supportsColor=u,x.stderr=_({level:h?h.level:0}),x.stderr.supportsColor=h,e.exports=x},function(e,t,r){"use strict";(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o,s=function(e,t){return function(){var r=e.apply(void 0,arguments);return"[".concat(r+t,"m")}},a=function(e,t){return function(){var r=e.apply(void 0,arguments);return"[".concat(38+t,";5;").concat(r,"m")}},c=function(e,t){return function(){var r=e.apply(void 0,arguments);return"[".concat(38+t,";2;").concat(r[0],";").concat(r[1],";").concat(r[2],"m")}},f=function(e){return e},u=function(e,t,r){return[e,t,r]},h=function(e,t,r){Object.defineProperty(e,t,{get:function(){var n=r();return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0}),n},enumerable:!0,configurable:!0})},l=function(e,i,s,a){void 0===o&&(o=r(43));for(var c=a?10:0,f={},u=0,h=Object.entries(o);u<h.length;u++){var l=n(h[u],2),p=l[0],d=l[1],g="ansi16"===p?"ansi":p;p===i?f[g]=e(s,c):"object"===t(d)&&(f[g]=e(d[i],c))}return f};Object.defineProperty(e,"exports",{enumerable:!0,get:function(){var e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(var r=0,i=Object.entries(t);r<i.length;r++){for(var o=n(i[r],2),p=o[0],d=o[1],g=0,y=Object.entries(d);g<y.length;g++){var m=n(y[g],2),v=m[0],E=m[1];t[v]={open:"[".concat(E[0],"m"),close:"[".concat(E[1],"m")},d[v]=t[v],e.set(E[0],E[1])}Object.defineProperty(t,p,{value:d,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="[39m",t.bgColor.close="[49m",h(t.color,"ansi",(function(){return l(s,"ansi16",f,!1)})),h(t.color,"ansi256",(function(){return l(a,"ansi256",f,!1)})),h(t.color,"ansi16m",(function(){return l(c,"rgb",u,!1)})),h(t.bgColor,"ansi",(function(){return l(s,"ansi16",f,!0)})),h(t.bgColor,"ansi256",(function(){return l(a,"ansi256",f,!0)})),h(t.bgColor,"ansi16m",(function(){return l(c,"rgb",u,!0)})),t}})}).call(this,r(42)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(23),o=r(45),s={};Object.keys(i).forEach((function(e){s[e]={},Object.defineProperty(s[e],"channels",{value:i[e].channels}),Object.defineProperty(s[e],"labels",{value:i[e].labels});var t=o(e);Object.keys(t).forEach((function(r){var i=t[r];s[e][r]=function(e){var t=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=r[0];if(null==o)return o;o.length>1&&(r=o);var s=e(r);if("object"===n(s))for(var a=s.length,c=0;c<a;c++)s[c]=Math.round(s[c]);return s};return"conversion"in e&&(t.conversion=e.conversion),t}(i),s[e][r].raw=function(e){var t=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];return null==i?i:(i.length>1&&(r=i),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}(i)}))})),e.exports=s},function(e,t,r){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,r){var n=r(23);function i(e){var t=function(){for(var e={},t=Object.keys(n),r=t.length,i=0;i<r;i++)e[t[i]]={distance:-1,parent:null};return e}(),r=[e];for(t[e].distance=0;r.length;)for(var i=r.pop(),o=Object.keys(n[i]),s=o.length,a=0;a<s;a++){var c=o[a],f=t[c];-1===f.distance&&(f.distance=t[i].distance+1,f.parent=i,r.unshift(c))}return t}function o(e,t){return function(r){return t(e(r))}}function s(e,t){for(var r=[t[e].parent,e],i=n[t[e].parent][e],s=t[e].parent;t[s].parent;)r.unshift(t[s].parent),i=o(n[t[s].parent][s],i),s=t[s].parent;return i.conversion=r,i}e.exports=function(e){for(var t=i(e),r={},n=Object.keys(t),o=n.length,a=0;a<o;a++){var c=n[a];null!==t[c].parent&&(r[c]=s(c,t))}return r}},function(e,t,r){"use strict";var n,i=r(47),o=r(48),s=r(49),a=process.env;function c(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function f(e,t){if(0===n)return 0;if(s("color=16m")||s("color=full")||s("color=truecolor"))return 3;if(s("color=256"))return 2;if(e&&!t&&void 0===n)return 0;var r=n||0;if("dumb"===a.TERM)return r;if("win32"===process.platform){var o=i.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in a)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((function(e){return e in a}))||"codeship"===a.CI_NAME?1:r;if("TEAMCITY_VERSION"in a)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(a.TEAMCITY_VERSION)?1:0;if("truecolor"===a.COLORTERM)return 3;if("TERM_PROGRAM"in a){var c=parseInt((a.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(a.TERM_PROGRAM){case"iTerm.app":return c>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(a.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(a.TERM)||"COLORTERM"in a?1:r}s("no-color")||s("no-colors")||s("color=false")||s("color=never")?n=0:(s("color")||s("colors")||s("color=true")||s("color=always"))&&(n=1),"FORCE_COLOR"in a&&(n="true"===a.FORCE_COLOR?1:"false"===a.FORCE_COLOR?0:0===a.FORCE_COLOR.length?1:Math.min(parseInt(a.FORCE_COLOR,10),3)),e.exports={supportsColor:function(e){return c(f(e,e&&e.isTTY))},stdout:c(f(!0,o.isatty(1))),stderr:c(f(!0,o.isatty(2)))}},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("tty")},function(e,t,r){"use strict";e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:process.argv,r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return-1!==n&&(-1===i||n<i)}},function(e,t,r){"use strict";e.exports={stringReplaceAll:function(e,t,r){var n=e.indexOf(t);if(-1===n)return e;var i=t.length,o=0,s="";do{s+=e.substr(o,n-o)+t+r,o=n+i,n=e.indexOf(t,o)}while(-1!==n);return s+=e.substr(o)},stringEncaseCRLFWithFirstIndex:function(e,t,r,n){var i=0,o="";do{var s="\r"===e[n-1];o+=e.substr(i,(s?n-1:n)-i)+t+(s?"\r\n":"\n")+r,i=n+1,n=e.indexOf("\n",i)}while(-1!==n);return o+=e.substr(i)}}},function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw o}}}}function s(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,f=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,u=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,h=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,l=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function p(e){var t="u"===e[0],r="{"===e[1];return t&&!r&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):t&&r?String.fromCodePoint(parseInt(e.slice(2,-1),16)):l.get(e)||e}function d(e,t){var r,n,i=[],s=o(t.trim().split(/\s*,\s*/g));try{for(s.s();!(n=s.n()).done;){var a=n.value,c=Number(a);if(Number.isNaN(c)){if(!(r=a.match(u)))throw new Error("Invalid Chalk template style argument: ".concat(a," (in style '").concat(e,"')"));i.push(r[2].replace(h,(function(e,t,r){return t?p(t):r})))}else i.push(c)}}catch(e){s.e(e)}finally{s.f()}return i}function g(e){f.lastIndex=0;for(var t,r=[];null!==(t=f.exec(e));){var n=t[1];if(t[2]){var i=d(n,t[2]);r.push([n].concat(i))}else r.push([n])}return r}function y(e,t){var r,s={},a=o(t);try{for(a.s();!(r=a.n()).done;){var c,f=r.value,u=o(f.styles);try{for(u.s();!(c=u.n()).done;){var h=c.value;s[h[0]]=f.inverse?null:h.slice(1)}}catch(e){u.e(e)}finally{u.f()}}}catch(e){a.e(e)}finally{a.f()}for(var l=e,p=0,d=Object.entries(s);p<d.length;p++){var g,y=i(d[p],2),m=y[0],v=y[1];if(Array.isArray(v)){if(!(m in l))throw new Error("Unknown Chalk style: ".concat(m));l=v.length>0?(g=l)[m].apply(g,n(v)):l[m]}}return l}e.exports=function(e,t){var r=[],n=[],i=[];if(t.replace(c,(function(t,o,s,a,c,f){if(o)i.push(p(o));else if(a){var u=i.join("");i=[],n.push(0===r.length?u:y(e,r)(u)),r.push({inverse:s,styles:g(a)})}else if(c){if(0===r.length)throw new Error("Found extraneous } in Chalk template literal");n.push(y(e,r)(i.join(""))),i=[],r.pop()}else i.push(f)})),n.push(i.join("")),r.length>0){var o="Chalk template literal is missing ".concat(r.length," closing bracket").concat(1===r.length?"":"s"," (`}`)");throw new Error(o)}return n.join("")}},function(e,t){e.exports=require("dns")},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(4).Transform,o=r(4).Readable,s=r(4).Writable,a=r(2).constants||process.binding("constants"),c=r(0),f=c.inherits,u=c.isDate,h=r(3).EventEmitter.listenerCount,l=r(2),p=r(1).readString,d=r(1).readInt,g=r(5).readUInt32BE,y=r(5).writeUInt32BE,m=1,v=2,E=4,_=8,b=2147483648,w={OK:0,EOF:1,NO_SUCH_FILE:2,PERMISSION_DENIED:3,FAILURE:4,BAD_MESSAGE:5,NO_CONNECTION:6,CONNECTION_LOST:7,OP_UNSUPPORTED:8};Object.keys(w).forEach((function(e){w[w[e]]=e}));var S={0:"No error",1:"End of file",2:"No such file or directory",3:"Permission denied",4:"Failure",5:"Bad message",6:"No connection",7:"Connection lost",8:"Operation unsupported"};C.STATUS_CODE=w;var A={INIT:1,OPEN:3,CLOSE:4,READ:5,WRITE:6,LSTAT:7,FSTAT:8,SETSTAT:9,FSETSTAT:10,OPENDIR:11,READDIR:12,REMOVE:13,MKDIR:14,RMDIR:15,REALPATH:16,STAT:17,RENAME:18,READLINK:19,SYMLINK:20,EXTENDED:200};Object.keys(A).forEach((function(e){A[A[e]]=e}));var k={VERSION:2,STATUS:101,HANDLE:102,DATA:103,NAME:104,ATTRS:105,EXTENDED:201};Object.keys(k).forEach((function(e){k[k[e]]=e}));var T={READ:1,WRITE:2,APPEND:4,CREAT:8,TRUNC:16,EXCL:32};C.OPEN_MODE=T;var O=Math.pow(2,32)-1,B=Buffer.from([0,0,0,5,A.INIT,0,0,0,3]),R=Buffer.from([0,0,0,5,k.VERSION,0,0,0,3]),U=/^SSH-2.0-(?:OpenSSH|dropbear)/;function N(e){}function C(e,t){"string"!=typeof e||t||(t=e,e=void 0),"object"===n(e)&&e||(e={}),i.call(this,{highWaterMark:"number"==typeof e.highWaterMark?e.highWaterMark:32768}),this.debug="function"==typeof e.debug?e.debug:N,this.server=!!e.server,this._isOpenSSH=t&&U.test(t),this._needContinue=!1,this._state={status:"packet_header",writeReqid:-1,pktLeft:void 0,pktHdrBuf:Buffer.allocUnsafe(9),pktBuf:void 0,pktType:void 0,version:void 0,extensions:{},maxDataLen:this._isOpenSSH?260096:32768,requests:{}};var r=this;function o(){r.writable=!1,r._cleanup(!1)}this.on("end",(function(){r.readable=!1})).on("finish",o).on("prefinish",o),this.server||this.push(B)}function I(e,t,r,i,o,s){var a,c,f,u,h=64,p=32768;"function"==typeof o?s=o:"object"===n(o)&&null!==o&&("number"==typeof o.concurrency&&o.concurrency>0&&!isNaN(o.concurrency)&&(h=o.concurrency),"number"==typeof o.chunkSize&&o.chunkSize>0&&!isNaN(o.chunkSize)&&(p=o.chunkSize),"number"==typeof o.fileSize&&o.fileSize>0&&!isNaN(o.fileSize)&&(f=o.fileSize),"function"==typeof o.step&&(a=o.step),"string"!=typeof o.mode&&"number"!=typeof o.mode||(c=M(o.mode)));var d,g,y,m=0,v=0,E=!1,_=p*h;function b(r){if(!E){E=!0;var n,i=0;d||g?(n=function(){0==--i&&s(r)},d&&(e===l||e.writable)&&++i,g&&(t===l||t.writable)&&++i,d&&(e===l||e.writable)&&e.close(d,n),g&&(t===l||t.writable)&&t.close(g,n)):s(r)}}e.open(r,"r",(function(n,o){if(n)return b(n);function E(n,o){if(n)return e!==l?void e.stat(r,(function(e,t){if(e)return b(n);E(null,t)})):b(n);u=o.size,t.open(i,"w",(function(r,n){if(r)return b(r);if(g=n,u<=0)return b();for(;_>u;){if(1===h){_=u;break}_-=p,--h}if((y=function(e){try{return Buffer.allocUnsafe(e)}catch(e){return e}}(_))instanceof Error)return b(y);function o(r,n,i,o,c,f){if(r)return b(r);function h(r){if(r)return b(r);if(v+=n,a&&a(v,n,u),n<f)return E(c,o+n,f-n);if(v!==u){if(!(m>=u)){var i=m+p>u?u-m:p;E(c,m,i),m+=i}}else t.close(g,(function(t){if(g=void 0,t)return b(t);e.close(d,(function(e){if(d=void 0,e)return b(e);s()}))}))}c=c||0,e===l?t.writeData(g,y,c,n,o,h):t.write(g,y,c,n,o,h)}function f(e,t,r){return function(n,i,s){o(n,i,0,t,e,r)}}function E(t,r,n){e===l?e.read(d,y,t,n,r,f(t,r,n)):e.readData(d,y,t,n,r,f(t,r,n))}function w(){for(var e=0,t=0;m<u&&e<h;){var r=m+p>u?u-m:p;E(t,m,r),t+=r,m+=r,++e}}void 0!==c?t.fchmod(g,c,(function e(r){r?t.chmod(i,c,(function(t){e()})):w()})):w()}))}d=o,void 0===f?e.fstat(d,E):E(null,{size:f})}))}function D(e,t,r,n,i,o,s){var a="function"==typeof s?s:void 0;e.writeData(t,r,n,i,o,(function(s,c){if(s)return e.close(t,(function(){a&&a(s)}));c===i?e.close(t,a):D(e,t,r,n+=c,i-=c,o+=c,a)}))}function L(e,t,r,n){var i=g(e,t),o=new q;if(t+=4,i&m){var s=P(e,t,r,n);if(!1===s)return!1;o.size=s,t+=8}if(i&v){var a,c;if(!1===(a=d(e,t,this,n)))return!1;if(o.uid=a,!1===(c=d(e,t+=4,this,n)))return!1;o.gid=c,t+=4}if(i&E){var f=d(e,t,this,n);if(!1===f)return!1;o.mode=f,o.permissions=f,t+=4}if(i&_){var u,h;if(!1===(u=d(e,t,this,n)))return!1;if(o.atime=u,!1===(h=d(e,t+=4,this,n)))return!1;o.mtime=h,t+=4}if(i&b){var l=d(e,t,this,n);if(!1===l)return!1;t+=4;for(var p,y=0;y<l;++y){if(!1===(p=d(e,t,this,n)))return!1;t+=4+p}}return e._pos=t,o}function P(e,t,r,n){if(e.length-t<8)return r&&r._cleanup(n),!1;for(var i=0,o=t+8;t<o;++t)i*=256,i+=e[t];return e._pos=t,i}function x(e){var t=0,r=0,i=[],o=0;if("object"!==n(e)||null===e)return{flags:t,nbytes:r,bytes:i};if("number"==typeof e.size){t|=m,r+=8;var s=new Array(8),a=e.size;for(o=7;o>=0;--o)s[o]=255&a,a/=256;i.push(s)}if("number"==typeof e.uid&&"number"==typeof e.gid&&(t|=v,r+=8,i.push([e.uid>>24&255,e.uid>>16&255,e.uid>>8&255,255&e.uid]),i.push([e.gid>>24&255,e.gid>>16&255,e.gid>>8&255,255&e.gid])),"number"==typeof e.permissions||"string"==typeof e.permissions||"number"==typeof e.mode||"string"==typeof e.mode){var c=M(e.mode||e.permissions);t|=E,r+=4,i.push([c>>24&255,c>>16&255,c>>8&255,255&c])}if(("number"==typeof e.atime||u(e.atime))&&("number"==typeof e.mtime||u(e.mtime))){var f=H(e.atime),h=H(e.mtime);t|=_,r+=8,i.push([f>>24&255,f>>16&255,f>>8&255,255&f]),i.push([h>>24&255,h>>16&255,h>>8&255,255&h])}return{flags:t,nbytes:r,bytes:i}}function H(e){if("number"==typeof e&&!isNaN(e))return e;if(u(e))return parseInt(e.getTime()/1e3,10);throw new Error("Cannot parse time: "+e)}function M(e){if("number"==typeof e&&!isNaN(e))return e;if("string"==typeof e)return M(parseInt(e,8));throw new Error("Cannot parse mode: "+e)}f(C,i),C.prototype.__read=i.prototype._read,C.prototype._read=function(e){return this._needContinue&&(this._needContinue=!1,this.emit("continue")),this.__read(e)},C.prototype.__push=i.prototype.push,C.prototype.push=function(e,t){if(!this.readable)return!1;null===e&&(this.readable=!1);var r=this.__push(e,t);return this._needContinue=!1===r,r},C.prototype._cleanup=function(e){var t=this._state;t.pktBuf=void 0;var r=t.requests,n=Object.keys(r),i=n.length;if(i){if(this.readable)for(var o,s=new Error("SFTP session ended early"),a=0;a<i;++a)(o=r[n[a]].cb)&&o(s);t.requests={}}this.readable&&this.push(null),this._readableState.endEmitted||this._readableState.flowing||this.resume(),!1!==e&&(this.debug("DEBUG[SFTP]: Parser: Malformed packet"),e&&e(new Error("Malformed packet")))},C.prototype._transform=function(e,t,r){for(var n,i,o,s=this._state,a=this.server,c=s.status,f=s.pktType,u=s.pktBuf,l=s.pktLeft,m=s.version,v=s.pktHdrBuf,E=s.requests,_=this.debug,b=e.length,T=0;;){if("discard"===c){if(!(l<=(i=b-T))){l-=i;break}T+=l,l=0,c="packet_header",n=u=void 0}else{if(void 0!==u){if(l<=(i=b-T)){e.copy(u,u.length-l,T,T+l),T+=l,l=0,n=u,u=void 0;continue}e.copy(u,u.length-l,T),l-=i;break}if("packet_header"===c)if(n){if(l=g(n,4)-1,f=n[8],a){if(void 0===m&&f!==A.INIT)return _("DEBUG[SFTP]: Parser: Unexpected packet before init"),this._cleanup(!1),r(new Error("Unexpected packet before init"));if(void 0!==m&&f===A.INIT)_("DEBUG[SFTP]: Parser: Unexpected duplicate init"),c="bad_pkt";else{if(l>34e3)return _("DEBUG[SFTP]: Parser: "+(V="Packet length ("+l+") exceeds max length (34000)")),this._cleanup(!1),r(new Error(V));f===A.EXTENDED?c="bad_pkt":void 0===A[f]&&(_("DEBUG[SFTP]: Parser: Unsupported packet type: "+f),c="discard")}}else{if(void 0===m&&f!==k.VERSION)return _("DEBUG[SFTP]: Parser: Unexpected packet before version"),this._cleanup(!1),r(new Error("Unexpected packet before version"));void 0!==m&&f===k.VERSION?(_("DEBUG[SFTP]: Parser: Unexpected duplicate version"),c="bad_pkt"):void 0===k[f]&&(c="discard")}"bad_pkt"===c?(y(v,l+1,0),v[4]=f,l=4,u=v):(u=Buffer.allocUnsafe(l),c="payload")}else l=5,u=v;else if("payload"===c){if(f===k.VERSION||f===A.INIT){if(!1===(m=s.version=d(n,0,this,r)))return;if(m<3)return this._cleanup(!1),r(new Error("Incompatible SFTP version: "+m));a&&this.push(R);var O,B,U=n.length;for(n._pos=4;n._pos<U;){if(!1===(O=p(n,n._pos,"ascii",this,r)))return;if(!1===(B=p(n,n._pos,"ascii",this,r)))return;s.extensions[O]?s.extensions[O].push(B):s.extensions[O]=[B]}this.emit("ready")}else{if(!1===(o=d(n,0,this,r)))return;var N,C,I,D;if(a){var x,H,M=A[f];if(_("DEBUG[SFTP]: Parser: Request: "+M),h(this,M)){if(f===A.OPEN){if(!1===(N=p(n,4,"utf8",this,r)))return;var K=d(n,n._pos,this,r);if(!1===K)return;if(!1===(C=L(n,n._pos+4,this,r)))return;this.emit(M,o,N,K,C)}else if(f===A.CLOSE||f===A.FSTAT||f===A.READDIR){if(!1===(I=p(n,4,this,r)))return;this.emit(M,o,I)}else if(f===A.READ){if(!1===(I=p(n,4,this,r)))return;if(!1===(x=P(n,n._pos,this,r)))return;var G=d(n,n._pos,this,r);if(!1===G)return;this.emit(M,o,I,x,G)}else if(f===A.WRITE){if(!1===(I=p(n,4,this,r)))return;if(!1===(x=P(n,n._pos,this,r)))return;if(!1===(D=p(n,n._pos,this,r)))return;this.emit(M,o,I,x,D)}else if(f===A.LSTAT||f===A.STAT||f===A.OPENDIR||f===A.REMOVE||f===A.RMDIR||f===A.REALPATH||f===A.READLINK){if(!1===(H=p(n,4,"utf8",this,r)))return;this.emit(M,o,H)}else if(f===A.SETSTAT||f===A.MKDIR){if(!1===(H=p(n,4,"utf8",this,r)))return;if(!1===(C=L(n,n._pos,this,r)))return;this.emit(M,o,H,C)}else if(f===A.FSETSTAT){if(!1===(I=p(n,4,this,r)))return;if(!1===(C=L(n,n._pos,this,r)))return;this.emit(M,o,I,C)}else if(f===A.RENAME||f===A.SYMLINK){var F,q;if(!1===(F=p(n,4,"utf8",this,r)))return;if(!1===(q=p(n,n._pos,"utf8",this,r)))return;f===A.SYMLINK&&this._isOpenSSH?this.emit(M,o,q,F):this.emit(M,o,F,q)}}else this.status(o,w.OP_UNSUPPORTED)}else{var j=E[o],W=j&&j.cb;if(_("DEBUG[SFTP]: Parser: Response: "+k[f]),j&&W)if(f===k.STATUS){var X=d(n,4,this,r);if(!1===X)return;if(X===w.OK)W();else{var V,Q="";if(n.length>=12){if(!1===(V=p(n,8,"utf8",this,r)))return;if(n._pos+4<n.length&&!1===(Q=p(n,n._pos,"ascii",this,r)))return}var Y=new Error(V||S[X]||"Unknown status");Y.code=X,Y.lang=Q,W(Y)}}else if(f===k.HANDLE){if(!1===(I=p(n,4,this,r)))return;W(void 0,I)}else if(f===k.DATA)if(j.buffer){var z=d(n,4,this,r);if(!1===z)return;var $=j.buffer.length;if(z>$&&y(n,$,4),!1===(D=p(n,4,j.buffer,this,r)))return;W(void 0,D,z)}else{if(!1===(D=p(n,4,this,r)))return;W(void 0,D)}else if(f===k.NAME){var Z=d(n,4,this,r);if(!1===Z)return;var J,ee=[];n._pos=8;for(var te=0;te<Z;++te){if(!1===(N=p(n,n._pos,"utf8",this,r)))return;if(!1===(J=p(n,n._pos,"utf8",this,r)))return;if(!1===(C=L(n,n._pos,this,r)))return;ee.push({filename:N,longname:J,attrs:C})}W(void 0,ee)}else if(f===k.ATTRS){if(!1===(C=L(n,4,this,r)))return;W(void 0,C)}else if(f===k.EXTENDED){if(j.extended)switch(j.extended){case"statvfs@openssh.com":case"fstatvfs@openssh.com":var re={f_bsize:void 0,f_frsize:void 0,f_blocks:void 0,f_bfree:void 0,f_bavail:void 0,f_files:void 0,f_ffree:void 0,f_favail:void 0,f_sid:void 0,f_flag:void 0,f_namemax:void 0};if(re.f_bsize=P(n,4,this,r),!1===re.f_bsize)return;if(re.f_frsize=P(n,12,this,r),!1===re.f_frsize)return;if(re.f_blocks=P(n,20,this,r),!1===re.f_blocks)return;if(re.f_bfree=P(n,28,this,r),!1===re.f_bfree)return;if(re.f_bavail=P(n,36,this,r),!1===re.f_bavail)return;if(re.f_files=P(n,44,this,r),!1===re.f_files)return;if(re.f_ffree=P(n,52,this,r),!1===re.f_ffree)return;if(re.f_favail=P(n,60,this,r),!1===re.f_favail)return;if(re.f_sid=P(n,68,this,r),!1===re.f_sid)return;if(re.f_flag=P(n,76,this,r),!1===re.f_flag)return;if(re.f_namemax=P(n,84,this,r),!1===re.f_namemax)return;W(void 0,re)}W()}j&&delete E[o]}}c="packet_header",n=u=void 0}else if("bad_pkt"===c){if(a&&n[4]!==A.INIT){var ne=n[4]===A.EXTENDED?w.OP_UNSUPPORTED:w.FAILURE;if(n[4]===A.INIT||n[4]===k.VERSION)return this._cleanup(r);if(!1===(o=d(n,5,this,r)))return;this.status(o,ne)}l=g(n,0)-5,c="discard"}}if(T>=b)break}s.status=c,s.pktType=f,s.pktBuf=u,s.pktLeft=l,s.version=m,r()},C.prototype.createReadStream=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");return new J(this,e,t)},C.prototype.createWriteStream=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");return new te(this,e,t)},C.prototype.open=function(e,t,r,i){if(this.server)throw new Error("Client-only method called in server mode");var o=this._state;"function"==typeof r&&(i=r,r=void 0);var s="number"==typeof t?t:F(t);if(null===s)throw new Error("Unknown flags string: "+t);var a=0,c=0;"string"!=typeof r&&"number"!=typeof r||(r={mode:r}),"object"===n(r)&&null!==r&&(a=(r=x(r)).flags,c=r.nbytes,r=r.bytes);var f=Buffer.byteLength(e),u=9,h=Buffer.allocUnsafe(13+f+4+4+c);y(h,h.length-4,0),h[4]=A.OPEN;var l=o.writeReqid=(o.writeReqid+1)%O;if(y(h,l,5),y(h,f,u),h.write(e,u+=4,f,"utf8"),y(h,s,u+=f),y(h,a,u+=4),r&&a){u+=4;for(var p=0,d=r.length;p<d;++p)for(var g=0,m=r[p].length;g<m;++g)h[u++]=r[p][g]}return o.requests[l]={cb:i},this.debug("DEBUG[SFTP]: Outgoing: Writing OPEN"),this.push(h)},C.prototype.close=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");var r=this._state,n=e.length,i=9,o=Buffer.allocUnsafe(13+n);y(o,o.length-4,0),o[4]=A.CLOSE;var s=r.writeReqid=(r.writeReqid+1)%O;return y(o,s,5),y(o,n,i),e.copy(o,i+=4),r.requests[s]={cb:t},this.debug("DEBUG[SFTP]: Outgoing: Writing CLOSE"),this.push(o)},C.prototype.readData=function(e,t,r,n,i,o){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");if(!Buffer.isBuffer(t))throw new Error("buffer is not a Buffer");if(r>=t.length)throw new Error("offset is out of bounds");if(r+n>t.length)throw new Error("length extends beyond buffer");if(null===i)throw new Error("null position currently unsupported");var s=this._state,a=e.length,c=9,f=i,u=Buffer.allocUnsafe(13+a+8+4);y(u,u.length-4,0),u[4]=A.READ;var h=s.writeReqid=(s.writeReqid+1)%O;y(u,h,5),y(u,a,c),e.copy(u,c+=4),c+=a;for(var l=7;l>=0;--l)u[c+l]=255&f,f/=256;return y(u,n,c+=8),s.requests[h]={cb:function(e,t,r){if(e){if(o._wantEOFError||e.code!==w.EOF)return o(e)}else if(r>n)return o(new Error("Received more data than requested"));o(void 0,r||0,t,i)},buffer:t.slice(r,r+n)},this.debug("DEBUG[SFTP]: Outgoing: Writing READ"),this.push(u)},C.prototype.writeData=function(e,t,r,n,i,o){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");if(!Buffer.isBuffer(t))throw new Error("buffer is not a Buffer");if(r>t.length)throw new Error("offset is out of bounds");if(r+n>t.length)throw new Error("length extends beyond buffer");if(null===i)throw new Error("null position currently unsupported");var s=this,a=this._state;if(n){var c=n>a.maxDataLen?n-a.maxDataLen:0,f=i;c&&(n=a.maxDataLen);var u=e.length,h=9,l=Buffer.allocUnsafe(13+u+8+4+n);y(l,l.length-4,0),l[4]=A.WRITE;var p=a.writeReqid=(a.writeReqid+1)%O;y(l,p,5),y(l,u,h),e.copy(l,h+=4),h+=u;for(var d=7;d>=0;--d)l[h+d]=255&i,i/=256;return y(l,n,h+=8),t.copy(l,h+=4,r,r+n),a.requests[p]={cb:function(i){i?o&&o(i):c?s.writeData(e,t,r+n,c,f+n,o):o&&o(void 0,r+n)}},this.debug("DEBUG[SFTP]: Outgoing: Writing WRITE"),this.push(l)}o&&process.nextTick((function(){o(void 0,0)}))},C.prototype.fastGet=function(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");I(this,l,e,t,r,n)},C.prototype.fastPut=function(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");I(l,this,e,t,r,n)},C.prototype.readFile=function(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");var i;"function"==typeof r?i=r:"function"==typeof t&&(i=t,t=void 0);var o=this;if("string"==typeof t)t={encoding:t,flag:"r"};else if(t){if("object"!==n(t))throw new TypeError("Bad arguments")}else t={encoding:null,flag:"r"};var s,a,c,f=t.encoding;if(f&&!Buffer.isEncoding(f))throw new Error("Unknown encoding: "+f);var u,h=0,l=0,p=t.flag||"r";function d(){0===s?(a=Buffer.allocUnsafe(8192),o.readData(u,a,0,8192,l,g)):o.readData(u,a,h,s-h,l,g)}function g(e,t){var r;if(e){if(!(r=e.code===w.EOF))return o.close(u,(function(){return i&&i(e)}))}else r=!1;if(r||0===s&&0===t)return y();l+=t,h+=t,0!==s?h===s?y():d():(c.push(a.slice(0,t)),d())}function y(){o.close(u,(function(e){return 0===s?a=Buffer.concat(c,h):h<s&&(a=a.slice(0,h)),f&&(a=a.toString(f)),i&&i(e,a)}))}this.open(e,p,438,(function(t,r){if(t)return i&&i(t);u=r,o.fstat(u,(function t(r,n){if(r)o.stat(e,(function(e,n){if(e)return o.close(u,(function(){i&&i(r)}));t(null,n)}));else{if(0===(s=n.size||0))return c=[],d();a=Buffer.allocUnsafe(s),d()}}))})),g._wantEOFError=!0},C.prototype.writeFile=function(e,t,r,i){if(this.server)throw new Error("Client-only method called in server mode");var o;"function"==typeof i?o=i:"function"==typeof r&&(o=r,r=void 0);var s=this;if("string"==typeof r)r={encoding:r,mode:438,flag:"w"};else if(r){if("object"!==n(r))throw new TypeError("Bad arguments")}else r={encoding:"utf8",mode:438,flag:"w"};if(r.encoding&&!Buffer.isEncoding(r.encoding))throw new Error("Unknown encoding: "+r.encoding);var a=r.flag||"w";this.open(e,a,r.mode,(function(n,i){if(n)o&&o(n);else{var c=Buffer.isBuffer(t)?t:Buffer.from(""+t,r.encoding||"utf8"),f=/a/.test(a)?null:0;if(null===f)return void s.fstat(i,(function t(r,n){r?s.stat(e,(function(e,n){if(e)return s.close(i,(function(){o&&o(r)}));t(null,n)})):D(s,i,c,0,c.length,n.size,o)}));D(s,i,c,0,c.length,f,o)}}))},C.prototype.appendFile=function(e,t,r,i){if(this.server)throw new Error("Client-only method called in server mode");var o;if("function"==typeof i?o=i:"function"==typeof r&&(o=r,r=void 0),"string"==typeof r)r={encoding:r,mode:438,flag:"a"};else if(r){if("object"!==n(r))throw new TypeError("Bad arguments")}else r={encoding:"utf8",mode:438,flag:"a"};r.flag||(r=c._extend({flag:"a"},r)),this.writeFile(e,t,r,o)},C.prototype.exists=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");this.stat(e,(function(e){t&&t(!e)}))},C.prototype.unlink=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");var r=this._state,n=Buffer.byteLength(e),i=9,o=Buffer.allocUnsafe(13+n);y(o,o.length-4,0),o[4]=A.REMOVE;var s=r.writeReqid=(r.writeReqid+1)%O;return y(o,s,5),y(o,n,i),o.write(e,i+=4,n,"utf8"),r.requests[s]={cb:t},this.debug("DEBUG[SFTP]: Outgoing: Writing REMOVE"),this.push(o)},C.prototype.rename=function(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");var n=this._state,i=Buffer.byteLength(e),o=Buffer.byteLength(t),s=9,a=Buffer.allocUnsafe(13+i+4+o);y(a,a.length-4,0),a[4]=A.RENAME;var c=n.writeReqid=(n.writeReqid+1)%O;return y(a,c,5),y(a,i,s),a.write(e,s+=4,i,"utf8"),y(a,o,s+=i),a.write(t,s+=4,o,"utf8"),n.requests[c]={cb:r},this.debug("DEBUG[SFTP]: Outgoing: Writing RENAME"),this.push(a)},C.prototype.mkdir=function(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");var i=0,o=0,s=this._state;"function"==typeof t&&(r=t,t=void 0),"object"===n(t)&&null!==t&&(i=(t=x(t)).flags,o=t.nbytes,t=t.bytes);var a=Buffer.byteLength(e),c=9,f=Buffer.allocUnsafe(13+a+4+o);y(f,f.length-4,0),f[4]=A.MKDIR;var u=s.writeReqid=(s.writeReqid+1)%O;if(y(f,u,5),y(f,a,c),f.write(e,c+=4,a,"utf8"),y(f,i,c+=a),i){c+=4;for(var h=0,l=t.length;h<l;++h)for(var p=0,d=t[h].length;p<d;++p)f[c++]=t[h][p]}return s.requests[u]={cb:r},this.debug("DEBUG[SFTP]: Outgoing: Writing MKDIR"),this.push(f)},C.prototype.rmdir=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");var r=this._state,n=Buffer.byteLength(e),i=9,o=Buffer.allocUnsafe(13+n);y(o,o.length-4,0),o[4]=A.RMDIR;var s=r.writeReqid=(r.writeReqid+1)%O;return y(o,s,5),y(o,n,i),o.write(e,i+=4,n,"utf8"),r.requests[s]={cb:t},this.debug("DEBUG[SFTP]: Outgoing: Writing RMDIR"),this.push(o)},C.prototype.readdir=function(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");var i,o=this._state;if("function"==typeof t&&(r=t,t={}),"object"===n(t)&&null!==t||(t={}),i=!t||!t.full,!Buffer.isBuffer(e)&&"string"!=typeof e)throw new Error("missing directory handle or path");if("string"==typeof e){var s=this,a=[],c=0;return this.opendir(e,(function e(n,i){if(n)return r(n);s.readdir(i,t,(function(t,n){var o=t&&t.code===w.EOF;if(t&&!o)return s.close(i,(function(){r(t)}));if(o)return s.close(i,(function(e){if(e)return r(e);r(void 0,a)}));for(var f=0,u=n.length;f<u;++f,++c)a[c]=n[f];e(void 0,i)}))}))}var f=e.length,u=9,h=Buffer.allocUnsafe(13+f);y(h,h.length-4,0),h[4]=A.READDIR;var l=o.writeReqid=(o.writeReqid+1)%O;return y(h,l,5),y(h,f,u),e.copy(h,u+=4),o.requests[l]={cb:i?function(e,t){if(e)return r(e);for(var n=t.length-1;n>=0;--n)"."!==t[n].filename&&".."!==t[n].filename||t.splice(n,1);r(void 0,t)}:r},this.debug("DEBUG[SFTP]: Outgoing: Writing READDIR"),this.push(h)},C.prototype.fstat=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");var r=this._state,n=e.length,i=9,o=Buffer.allocUnsafe(13+n);y(o,o.length-4,0),o[4]=A.FSTAT;var s=r.writeReqid=(r.writeReqid+1)%O;return y(o,s,5),y(o,n,i),e.copy(o,i+=4),r.requests[s]={cb:t},this.debug("DEBUG[SFTP]: Outgoing: Writing FSTAT"),this.push(o)},C.prototype.stat=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");var r=this._state,n=Buffer.byteLength(e),i=9,o=Buffer.allocUnsafe(13+n);y(o,o.length-4,0),o[4]=A.STAT;var s=r.writeReqid=(r.writeReqid+1)%O;return y(o,s,5),y(o,n,i),o.write(e,i+=4,n,"utf8"),r.requests[s]={cb:t},this.debug("DEBUG[SFTP]: Outgoing: Writing STAT"),this.push(o)},C.prototype.lstat=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");var r=this._state,n=Buffer.byteLength(e),i=9,o=Buffer.allocUnsafe(13+n);y(o,o.length-4,0),o[4]=A.LSTAT;var s=r.writeReqid=(r.writeReqid+1)%O;return y(o,s,5),y(o,n,i),o.write(e,i+=4,n,"utf8"),r.requests[s]={cb:t},this.debug("DEBUG[SFTP]: Outgoing: Writing LSTAT"),this.push(o)},C.prototype.opendir=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");var r=this._state,n=Buffer.byteLength(e),i=9,o=Buffer.allocUnsafe(13+n);y(o,o.length-4,0),o[4]=A.OPENDIR;var s=r.writeReqid=(r.writeReqid+1)%O;return y(o,s,5),y(o,n,i),o.write(e,i+=4,n,"utf8"),r.requests[s]={cb:t},this.debug("DEBUG[SFTP]: Outgoing: Writing OPENDIR"),this.push(o)},C.prototype.setstat=function(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");var i=0,o=0,s=this._state;"object"===n(t)&&null!==t?(i=(t=x(t)).flags,o=t.nbytes,t=t.bytes):"function"==typeof t&&(r=t);var a=Buffer.byteLength(e),c=9,f=Buffer.allocUnsafe(13+a+4+o);y(f,f.length-4,0),f[4]=A.SETSTAT;var u=s.writeReqid=(s.writeReqid+1)%O;if(y(f,u,5),y(f,a,c),f.write(e,c+=4,a,"utf8"),y(f,i,c+=a),i){c+=4;for(var h=0,l=t.length;h<l;++h)for(var p=0,d=t[h].length;p<d;++p)f[c++]=t[h][p]}return s.requests[u]={cb:r},this.debug("DEBUG[SFTP]: Outgoing: Writing SETSTAT"),this.push(f)},C.prototype.fsetstat=function(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");var i=0,o=0,s=this._state;"object"===n(t)&&null!==t?(i=(t=x(t)).flags,o=t.nbytes,t=t.bytes):"function"==typeof t&&(r=t);var a=e.length,c=9,f=Buffer.allocUnsafe(13+a+4+o);y(f,f.length-4,0),f[4]=A.FSETSTAT;var u=s.writeReqid=(s.writeReqid+1)%O;if(y(f,u,5),y(f,a,c),e.copy(f,c+=4),y(f,i,c+=a),i){c+=4;for(var h=0,l=t.length;h<l;++h)for(var p=0,d=t[h].length;p<d;++p)f[c++]=t[h][p]}return s.requests[u]={cb:r},this.debug("DEBUG[SFTP]: Outgoing: Writing FSETSTAT"),this.push(f)},C.prototype.futimes=function(e,t,r,n){return this.fsetstat(e,{atime:H(t),mtime:H(r)},n)},C.prototype.utimes=function(e,t,r,n){return this.setstat(e,{atime:H(t),mtime:H(r)},n)},C.prototype.fchown=function(e,t,r,n){return this.fsetstat(e,{uid:t,gid:r},n)},C.prototype.chown=function(e,t,r,n){return this.setstat(e,{uid:t,gid:r},n)},C.prototype.fchmod=function(e,t,r){return this.fsetstat(e,{mode:t},r)},C.prototype.chmod=function(e,t,r){return this.setstat(e,{mode:t},r)},C.prototype.readlink=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");var r=this._state,n=Buffer.byteLength(e),i=9,o=Buffer.allocUnsafe(13+n);y(o,o.length-4,0),o[4]=A.READLINK;var s=r.writeReqid=(r.writeReqid+1)%O;return y(o,s,5),y(o,n,i),o.write(e,i+=4,n,"utf8"),r.requests[s]={cb:function(e,r){return e?t(e):r&&r.length?void t(void 0,r[0].filename):t(new Error("Response missing link info"))}},this.debug("DEBUG[SFTP]: Outgoing: Writing READLINK"),this.push(o)},C.prototype.symlink=function(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");var n=this._state,i=Buffer.byteLength(t),o=Buffer.byteLength(e),s=9,a=Buffer.allocUnsafe(13+i+4+o);y(a,a.length-4,0),a[4]=A.SYMLINK;var c=n.writeReqid=(n.writeReqid+1)%O;return y(a,c,5),this._isOpenSSH?(y(a,o,s),a.write(e,s+=4,o,"utf8"),y(a,i,s+=o),a.write(t,s+=4,i,"utf8")):(y(a,i,s),a.write(t,s+=4,i,"utf8"),y(a,o,s+=i),a.write(e,s+=4,o,"utf8")),n.requests[c]={cb:r},this.debug("DEBUG[SFTP]: Outgoing: Writing SYMLINK"),this.push(a)},C.prototype.realpath=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");var r=this._state,n=Buffer.byteLength(e),i=9,o=Buffer.allocUnsafe(13+n);y(o,o.length-4,0),o[4]=A.REALPATH;var s=r.writeReqid=(r.writeReqid+1)%O;return y(o,s,5),y(o,n,i),o.write(e,i+=4,n,"utf8"),r.requests[s]={cb:function(e,r){return e?t(e):r&&r.length?void t(void 0,r[0].filename):t(new Error("Response missing path info"))}},this.debug("DEBUG[SFTP]: Outgoing: Writing REALPATH"),this.push(o)},C.prototype.ext_openssh_rename=function(e,t,r){var n=this._state;if(this.server)throw new Error("Client-only method called in server mode");if(!n.extensions["posix-rename@openssh.com"]||-1===n.extensions["posix-rename@openssh.com"].indexOf("1"))throw new Error("Server does not support this extended request");var i=Buffer.byteLength(e),o=Buffer.byteLength(t),s=9,a=Buffer.allocUnsafe(41+i+4+o);y(a,a.length-4,0),a[4]=A.EXTENDED;var c=n.writeReqid=(n.writeReqid+1)%O;return y(a,c,5),y(a,24,s),a.write("posix-rename@openssh.com",s+=4,24,"ascii"),y(a,i,s+=24),a.write(e,s+=4,i,"utf8"),y(a,o,s+=i),a.write(t,s+=4,o,"utf8"),n.requests[c]={cb:r},this.debug("DEBUG[SFTP]: Outgoing: Writing posix-rename@openssh.com"),this.push(a)},C.prototype.ext_openssh_statvfs=function(e,t){var r=this._state;if(this.server)throw new Error("Client-only method called in server mode");if(!r.extensions["statvfs@openssh.com"]||-1===r.extensions["statvfs@openssh.com"].indexOf("2"))throw new Error("Server does not support this extended request");var n=Buffer.byteLength(e),i=9,o=Buffer.allocUnsafe(36+n);y(o,o.length-4,0),o[4]=A.EXTENDED;var s=r.writeReqid=(r.writeReqid+1)%O;return y(o,s,5),y(o,19,i),o.write("statvfs@openssh.com",i+=4,19,"ascii"),y(o,n,i+=19),o.write(e,i+=4,n,"utf8"),r.requests[s]={extended:"statvfs@openssh.com",cb:t},this.debug("DEBUG[SFTP]: Outgoing: Writing statvfs@openssh.com"),this.push(o)},C.prototype.ext_openssh_fstatvfs=function(e,t){var r=this._state;if(this.server)throw new Error("Client-only method called in server mode");if(!r.extensions["fstatvfs@openssh.com"]||-1===r.extensions["fstatvfs@openssh.com"].indexOf("2"))throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");var n=e.length,i=9,o=Buffer.allocUnsafe(37+n);y(o,o.length-4,0),o[4]=A.EXTENDED;var s=r.writeReqid=(r.writeReqid+1)%O;return y(o,s,5),y(o,20,i),o.write("fstatvfs@openssh.com",i+=4,20,"ascii"),y(o,n,i+=20),o.write(e,i+=4,n,"utf8"),r.requests[s]={extended:"fstatvfs@openssh.com",cb:t},this.debug("DEBUG[SFTP]: Outgoing: Writing fstatvfs@openssh.com"),this.push(o)},C.prototype.ext_openssh_hardlink=function(e,t,r){var n=this._state;if(this.server)throw new Error("Client-only method called in server mode");if(!n.extensions["hardlink@openssh.com"]||-1===n.extensions["hardlink@openssh.com"].indexOf("1"))throw new Error("Server does not support this extended request");var i=Buffer.byteLength(e),o=Buffer.byteLength(t),s=9,a=Buffer.allocUnsafe(37+i+4+o);y(a,a.length-4,0),a[4]=A.EXTENDED;var c=n.writeReqid=(n.writeReqid+1)%O;return y(a,c,5),y(a,20,s),a.write("hardlink@openssh.com",s+=4,20,"ascii"),y(a,i,s+=20),a.write(e,s+=4,i,"utf8"),y(a,o,s+=i),a.write(t,s+=4,o,"utf8"),n.requests[c]={cb:r},this.debug("DEBUG[SFTP]: Outgoing: Writing hardlink@openssh.com"),this.push(a)},C.prototype.ext_openssh_fsync=function(e,t){var r=this._state;if(this.server)throw new Error("Client-only method called in server mode");if(!r.extensions["fsync@openssh.com"]||-1===r.extensions["fsync@openssh.com"].indexOf("1"))throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");var n=e.length,i=9,o=Buffer.allocUnsafe(34+n);y(o,o.length-4,0),o[4]=A.EXTENDED;var s=r.writeReqid=(r.writeReqid+1)%O;return y(o,s,5),y(o,17,i),o.write("fsync@openssh.com",i+=4,17,"ascii"),y(o,n,i+=17),o.write(e,i+=4,n,"utf8"),r.requests[s]={cb:t},this.debug("DEBUG[SFTP]: Outgoing: Writing fsync@openssh.com"),this.push(o)},C.prototype.status=function(e,t,r,n){if(!this.server)throw new Error("Server-only method called in client mode");if(!w[t]||"number"!=typeof t)throw new Error("Bad status code: "+t);r||(r=""),n||(n="");var i=Buffer.byteLength(r),o=Buffer.byteLength(n),s=Buffer.allocUnsafe(17+i+4+o);return y(s,s.length-4,0),s[4]=k.STATUS,y(s,e,5),y(s,t,9),y(s,i,13),i&&s.write(r,17,i,"utf8"),y(s,o,17+i),o&&s.write(n,17+i+4,o,"ascii"),this.debug("DEBUG[SFTP]: Outgoing: Writing STATUS"),this.push(s)},C.prototype.handle=function(e,t){if(!this.server)throw new Error("Server-only method called in client mode");if(!Buffer.isBuffer(t))throw new Error("handle is not a Buffer");var r=t.length;if(r>256)throw new Error("handle too large (> 256 bytes)");var n=Buffer.allocUnsafe(13+r);return y(n,n.length-4,0),n[4]=k.HANDLE,y(n,e,5),y(n,r,9),r&&t.copy(n,13),this.debug("DEBUG[SFTP]: Outgoing: Writing HANDLE"),this.push(n)},C.prototype.data=function(e,t,r){if(!this.server)throw new Error("Server-only method called in client mode");var n=Buffer.isBuffer(t);if(!n&&"string"!=typeof t)throw new Error("data is not a Buffer or string");n||r||(r="utf8");var i=n?t.length:Buffer.byteLength(t,r),o=Buffer.allocUnsafe(13+i);return y(o,o.length-4,0),o[4]=k.DATA,y(o,e,5),y(o,i,9),i&&(n?t.copy(o,13):o.write(t,13,i,r)),this.debug("DEBUG[SFTP]: Outgoing: Writing DATA"),this.push(o)},C.prototype.name=function(e,t){if(!this.server)throw new Error("Server-only method called in client mode");if(!Array.isArray(t)){if("object"!==n(t)||null===t)throw new Error("names is not an object or array");t=[t]}var r,i,o,s,a,c,f,u,h,l,p,d,g=t.length,m=0,v=[];for(l=0;l<g;++l)o=(i=t[l])&&i.filename&&"string"==typeof i.filename?i.filename:"",m+=4+Buffer.byteLength(o),s=i&&i.longname&&"string"==typeof i.longname?i.longname:"",m+=4+Buffer.byteLength(s),"object"===n(i.attrs)&&null!==i.attrs?(m+=4+(r=x(i.attrs)).nbytes,v.push(r)):(m+=4,v.push(null));for(u=Buffer.allocUnsafe(13+m),y(u,u.length-4,0),u[4]=k.NAME,y(u,e,5),y(u,g,9),h=13,l=0;l<g;++l)if(o=(i=t[l])&&i.filename&&"string"==typeof i.filename?i.filename:"",c=Buffer.byteLength(o),y(u,c,h),h+=4,c&&(u.write(o,h,c,"utf8"),h+=c),s=i&&i.longname&&"string"==typeof i.longname?i.longname:"",c=Buffer.byteLength(s),y(u,c,h),h+=4,c&&(u.write(s,h,c,"utf8"),h+=c),a=v[l]){if(y(u,a.flags,h),h+=4,a.flags&&a.bytes){var E=a.bytes;for(p=0,c=E.length;p<c;++p)for(d=0,f=E[p].length;d<f;++d)u[h++]=E[p][d]}}else y(u,0,h),h+=4;return this.debug("DEBUG[SFTP]: Outgoing: Writing NAME"),this.push(u)},C.prototype.attrs=function(e,t){if(!this.server)throw new Error("Server-only method called in client mode");if("object"!==n(t)||null===t)throw new Error("attrs is not an object");var r=x(t),i=Buffer.allocUnsafe(13+r.nbytes),o=13;if(y(i,i.length-4,0),i[4]=k.ATTRS,y(i,e,5),y(i,r.flags,9),r.flags&&r.bytes)for(var s=r.bytes,a=0,c=s.length;a<c;++a)for(var f=0,u=s[a].length;f<u;++f)i[o++]=s[a][f];return this.debug("DEBUG[SFTP]: Outgoing: Writing ATTRS"),this.push(i)};var K={r:T.READ,"r+":T.READ|T.WRITE,w:T.TRUNC|T.CREAT|T.WRITE,wx:T.TRUNC|T.CREAT|T.WRITE|T.EXCL,xw:T.TRUNC|T.CREAT|T.WRITE|T.EXCL,"w+":T.TRUNC|T.CREAT|T.READ|T.WRITE,"wx+":T.TRUNC|T.CREAT|T.READ|T.WRITE|T.EXCL,"xw+":T.TRUNC|T.CREAT|T.READ|T.WRITE|T.EXCL,a:T.APPEND|T.CREAT|T.WRITE,ax:T.APPEND|T.CREAT|T.WRITE|T.EXCL,xa:T.APPEND|T.CREAT|T.WRITE|T.EXCL,"a+":T.APPEND|T.CREAT|T.READ|T.WRITE,"ax+":T.APPEND|T.CREAT|T.READ|T.WRITE|T.EXCL,"xa+":T.APPEND|T.CREAT|T.READ|T.WRITE|T.EXCL},G=Object.keys(K);function F(e){var t=K[e];return void 0!==t?t:null}function q(e){this.mode=e&&e.mode,this.permissions=this.mode,this.uid=e&&e.uid,this.gid=e&&e.gid,this.size=e&&e.size,this.atime=e&&e.atime,this.mtime=e&&e.mtime}C.stringToFlags=F,C.flagsToString=function(e){for(var t=0;t<G.length;++t){var r=G[t];if(K[r]===e)return r}return null},q.prototype._checkModeProperty=function(e){return(this.mode&a.S_IFMT)===e},q.prototype.isDirectory=function(){return this._checkModeProperty(a.S_IFDIR)},q.prototype.isFile=function(){return this._checkModeProperty(a.S_IFREG)},q.prototype.isBlockDevice=function(){return this._checkModeProperty(a.S_IFBLK)},q.prototype.isCharacterDevice=function(){return this._checkModeProperty(a.S_IFCHR)},q.prototype.isSymbolicLink=function(){return this._checkModeProperty(a.S_IFLNK)},q.prototype.isFIFO=function(){return this._checkModeProperty(a.S_IFIFO)},q.prototype.isSocket=function(){return this._checkModeProperty(a.S_IFSOCK)},C.Stats=q;var j,W=r(61),X=W.validateNumber,V=W.destroyImpl,Q=W.ERR_OUT_OF_RANGE,Y=W.ERR_INVALID_ARG_TYPE,z=[];function $(e,t){if(!Number.isSafeInteger(e)){if(X(e,t),!Number.isInteger(e))throw new Q(t,"an integer",e);throw new Q(t,">= 0 and <= 2 ** 53 - 1",e)}if(e<0)throw new Q(t,">= 0 and <= 2 ** 53 - 1",e)}function Z(e){return e+7&-8}function J(e,t,r){if(void 0===r)r={};else if("string"==typeof r)r={encoding:r};else{if(null===r||"object"!==n(r))throw new TypeError('"options" argument must be a string or an object');r=Object.create(r)}if(void 0===r.highWaterMark&&(r.highWaterMark=65536),r.emitClose=!1,o.call(this,r),this.path=t,this.flags=void 0===r.flags?"r":r.flags,this.mode=void 0===r.mode?438:r.mode,this.start=r.start,this.end=r.end,this.autoClose=void 0===r.autoClose||r.autoClose,this.pos=0,this.bytesRead=0,this.closed=!1,this.handle=void 0===r.handle?null:r.handle,this.sftp=e,this._opening=!1,void 0!==this.start&&($(this.start,"start"),this.pos=this.start),void 0===this.end)this.end=1/0;else if(this.end!==1/0&&($(this.end,"end"),void 0!==this.start&&this.start>this.end))throw new Q("start",'<= "end" (here: '.concat(this.end,")"),this.start);this.on("end",(function(){this.autoClose&&this.destroy()})),Buffer.isBuffer(this.handle)||this.open()}function ee(e,t,r){if(!e.handle)return n();function n(n){t(n=n||r),e.closed=!0,n||e.emit("close")}e.sftp.close(e.handle,n)}function te(e,t,r){if(void 0===r)r={};else if("string"==typeof r)r={encoding:r};else{if(null===r||"object"!==n(r))throw new TypeError('"options" argument must be a string or an object');r=Object.create(r)}r.emitClose=!1,s.call(this,r),this.path=t,this.flags=void 0===r.flags?"w":r.flags,this.mode=void 0===r.mode?438:r.mode,this.start=r.start,this.autoClose=void 0===r.autoClose||r.autoClose,this.pos=0,this.bytesWritten=0,this.closed=!1,this.handle=void 0===r.handle?null:r.handle,this.sftp=e,this._opening=!1,void 0!==this.start&&($(this.start,"start"),this.pos=this.start),r.encoding&&this.setDefaultEncoding(r.encoding),this.on("finish",(function(){this._writableState.finalCalled||this.autoClose&&this.destroy()})),Buffer.isBuffer(this.handle)||this.open()}f(J,o),J.prototype.open=function(){var e=this;this._opening||(this._opening=!0,this.sftp.open(this.path,this.flags,this.mode,(function(t,r){if(e._opening=!1,t)return e.emit("error",t),void(e.autoClose&&e.destroy());e.handle=r,e.emit("open",r),e.emit("ready"),e.read()})))},J.prototype._read=function(e){var t=this;if(!Buffer.isBuffer(this.handle))return this.once("open",(function(){this._read(e)}));if(!this.destroyed){var r;(!j||j.length-j.used<128)&&(r=this.readableHighWaterMark||this._readableState.highWaterMark,(j=z.length>0?z.pop():Buffer.allocUnsafe(r)).used=0);var n=j,i=Math.min(j.length-j.used,e),o=j.used;if(void 0!==this.end&&(i=Math.min(this.end-this.pos+1,i)),i<=0)return this.push(null);this.sftp.readData(this.handle,j,j.used,i,this.pos,(function(e,r){if(e)return t.emit("error",e),void(t.autoClose&&t.destroy());var s=null;if(o+i===n.used&&n===j){var a=n.used+r-i;n.used=Z(a)}else{var c=o+i&-8,f=Z(o+r);c-f>=128&&z.push(n.slice(f,c))}r>0&&(t.bytesRead+=r,s=n.slice(o,o+r)),t.pos+=r,t.push(s)})),j.used=Z(j.used+i)}},"function"!=typeof o.prototype.destroy&&(J.prototype.destroy=V),J.prototype._destroy=function(e,t){!this._opening||Buffer.isBuffer(this.handle)?(ee(this,t,e),this.handle=null,this._opening=!1):this.once("open",ee.bind(null,this,t,e))},J.prototype.close=function(e){this.destroy(null,e)},Object.defineProperty(J.prototype,"pending",{get:function(){return null===this.handle},configurable:!0}),f(te,s),te.prototype._final=function(e){this.autoClose&&this.destroy(),e()},te.prototype.open=function(){var e=this;this._opening||(this._opening=!0,this.sftp.open(this.path,this.flags,this.mode,(function(t,r){if(e._opening=!1,t)return e.emit("error",t),void(e.autoClose&&e.destroy());e.handle=r;e.sftp.fchmod(r,e.mode,(function t(n){if(n)e.sftp.chmod(e.path,e.mode,(function(e){t()}));else if("a"!==e.flags[0])e.emit("open",r),e.emit("ready");else{e.sftp.fstat(r,(function t(n,i){n?e.sftp.stat(e.path,(function(r,i){if(r)return e.destroy(),void e.emit("error",n);t(null,i)})):(e.pos=i.size,e.emit("open",r),e.emit("ready"))}))}}))})))},te.prototype._write=function(e,t,r){var n=this;if(!Buffer.isBuffer(e)){var i=new Y("data","Buffer",e);return this.emit("error",i)}if(!Buffer.isBuffer(this.handle))return this.once("open",(function(){this._write(e,t,r)}));this.sftp.writeData(this.handle,e,0,e.length,this.pos,(function(e,t){if(e)return n.autoClose&&n.destroy(),r(e);n.bytesWritten+=t,r()})),this.pos+=e.length},te.prototype._writev=function(e,t){var r=this;if(!Buffer.isBuffer(this.handle))return this.once("open",(function(){this._writev(e,t)}));for(var n=this.sftp,i=this.handle,o=e.length,s=function(e,n){if(e)return r.destroy(),t(e);r.bytesWritten+=n,0==--o&&t()},a=0;a<e.length;++a){var c=e[a].chunk;n.writeData(i,c,0,c.length,this.pos,s),this.pos+=c.length}},"function"!=typeof s.prototype.destroy&&(te.prototype.destroy=J.prototype.destroy),te.prototype._destroy=J.prototype._destroy,te.prototype.close=function(e){if(e){if(this.closed)return void process.nextTick(e);this.on("close",e)}this.autoClose||this.on("finish",this.destroy.bind(this)),this.end()},te.prototype.destroySoon=te.prototype.end,Object.defineProperty(te.prototype,"pending",{get:function(){return null===this.handle},configurable:!0}),e.exports=C},function(e,t,r){var n=r(15),i=r(16),o=r(55),s=r(57);for(var a in e.exports={Reader:o,Writer:s},i)i.hasOwnProperty(a)&&(e.exports[a]=i[a]);for(var c in n)n.hasOwnProperty(c)&&(e.exports[c]=n[c])},function(e,t,r){var n=r(9),i=r(25).Buffer,o=r(16),s=r(15).newInvalidAsn1Error;function a(e){if(!e||!i.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0}Object.defineProperty(a.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(a.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(a.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),a.prototype.readByte=function(e){if(this._size-this._offset<1)return null;var t=255&this._buf[this._offset];return e||(this._offset+=1),t},a.prototype.peek=function(){return this.readByte(!0)},a.prototype.readLength=function(e){if(void 0===e&&(e=this._offset),e>=this._size)return null;var t=255&this._buf[e++];if(null===t)return null;if(128==(128&t)){if(0===(t&=127))throw s("Indefinite length not supported");if(t>4)throw s("encoding too long");if(this._size-e<t)return null;this._len=0;for(var r=0;r<t;r++)this._len=(this._len<<8)+(255&this._buf[e++])}else this._len=t;return e},a.prototype.readSequence=function(e){var t=this.peek();if(null===t)return null;if(void 0!==e&&e!==t)throw s("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);return null===r?null:(this._offset=r,t)},a.prototype.readInt=function(){return this._readTag(o.Integer)},a.prototype.readBoolean=function(){return 0!==this._readTag(o.Boolean)},a.prototype.readEnumeration=function(){return this._readTag(o.Enumeration)},a.prototype.readString=function(e,t){e||(e=o.OctetString);var r=this.peek();if(null===r)return null;if(r!==e)throw s("Expected 0x"+e.toString(16)+": got 0x"+r.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(this.length>this._size-n)return null;if(this._offset=n,0===this.length)return t?i.alloc(0):"";var a=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,t?a:a.toString("utf8")},a.prototype.readOID=function(e){e||(e=o.OID);var t=this.readString(e,!0);if(null===t)return null;for(var r=[],n=0,i=0;i<t.length;i++){var s=255&t[i];n<<=7,n+=127&s,0==(128&s)&&(r.push(n),n=0)}return n=r.shift(),r.unshift(n%40),r.unshift(n/40>>0),r.join(".")},a.prototype._readTag=function(e){n.ok(void 0!==e);var t=this.peek();if(null===t)return null;if(t!==e)throw s("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>4)throw s("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;for(var i=this._buf[this._offset],o=0,a=0;a<this.length;a++)o<<=8,o|=255&this._buf[this._offset++];return 128==(128&i)&&4!==a&&(o-=1<<8*a),o>>0},e.exports=a},function(e,t){e.exports=require("buffer")},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(9),o=r(25).Buffer,s=r(16),a=r(15).newInvalidAsn1Error,c={size:1024,growthFactor:8};function f(e){var t,r;t=c,r=e||{},i.ok(t),i.equal(n(t),"object"),i.ok(r),i.equal(n(r),"object"),Object.getOwnPropertyNames(t).forEach((function(e){if(!r[e]){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n)}})),e=r,this._buf=o.alloc(e.size||1024),this._size=this._buf.length,this._offset=0,this._options=e,this._seq=[]}Object.defineProperty(f.prototype,"buffer",{get:function(){if(this._seq.length)throw a(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}}),f.prototype.writeByte=function(e){if("number"!=typeof e)throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=e},f.prototype.writeInt=function(e,t){if("number"!=typeof e)throw new TypeError("argument must be a Number");"number"!=typeof t&&(t=s.Integer);for(var r=4;(0==(4286578688&e)||-8388608==(4286578688&e))&&r>1;)r--,e<<=8;if(r>4)throw a("BER ints cannot be > 0xffffffff");for(this._ensure(2+r),this._buf[this._offset++]=t,this._buf[this._offset++]=r;r-- >0;)this._buf[this._offset++]=(4278190080&e)>>>24,e<<=8},f.prototype.writeNull=function(){this.writeByte(s.Null),this.writeByte(0)},f.prototype.writeEnumeration=function(e,t){if("number"!=typeof e)throw new TypeError("argument must be a Number");return"number"!=typeof t&&(t=s.Enumeration),this.writeInt(e,t)},f.prototype.writeBoolean=function(e,t){if("boolean"!=typeof e)throw new TypeError("argument must be a Boolean");"number"!=typeof t&&(t=s.Boolean),this._ensure(3),this._buf[this._offset++]=t,this._buf[this._offset++]=1,this._buf[this._offset++]=e?255:0},f.prototype.writeString=function(e,t){if("string"!=typeof e)throw new TypeError("argument must be a string (was: "+n(e)+")");"number"!=typeof t&&(t=s.OctetString);var r=o.byteLength(e);this.writeByte(t),this.writeLength(r),r&&(this._ensure(r),this._buf.write(e,this._offset),this._offset+=r)},f.prototype.writeBuffer=function(e,t){if("number"!=typeof t)throw new TypeError("tag must be a number");if(!o.isBuffer(e))throw new TypeError("argument must be a buffer");this.writeByte(t),this.writeLength(e.length),this._ensure(e.length),e.copy(this._buf,this._offset,0,e.length),this._offset+=e.length},f.prototype.writeStringArray=function(e){if(!e instanceof Array)throw new TypeError("argument must be an Array[String]");var t=this;e.forEach((function(e){t.writeString(e)}))},f.prototype.writeOID=function(e,t){if("string"!=typeof e)throw new TypeError("argument must be a string");if("number"!=typeof t&&(t=s.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(e))throw new Error("argument is not a valid OID string");var r=e.split("."),n=[];n.push(40*parseInt(r[0],10)+parseInt(r[1],10)),r.slice(2).forEach((function(e){!function(e,t){t<128?e.push(t):t<16384?(e.push(t>>>7|128),e.push(127&t)):t<2097152?(e.push(t>>>14|128),e.push(255&(t>>>7|128)),e.push(127&t)):t<268435456?(e.push(t>>>21|128),e.push(255&(t>>>14|128)),e.push(255&(t>>>7|128)),e.push(127&t)):(e.push(255&(t>>>28|128)),e.push(255&(t>>>21|128)),e.push(255&(t>>>14|128)),e.push(255&(t>>>7|128)),e.push(127&t))}(n,parseInt(e,10))}));var i=this;this._ensure(2+n.length),this.writeByte(t),this.writeLength(n.length),n.forEach((function(e){i.writeByte(e)}))},f.prototype.writeLength=function(e){if("number"!=typeof e)throw new TypeError("argument must be a Number");if(this._ensure(4),e<=127)this._buf[this._offset++]=e;else if(e<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=e;else if(e<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=e>>8,this._buf[this._offset++]=e;else{if(!(e<=16777215))throw a("Length too long (> 4 bytes)");this._buf[this._offset++]=131,this._buf[this._offset++]=e>>16,this._buf[this._offset++]=e>>8,this._buf[this._offset++]=e}},f.prototype.startSequence=function(e){"number"!=typeof e&&(e=s.Sequence|s.Constructor),this.writeByte(e),this._seq.push(this._offset),this._ensure(3),this._offset+=3},f.prototype.endSequence=function(){var e=this._seq.pop(),t=e+3,r=this._offset-t;if(r<=127)this._shift(t,r,-2),this._buf[e]=r;else if(r<=255)this._shift(t,r,-1),this._buf[e]=129,this._buf[e+1]=r;else if(r<=65535)this._buf[e]=130,this._buf[e+1]=r>>8,this._buf[e+2]=r;else{if(!(r<=16777215))throw a("Sequence too long");this._shift(t,r,1),this._buf[e]=131,this._buf[e+1]=r>>16,this._buf[e+2]=r>>8,this._buf[e+3]=r}},f.prototype._shift=function(e,t,r){i.ok(void 0!==e),i.ok(void 0!==t),i.ok(r),this._buf.copy(this._buf,e+r,e,e+t),this._offset+=r},f.prototype._ensure=function(e){if(i.ok(e),this._size-this._offset<e){var t=this._size*this._options.growthFactor;t-this._offset<e&&(t+=e);var r=o.alloc(t);this._buf.copy(r,0,0,this._offset),this._buf=r,this._size=t}},e.exports=f},function(e,t,r){"use strict";var n=r(59).lowlevel.crypto_hash,i=0,o=function(){this.S=[new Uint32Array([3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946]),new Uint32Array([1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055]),new Uint32Array([3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504]),new Uint32Array([976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462])],this.P=new Uint32Array([608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731])};function s(e,t,r){return(e[0][t[r+3]]+e[1][t[r+2]]^e[2][t[r+1]])+e[3][t[r]]}function a(e,t){var r,n=0;for(r=0;r<4;r++,i++)i>=t&&(i=0),n=n<<8|e[i];return n}o.prototype.encipher=function(e,t){void 0===t&&(t=new Uint8Array(e.buffer),0!==e.byteOffset&&(t=t.subarray(e.byteOffset))),e[0]^=this.P[0];for(var r=1;r<16;r+=2)e[1]^=s(this.S,t,0)^this.P[r],e[0]^=s(this.S,t,4)^this.P[r+1];var n=e[0];e[0]=e[1]^this.P[17],e[1]=n},o.prototype.decipher=function(e){var t=new Uint8Array(e.buffer);0!==e.byteOffset&&(t=t.subarray(e.byteOffset)),e[0]^=this.P[17];for(var r=16;r>0;r-=2)e[1]^=s(this.S,t,0)^this.P[r],e[0]^=s(this.S,t,4)^this.P[r-1];var n=e[0];e[0]=e[1]^this.P[0],e[1]=n},o.prototype.expand0state=function(e,t){var r,n,o=new Uint32Array(2),s=new Uint8Array(o.buffer);for(r=0,i=0;r<18;r++)this.P[r]^=a(e,t);for(i=0,r=0;r<18;r+=2)this.encipher(o,s),this.P[r]=o[0],this.P[r+1]=o[1];for(r=0;r<4;r++)for(n=0;n<256;n+=2)this.encipher(o,s),this.S[r][n]=o[0],this.S[r][n+1]=o[1]},o.prototype.expandstate=function(e,t,r,n){var o,s,c=new Uint32Array(2);for(o=0,i=0;o<18;o++)this.P[o]^=a(r,n);for(o=0,i=0;o<18;o+=2)c[0]^=a(e,t),c[1]^=a(e,t),this.encipher(c),this.P[o]=c[0],this.P[o+1]=c[1];for(o=0;o<4;o++)for(s=0;s<256;s+=2)c[0]^=a(e,t),c[1]^=a(e,t),this.encipher(c),this.S[o][s]=c[0],this.S[o][s+1]=c[1];i=0},o.prototype.enc=function(e,t){for(var r=0;r<t;r++)this.encipher(e.subarray(2*r))},o.prototype.dec=function(e,t){for(var r=0;r<t;r++)this.decipher(e.subarray(2*r))};function c(e,t,r){var n,i=new o,s=new Uint32Array(8),c=new Uint8Array([79,120,121,99,104,114,111,109,97,116,105,99,66,108,111,119,102,105,115,104,83,119,97,116,68,121,110,97,109,105,116,101]);for(i.expandstate(t,64,e,64),n=0;n<64;n++)i.expand0state(t,64),i.expand0state(e,64);for(n=0;n<8;n++)s[n]=a(c,c.byteLength);for(n=0;n<64;n++)i.enc(s,s.byteLength/8);for(n=0;n<8;n++)r[4*n+3]=s[n]>>>24,r[4*n+2]=s[n]>>>16,r[4*n+1]=s[n]>>>8,r[4*n+0]=s[n]}e.exports={BLOCKS:8,HASHSIZE:32,hash:c,pbkdf:function(e,t,r,i,o,s,a){var f,u,h,l,p,d,g=new Uint8Array(64),y=new Uint8Array(64),m=new Uint8Array(32),v=new Uint8Array(32),E=new Uint8Array(i+4),_=s;if(a<1)return-1;if(0===t||0===i||0===s||s>m.byteLength*m.byteLength||i>1<<20)return-1;for(l=Math.floor((s+m.byteLength-1)/m.byteLength),h=Math.floor((s+l-1)/l),f=0;f<i;f++)E[f]=r[f];for(n(g,e,t),d=1;s>0;d++){for(E[i+0]=d>>>24,E[i+1]=d>>>16,E[i+2]=d>>>8,E[i+3]=d,n(y,E,i+4),c(g,y,v),f=m.byteLength;f--;)m[f]=v[f];for(f=1;f<a;f++)for(n(y,v,v.byteLength),c(g,y,v),u=0;u<m.byteLength;u++)m[u]^=v[u];for(h=Math.min(h,s),f=0;f<h&&!((p=f*l+(d-1))>=_);f++)o[p]=m[f];s-=f}return 0}}},function(e,t,r){!function(e){"use strict";var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var s=t(),a=t([1]),c=t([56129,1]),f=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function d(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function g(e,t,r,n,i){var o,s=0;for(o=0;o<i;o++)s|=e[t+o]^r[n+o];return(1&s-1>>>8)-1}function y(e,t,r,n){return g(e,t,r,n,16)}function m(e,t,r,n){return g(e,t,r,n,32)}function v(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,f=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,l=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,d=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,E=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,_=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,b=o,w=s,S=a,A=c,k=f,T=u,O=h,B=l,R=p,U=d,N=g,C=y,I=m,D=v,L=E,P=_,x=0;x<20;x+=2)b^=(i=(I^=(i=(R^=(i=(k^=(i=b+I|0)<<7|i>>>25)+b|0)<<9|i>>>23)+k|0)<<13|i>>>19)+R|0)<<18|i>>>14,T^=(i=(w^=(i=(D^=(i=(U^=(i=T+w|0)<<7|i>>>25)+T|0)<<9|i>>>23)+U|0)<<13|i>>>19)+D|0)<<18|i>>>14,N^=(i=(O^=(i=(S^=(i=(L^=(i=N+O|0)<<7|i>>>25)+N|0)<<9|i>>>23)+L|0)<<13|i>>>19)+S|0)<<18|i>>>14,P^=(i=(C^=(i=(B^=(i=(A^=(i=P+C|0)<<7|i>>>25)+P|0)<<9|i>>>23)+A|0)<<13|i>>>19)+B|0)<<18|i>>>14,b^=(i=(A^=(i=(S^=(i=(w^=(i=b+A|0)<<7|i>>>25)+b|0)<<9|i>>>23)+w|0)<<13|i>>>19)+S|0)<<18|i>>>14,T^=(i=(k^=(i=(B^=(i=(O^=(i=T+k|0)<<7|i>>>25)+T|0)<<9|i>>>23)+O|0)<<13|i>>>19)+B|0)<<18|i>>>14,N^=(i=(U^=(i=(R^=(i=(C^=(i=N+U|0)<<7|i>>>25)+N|0)<<9|i>>>23)+C|0)<<13|i>>>19)+R|0)<<18|i>>>14,P^=(i=(L^=(i=(D^=(i=(I^=(i=P+L|0)<<7|i>>>25)+P|0)<<9|i>>>23)+I|0)<<13|i>>>19)+D|0)<<18|i>>>14;b=b+o|0,w=w+s|0,S=S+a|0,A=A+c|0,k=k+f|0,T=T+u|0,O=O+h|0,B=B+l|0,R=R+p|0,U=U+d|0,N=N+g|0,C=C+y|0,I=I+m|0,D=D+v|0,L=L+E|0,P=P+_|0,e[0]=b>>>0&255,e[1]=b>>>8&255,e[2]=b>>>16&255,e[3]=b>>>24&255,e[4]=w>>>0&255,e[5]=w>>>8&255,e[6]=w>>>16&255,e[7]=w>>>24&255,e[8]=S>>>0&255,e[9]=S>>>8&255,e[10]=S>>>16&255,e[11]=S>>>24&255,e[12]=A>>>0&255,e[13]=A>>>8&255,e[14]=A>>>16&255,e[15]=A>>>24&255,e[16]=k>>>0&255,e[17]=k>>>8&255,e[18]=k>>>16&255,e[19]=k>>>24&255,e[20]=T>>>0&255,e[21]=T>>>8&255,e[22]=T>>>16&255,e[23]=T>>>24&255,e[24]=O>>>0&255,e[25]=O>>>8&255,e[26]=O>>>16&255,e[27]=O>>>24&255,e[28]=B>>>0&255,e[29]=B>>>8&255,e[30]=B>>>16&255,e[31]=B>>>24&255,e[32]=R>>>0&255,e[33]=R>>>8&255,e[34]=R>>>16&255,e[35]=R>>>24&255,e[36]=U>>>0&255,e[37]=U>>>8&255,e[38]=U>>>16&255,e[39]=U>>>24&255,e[40]=N>>>0&255,e[41]=N>>>8&255,e[42]=N>>>16&255,e[43]=N>>>24&255,e[44]=C>>>0&255,e[45]=C>>>8&255,e[46]=C>>>16&255,e[47]=C>>>24&255,e[48]=I>>>0&255,e[49]=I>>>8&255,e[50]=I>>>16&255,e[51]=I>>>24&255,e[52]=D>>>0&255,e[53]=D>>>8&255,e[54]=D>>>16&255,e[55]=D>>>24&255,e[56]=L>>>0&255,e[57]=L>>>8&255,e[58]=L>>>16&255,e[59]=L>>>24&255,e[60]=P>>>0&255,e[61]=P>>>8&255,e[62]=P>>>16&255,e[63]=P>>>24&255}(e,t,r,n)}function E(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,f=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,l=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,d=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,E=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,_=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,b=0;b<20;b+=2)o^=(i=(m^=(i=(p^=(i=(f^=(i=o+m|0)<<7|i>>>25)+o|0)<<9|i>>>23)+f|0)<<13|i>>>19)+p|0)<<18|i>>>14,u^=(i=(s^=(i=(v^=(i=(d^=(i=u+s|0)<<7|i>>>25)+u|0)<<9|i>>>23)+d|0)<<13|i>>>19)+v|0)<<18|i>>>14,g^=(i=(h^=(i=(a^=(i=(E^=(i=g+h|0)<<7|i>>>25)+g|0)<<9|i>>>23)+E|0)<<13|i>>>19)+a|0)<<18|i>>>14,_^=(i=(y^=(i=(l^=(i=(c^=(i=_+y|0)<<7|i>>>25)+_|0)<<9|i>>>23)+c|0)<<13|i>>>19)+l|0)<<18|i>>>14,o^=(i=(c^=(i=(a^=(i=(s^=(i=o+c|0)<<7|i>>>25)+o|0)<<9|i>>>23)+s|0)<<13|i>>>19)+a|0)<<18|i>>>14,u^=(i=(f^=(i=(l^=(i=(h^=(i=u+f|0)<<7|i>>>25)+u|0)<<9|i>>>23)+h|0)<<13|i>>>19)+l|0)<<18|i>>>14,g^=(i=(d^=(i=(p^=(i=(y^=(i=g+d|0)<<7|i>>>25)+g|0)<<9|i>>>23)+y|0)<<13|i>>>19)+p|0)<<18|i>>>14,_^=(i=(E^=(i=(v^=(i=(m^=(i=_+E|0)<<7|i>>>25)+_|0)<<9|i>>>23)+m|0)<<13|i>>>19)+v|0)<<18|i>>>14;e[0]=o>>>0&255,e[1]=o>>>8&255,e[2]=o>>>16&255,e[3]=o>>>24&255,e[4]=u>>>0&255,e[5]=u>>>8&255,e[6]=u>>>16&255,e[7]=u>>>24&255,e[8]=g>>>0&255,e[9]=g>>>8&255,e[10]=g>>>16&255,e[11]=g>>>24&255,e[12]=_>>>0&255,e[13]=_>>>8&255,e[14]=_>>>16&255,e[15]=_>>>24&255,e[16]=h>>>0&255,e[17]=h>>>8&255,e[18]=h>>>16&255,e[19]=h>>>24&255,e[20]=l>>>0&255,e[21]=l>>>8&255,e[22]=l>>>16&255,e[23]=l>>>24&255,e[24]=p>>>0&255,e[25]=p>>>8&255,e[26]=p>>>16&255,e[27]=p>>>24&255,e[28]=d>>>0&255,e[29]=d>>>8&255,e[30]=d>>>16&255,e[31]=d>>>24&255}(e,t,r,n)}var _=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function b(e,t,r,n,i,o,s){var a,c,f=new Uint8Array(16),u=new Uint8Array(64);for(c=0;c<16;c++)f[c]=0;for(c=0;c<8;c++)f[c]=o[c];for(;i>=64;){for(v(u,f,s,_),c=0;c<64;c++)e[t+c]=r[n+c]^u[c];for(a=1,c=8;c<16;c++)a=a+(255&f[c])|0,f[c]=255&a,a>>>=8;i-=64,t+=64,n+=64}if(i>0)for(v(u,f,s,_),c=0;c<i;c++)e[t+c]=r[n+c]^u[c];return 0}function w(e,t,r,n,i){var o,s,a=new Uint8Array(16),c=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=n[s];for(;r>=64;){for(v(c,a,i,_),s=0;s<64;s++)e[t+s]=c[s];for(o=1,s=8;s<16;s++)o=o+(255&a[s])|0,a[s]=255&o,o>>>=8;r-=64,t+=64}if(r>0)for(v(c,a,i,_),s=0;s<r;s++)e[t+s]=c[s];return 0}function S(e,t,r,n,i){var o=new Uint8Array(32);E(o,n,i,_);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=n[a+16];return w(e,t,r,s,o)}function A(e,t,r,n,i,o,s){var a=new Uint8Array(32);E(a,o,s,_);for(var c=new Uint8Array(8),f=0;f<8;f++)c[f]=o[f+16];return b(e,t,r,n,i,c,a)}var k=function(e){var t,r,n,i,o,s,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|i<<9),o=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,s=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(o>>>14|s<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(s>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function T(e,t,r,n,i,o){var s=new k(o);return s.update(r,n,i),s.finish(e,t),0}function O(e,t,r,n,i,o){var s=new Uint8Array(16);return T(s,0,r,n,i,o),y(e,t,s,0)}function B(e,t,r,n,i){var o;if(r<32)return-1;for(A(e,0,t,0,r,n,i),T(e,16,e,32,r-32,e),o=0;o<16;o++)e[o]=0;return 0}function R(e,t,r,n,i){var o,s=new Uint8Array(32);if(r<32)return-1;if(S(s,0,32,n,i),0!==O(t,16,t,32,r-32,s))return-1;for(A(e,0,t,0,r,n,i),o=0;o<32;o++)e[o]=0;return 0}function U(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function N(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function C(e,t,r){for(var n,i=~(r-1),o=0;o<16;o++)n=i&(e[o]^t[o]),e[o]^=n,t[o]^=n}function I(e,r){var n,i,o,s=t(),a=t();for(n=0;n<16;n++)a[n]=r[n];for(N(a),N(a),N(a),i=0;i<2;i++){for(s[0]=a[0]-65517,n=1;n<15;n++)s[n]=a[n]-65535-(s[n-1]>>16&1),s[n-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),o=s[15]>>16&1,s[14]&=65535,C(a,s,1-o)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function D(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return I(r,e),I(n,t),m(r,0,n,0)}function L(e){var t=new Uint8Array(32);return I(t,e),1&t[0]}function P(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function x(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function H(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function M(e,t,r){var n,i,o=0,s=0,a=0,c=0,f=0,u=0,h=0,l=0,p=0,d=0,g=0,y=0,m=0,v=0,E=0,_=0,b=0,w=0,S=0,A=0,k=0,T=0,O=0,B=0,R=0,U=0,N=0,C=0,I=0,D=0,L=0,P=r[0],x=r[1],H=r[2],M=r[3],K=r[4],G=r[5],F=r[6],q=r[7],j=r[8],W=r[9],X=r[10],V=r[11],Q=r[12],Y=r[13],z=r[14],$=r[15];o+=(n=t[0])*P,s+=n*x,a+=n*H,c+=n*M,f+=n*K,u+=n*G,h+=n*F,l+=n*q,p+=n*j,d+=n*W,g+=n*X,y+=n*V,m+=n*Q,v+=n*Y,E+=n*z,_+=n*$,s+=(n=t[1])*P,a+=n*x,c+=n*H,f+=n*M,u+=n*K,h+=n*G,l+=n*F,p+=n*q,d+=n*j,g+=n*W,y+=n*X,m+=n*V,v+=n*Q,E+=n*Y,_+=n*z,b+=n*$,a+=(n=t[2])*P,c+=n*x,f+=n*H,u+=n*M,h+=n*K,l+=n*G,p+=n*F,d+=n*q,g+=n*j,y+=n*W,m+=n*X,v+=n*V,E+=n*Q,_+=n*Y,b+=n*z,w+=n*$,c+=(n=t[3])*P,f+=n*x,u+=n*H,h+=n*M,l+=n*K,p+=n*G,d+=n*F,g+=n*q,y+=n*j,m+=n*W,v+=n*X,E+=n*V,_+=n*Q,b+=n*Y,w+=n*z,S+=n*$,f+=(n=t[4])*P,u+=n*x,h+=n*H,l+=n*M,p+=n*K,d+=n*G,g+=n*F,y+=n*q,m+=n*j,v+=n*W,E+=n*X,_+=n*V,b+=n*Q,w+=n*Y,S+=n*z,A+=n*$,u+=(n=t[5])*P,h+=n*x,l+=n*H,p+=n*M,d+=n*K,g+=n*G,y+=n*F,m+=n*q,v+=n*j,E+=n*W,_+=n*X,b+=n*V,w+=n*Q,S+=n*Y,A+=n*z,k+=n*$,h+=(n=t[6])*P,l+=n*x,p+=n*H,d+=n*M,g+=n*K,y+=n*G,m+=n*F,v+=n*q,E+=n*j,_+=n*W,b+=n*X,w+=n*V,S+=n*Q,A+=n*Y,k+=n*z,T+=n*$,l+=(n=t[7])*P,p+=n*x,d+=n*H,g+=n*M,y+=n*K,m+=n*G,v+=n*F,E+=n*q,_+=n*j,b+=n*W,w+=n*X,S+=n*V,A+=n*Q,k+=n*Y,T+=n*z,O+=n*$,p+=(n=t[8])*P,d+=n*x,g+=n*H,y+=n*M,m+=n*K,v+=n*G,E+=n*F,_+=n*q,b+=n*j,w+=n*W,S+=n*X,A+=n*V,k+=n*Q,T+=n*Y,O+=n*z,B+=n*$,d+=(n=t[9])*P,g+=n*x,y+=n*H,m+=n*M,v+=n*K,E+=n*G,_+=n*F,b+=n*q,w+=n*j,S+=n*W,A+=n*X,k+=n*V,T+=n*Q,O+=n*Y,B+=n*z,R+=n*$,g+=(n=t[10])*P,y+=n*x,m+=n*H,v+=n*M,E+=n*K,_+=n*G,b+=n*F,w+=n*q,S+=n*j,A+=n*W,k+=n*X,T+=n*V,O+=n*Q,B+=n*Y,R+=n*z,U+=n*$,y+=(n=t[11])*P,m+=n*x,v+=n*H,E+=n*M,_+=n*K,b+=n*G,w+=n*F,S+=n*q,A+=n*j,k+=n*W,T+=n*X,O+=n*V,B+=n*Q,R+=n*Y,U+=n*z,N+=n*$,m+=(n=t[12])*P,v+=n*x,E+=n*H,_+=n*M,b+=n*K,w+=n*G,S+=n*F,A+=n*q,k+=n*j,T+=n*W,O+=n*X,B+=n*V,R+=n*Q,U+=n*Y,N+=n*z,C+=n*$,v+=(n=t[13])*P,E+=n*x,_+=n*H,b+=n*M,w+=n*K,S+=n*G,A+=n*F,k+=n*q,T+=n*j,O+=n*W,B+=n*X,R+=n*V,U+=n*Q,N+=n*Y,C+=n*z,I+=n*$,E+=(n=t[14])*P,_+=n*x,b+=n*H,w+=n*M,S+=n*K,A+=n*G,k+=n*F,T+=n*q,O+=n*j,B+=n*W,R+=n*X,U+=n*V,N+=n*Q,C+=n*Y,I+=n*z,D+=n*$,_+=(n=t[15])*P,s+=38*(w+=n*H),a+=38*(S+=n*M),c+=38*(A+=n*K),f+=38*(k+=n*G),u+=38*(T+=n*F),h+=38*(O+=n*q),l+=38*(B+=n*j),p+=38*(R+=n*W),d+=38*(U+=n*X),g+=38*(N+=n*V),y+=38*(C+=n*Q),m+=38*(I+=n*Y),v+=38*(D+=n*z),E+=38*(L+=n*$),o=(n=(o+=38*(b+=n*x))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),E=(n=E+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),o=(n=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),E=(n=E+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),o+=i-1+37*(i-1),e[0]=o,e[1]=s,e[2]=a,e[3]=c,e[4]=f,e[5]=u,e[6]=h,e[7]=l,e[8]=p,e[9]=d,e[10]=g,e[11]=y,e[12]=m,e[13]=v,e[14]=E,e[15]=_}function K(e,t){M(e,t,t)}function G(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)K(i,i),2!==n&&4!==n&&M(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function F(e,r,n){var i,o,s=new Uint8Array(32),a=new Float64Array(80),f=t(),u=t(),h=t(),l=t(),p=t(),d=t();for(o=0;o<31;o++)s[o]=r[o];for(s[31]=127&r[31]|64,s[0]&=248,P(a,n),o=0;o<16;o++)u[o]=a[o],l[o]=f[o]=h[o]=0;for(f[0]=l[0]=1,o=254;o>=0;--o)C(f,u,i=s[o>>>3]>>>(7&o)&1),C(h,l,i),x(p,f,h),H(f,f,h),x(h,u,l),H(u,u,l),K(l,p),K(d,f),M(f,h,f),M(h,u,p),x(p,f,h),H(f,f,h),K(u,f),H(h,l,d),M(f,h,c),x(f,f,l),M(h,h,f),M(f,l,d),M(l,u,a),K(u,p),C(f,u,i),C(h,l,i);for(o=0;o<16;o++)a[o+16]=f[o],a[o+32]=h[o],a[o+48]=u[o],a[o+64]=l[o];var g=a.subarray(32),y=a.subarray(16);return G(g,g),M(y,y,g),I(e,y),0}function q(e,t){return F(e,t,o)}function j(e,t){return n(t,32),q(e,t)}function W(e,t,r){var n=new Uint8Array(32);return F(n,r,t),E(e,i,n,_)}k.prototype.blocks=function(e,t,r){for(var n,i,o,s,a,c,f,u,h,l,p,d,g,y,m,v,E,_,b,w=this.fin?0:2048,S=this.h[0],A=this.h[1],k=this.h[2],T=this.h[3],O=this.h[4],B=this.h[5],R=this.h[6],U=this.h[7],N=this.h[8],C=this.h[9],I=this.r[0],D=this.r[1],L=this.r[2],P=this.r[3],x=this.r[4],H=this.r[5],M=this.r[6],K=this.r[7],G=this.r[8],F=this.r[9];r>=16;)l=h=0,l+=(S+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*I,l+=(A+=8191&(n>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*F),l+=(k+=8191&(i>>>10|(o=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*G),l+=(T+=8191&(o>>>7|(s=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*K),h=(l+=(O+=8191&(s>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*M))>>>13,l&=8191,l+=(B+=a>>>1&8191)*(5*H),l+=(R+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*x),l+=(U+=8191&(c>>>11|(f=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*P),l+=(N+=8191&(f>>>8|(u=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*L),p=h+=(l+=(C+=u>>>5|w)*(5*D))>>>13,p+=S*D,p+=A*I,p+=k*(5*F),p+=T*(5*G),h=(p+=O*(5*K))>>>13,p&=8191,p+=B*(5*M),p+=R*(5*H),p+=U*(5*x),p+=N*(5*P),h+=(p+=C*(5*L))>>>13,p&=8191,d=h,d+=S*L,d+=A*D,d+=k*I,d+=T*(5*F),h=(d+=O*(5*G))>>>13,d&=8191,d+=B*(5*K),d+=R*(5*M),d+=U*(5*H),d+=N*(5*x),g=h+=(d+=C*(5*P))>>>13,g+=S*P,g+=A*L,g+=k*D,g+=T*I,h=(g+=O*(5*F))>>>13,g&=8191,g+=B*(5*G),g+=R*(5*K),g+=U*(5*M),g+=N*(5*H),y=h+=(g+=C*(5*x))>>>13,y+=S*x,y+=A*P,y+=k*L,y+=T*D,h=(y+=O*I)>>>13,y&=8191,y+=B*(5*F),y+=R*(5*G),y+=U*(5*K),y+=N*(5*M),m=h+=(y+=C*(5*H))>>>13,m+=S*H,m+=A*x,m+=k*P,m+=T*L,h=(m+=O*D)>>>13,m&=8191,m+=B*I,m+=R*(5*F),m+=U*(5*G),m+=N*(5*K),v=h+=(m+=C*(5*M))>>>13,v+=S*M,v+=A*H,v+=k*x,v+=T*P,h=(v+=O*L)>>>13,v&=8191,v+=B*D,v+=R*I,v+=U*(5*F),v+=N*(5*G),E=h+=(v+=C*(5*K))>>>13,E+=S*K,E+=A*M,E+=k*H,E+=T*x,h=(E+=O*P)>>>13,E&=8191,E+=B*L,E+=R*D,E+=U*I,E+=N*(5*F),_=h+=(E+=C*(5*G))>>>13,_+=S*G,_+=A*K,_+=k*M,_+=T*H,h=(_+=O*x)>>>13,_&=8191,_+=B*P,_+=R*L,_+=U*D,_+=N*I,b=h+=(_+=C*(5*F))>>>13,b+=S*F,b+=A*G,b+=k*K,b+=T*M,h=(b+=O*H)>>>13,b&=8191,b+=B*x,b+=R*P,b+=U*L,b+=N*D,S=l=8191&(h=(h=((h+=(b+=C*I)>>>13)<<2)+h|0)+(l&=8191)|0),A=p+=h>>>=13,k=d&=8191,T=g&=8191,O=y&=8191,B=m&=8191,R=v&=8191,U=E&=8191,N=_&=8191,C=b&=8191,t+=16,r-=16;this.h[0]=S,this.h[1]=A,this.h[2]=k,this.h[3]=T,this.h[4]=O,this.h[5]=B,this.h[6]=R,this.h[7]=U,this.h[8]=N,this.h[9]=C},k.prototype.finish=function(e,t){var r,n,i,o,s=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=r,r=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,s[0]=this.h[0]+5,r=s[0]>>>13,s[0]&=8191,o=1;o<10;o++)s[o]=this.h[o]+r,r=s[o]>>>13,s[o]&=8191;for(s[9]-=8192,n=(1^r)-1,o=0;o<10;o++)s[o]&=n;for(n=~n,o=0;o<10;o++)this.h[o]=this.h[o]&n|s[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;o<8;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},k.prototype.update=function(e,t,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(e,t,i),t+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var X=B,V=R;var Q=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Y(e,t,r,n){for(var i,o,s,a,c,f,u,h,l,p,d,g,y,m,v,E,_,b,w,S,A,k,T,O,B,R,U=new Int32Array(16),N=new Int32Array(16),C=e[0],I=e[1],D=e[2],L=e[3],P=e[4],x=e[5],H=e[6],M=e[7],K=t[0],G=t[1],F=t[2],q=t[3],j=t[4],W=t[5],X=t[6],V=t[7],Y=0;n>=128;){for(w=0;w<16;w++)S=8*w+Y,U[w]=r[S+0]<<24|r[S+1]<<16|r[S+2]<<8|r[S+3],N[w]=r[S+4]<<24|r[S+5]<<16|r[S+6]<<8|r[S+7];for(w=0;w<80;w++)if(i=C,o=I,s=D,a=L,c=P,f=x,u=H,M,l=K,p=G,d=F,g=q,y=j,m=W,v=X,V,T=65535&(k=V),O=k>>>16,B=65535&(A=M),R=A>>>16,T+=65535&(k=(j>>>14|P<<18)^(j>>>18|P<<14)^(P>>>9|j<<23)),O+=k>>>16,B+=65535&(A=(P>>>14|j<<18)^(P>>>18|j<<14)^(j>>>9|P<<23)),R+=A>>>16,T+=65535&(k=j&W^~j&X),O+=k>>>16,B+=65535&(A=P&x^~P&H),R+=A>>>16,T+=65535&(k=Q[2*w+1]),O+=k>>>16,B+=65535&(A=Q[2*w]),R+=A>>>16,A=U[w%16],O+=(k=N[w%16])>>>16,B+=65535&A,R+=A>>>16,B+=(O+=(T+=65535&k)>>>16)>>>16,T=65535&(k=b=65535&T|O<<16),O=k>>>16,B=65535&(A=_=65535&B|(R+=B>>>16)<<16),R=A>>>16,T+=65535&(k=(K>>>28|C<<4)^(C>>>2|K<<30)^(C>>>7|K<<25)),O+=k>>>16,B+=65535&(A=(C>>>28|K<<4)^(K>>>2|C<<30)^(K>>>7|C<<25)),R+=A>>>16,O+=(k=K&G^K&F^G&F)>>>16,B+=65535&(A=C&I^C&D^I&D),R+=A>>>16,h=65535&(B+=(O+=(T+=65535&k)>>>16)>>>16)|(R+=B>>>16)<<16,E=65535&T|O<<16,T=65535&(k=g),O=k>>>16,B=65535&(A=a),R=A>>>16,O+=(k=b)>>>16,B+=65535&(A=_),R+=A>>>16,I=i,D=o,L=s,P=a=65535&(B+=(O+=(T+=65535&k)>>>16)>>>16)|(R+=B>>>16)<<16,x=c,H=f,M=u,C=h,G=l,F=p,q=d,j=g=65535&T|O<<16,W=y,X=m,V=v,K=E,w%16==15)for(S=0;S<16;S++)A=U[S],T=65535&(k=N[S]),O=k>>>16,B=65535&A,R=A>>>16,A=U[(S+9)%16],T+=65535&(k=N[(S+9)%16]),O+=k>>>16,B+=65535&A,R+=A>>>16,_=U[(S+1)%16],T+=65535&(k=((b=N[(S+1)%16])>>>1|_<<31)^(b>>>8|_<<24)^(b>>>7|_<<25)),O+=k>>>16,B+=65535&(A=(_>>>1|b<<31)^(_>>>8|b<<24)^_>>>7),R+=A>>>16,_=U[(S+14)%16],O+=(k=((b=N[(S+14)%16])>>>19|_<<13)^(_>>>29|b<<3)^(b>>>6|_<<26))>>>16,B+=65535&(A=(_>>>19|b<<13)^(b>>>29|_<<3)^_>>>6),R+=A>>>16,R+=(B+=(O+=(T+=65535&k)>>>16)>>>16)>>>16,U[S]=65535&B|R<<16,N[S]=65535&T|O<<16;T=65535&(k=K),O=k>>>16,B=65535&(A=C),R=A>>>16,A=e[0],O+=(k=t[0])>>>16,B+=65535&A,R+=A>>>16,R+=(B+=(O+=(T+=65535&k)>>>16)>>>16)>>>16,e[0]=C=65535&B|R<<16,t[0]=K=65535&T|O<<16,T=65535&(k=G),O=k>>>16,B=65535&(A=I),R=A>>>16,A=e[1],O+=(k=t[1])>>>16,B+=65535&A,R+=A>>>16,R+=(B+=(O+=(T+=65535&k)>>>16)>>>16)>>>16,e[1]=I=65535&B|R<<16,t[1]=G=65535&T|O<<16,T=65535&(k=F),O=k>>>16,B=65535&(A=D),R=A>>>16,A=e[2],O+=(k=t[2])>>>16,B+=65535&A,R+=A>>>16,R+=(B+=(O+=(T+=65535&k)>>>16)>>>16)>>>16,e[2]=D=65535&B|R<<16,t[2]=F=65535&T|O<<16,T=65535&(k=q),O=k>>>16,B=65535&(A=L),R=A>>>16,A=e[3],O+=(k=t[3])>>>16,B+=65535&A,R+=A>>>16,R+=(B+=(O+=(T+=65535&k)>>>16)>>>16)>>>16,e[3]=L=65535&B|R<<16,t[3]=q=65535&T|O<<16,T=65535&(k=j),O=k>>>16,B=65535&(A=P),R=A>>>16,A=e[4],O+=(k=t[4])>>>16,B+=65535&A,R+=A>>>16,R+=(B+=(O+=(T+=65535&k)>>>16)>>>16)>>>16,e[4]=P=65535&B|R<<16,t[4]=j=65535&T|O<<16,T=65535&(k=W),O=k>>>16,B=65535&(A=x),R=A>>>16,A=e[5],O+=(k=t[5])>>>16,B+=65535&A,R+=A>>>16,R+=(B+=(O+=(T+=65535&k)>>>16)>>>16)>>>16,e[5]=x=65535&B|R<<16,t[5]=W=65535&T|O<<16,T=65535&(k=X),O=k>>>16,B=65535&(A=H),R=A>>>16,A=e[6],O+=(k=t[6])>>>16,B+=65535&A,R+=A>>>16,R+=(B+=(O+=(T+=65535&k)>>>16)>>>16)>>>16,e[6]=H=65535&B|R<<16,t[6]=X=65535&T|O<<16,T=65535&(k=V),O=k>>>16,B=65535&(A=M),R=A>>>16,A=e[7],O+=(k=t[7])>>>16,B+=65535&A,R+=A>>>16,R+=(B+=(O+=(T+=65535&k)>>>16)>>>16)>>>16,e[7]=M=65535&B|R<<16,t[7]=V=65535&T|O<<16,Y+=128,n-=128}return n}function z(e,t,r){var n,i=new Int32Array(8),o=new Int32Array(8),s=new Uint8Array(256),a=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,Y(i,o,t,r),r%=128,n=0;n<r;n++)s[n]=t[a-r+n];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,d(s,r-8,a/536870912|0,a<<3),Y(i,o,s,r),n=0;n<8;n++)d(e,8*n,i[n],o[n]);return 0}function $(e,r){var n=t(),i=t(),o=t(),s=t(),a=t(),c=t(),f=t(),h=t(),l=t();H(n,e[1],e[0]),H(l,r[1],r[0]),M(n,n,l),x(i,e[0],e[1]),x(l,r[0],r[1]),M(i,i,l),M(o,e[3],r[3]),M(o,o,u),M(s,e[2],r[2]),x(s,s,s),H(a,i,n),H(c,s,o),x(f,s,o),x(h,i,n),M(e[0],a,c),M(e[1],h,f),M(e[2],f,c),M(e[3],a,h)}function Z(e,t,r){var n;for(n=0;n<4;n++)C(e[n],t[n],r)}function J(e,r){var n=t(),i=t(),o=t();G(o,r[2]),M(n,r[0],o),M(i,r[1],o),I(e,i),e[31]^=L(n)<<7}function ee(e,t,r){var n,i;for(U(e[0],s),U(e[1],a),U(e[2],a),U(e[3],s),i=255;i>=0;--i)Z(e,t,n=r[i/8|0]>>(7&i)&1),$(t,e),$(e,e),Z(e,t,n)}function te(e,r){var n=[t(),t(),t(),t()];U(n[0],h),U(n[1],l),U(n[2],a),M(n[3],h,l),ee(e,n,r)}function re(e,r,i){var o,s=new Uint8Array(64),a=[t(),t(),t(),t()];for(i||n(r,32),z(s,r,32),s[0]&=248,s[31]&=127,s[31]|=64,te(a,s),J(e,a),o=0;o<32;o++)r[o+32]=e[o];return 0}var ne=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ie(e,t){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)t[i]+=r-16*t[n]*ne[i-(n-32)],r=t[i]+128>>8,t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;i++)t[i]+=r-(t[31]>>4)*ne[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*ne[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function oe(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ie(e,r)}function se(e,r,n,i){var o,s,a=new Uint8Array(64),c=new Uint8Array(64),f=new Uint8Array(64),u=new Float64Array(64),h=[t(),t(),t(),t()];z(a,i,32),a[0]&=248,a[31]&=127,a[31]|=64;var l=n+64;for(o=0;o<n;o++)e[64+o]=r[o];for(o=0;o<32;o++)e[32+o]=a[32+o];for(z(f,e.subarray(32),n+32),oe(f),te(h,f),J(e,h),o=32;o<64;o++)e[o]=i[o];for(z(c,e,n+64),oe(c),o=0;o<64;o++)u[o]=0;for(o=0;o<32;o++)u[o]=f[o];for(o=0;o<32;o++)for(s=0;s<32;s++)u[o+s]+=c[o]*a[s];return ie(e.subarray(32),u),l}function ae(e,r){var n=t(),i=t(),o=t(),c=t(),u=t(),h=t(),l=t();return U(e[2],a),P(e[1],r),K(o,e[1]),M(c,o,f),H(o,o,e[2]),x(c,e[2],c),K(u,c),K(h,u),M(l,h,u),M(n,l,o),M(n,n,c),function(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)K(i,i),1!==n&&M(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}(n,n),M(n,n,o),M(n,n,c),M(n,n,c),M(e[0],n,c),K(i,e[0]),M(i,i,c),D(i,o)&&M(e[0],e[0],p),K(i,e[0]),M(i,i,c),D(i,o)?-1:(L(e[0])===r[31]>>7&&H(e[0],s,e[0]),M(e[3],e[0],e[1]),0)}function ce(e,r,n,i){var o,s=new Uint8Array(32),a=new Uint8Array(64),c=[t(),t(),t(),t()],f=[t(),t(),t(),t()];if(-1,n<64)return-1;if(ae(f,i))return-1;for(o=0;o<n;o++)e[o]=r[o];for(o=0;o<32;o++)e[o+32]=i[o];if(z(a,e,n),oe(a),ee(c,f,a),te(f,r.subarray(32)),$(c,f),J(s,c),n-=64,m(r,0,s,0)){for(o=0;o<n;o++)e[o]=0;return-1}for(o=0;o<n;o++)e[o]=r[o+64];return n}function fe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function ue(){var e,t;for(t=0;t<arguments.length;t++)if("[object Uint8Array]"!==(e=Object.prototype.toString.call(arguments[t])))throw new TypeError("unexpected type "+e+", use Uint8Array")}function he(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:E,crypto_stream_xor:A,crypto_stream:S,crypto_stream_salsa20_xor:b,crypto_stream_salsa20:w,crypto_onetimeauth:T,crypto_onetimeauth_verify:O,crypto_verify_16:y,crypto_verify_32:m,crypto_secretbox:B,crypto_secretbox_open:R,crypto_scalarmult:F,crypto_scalarmult_base:q,crypto_box_beforenm:W,crypto_box_afternm:X,crypto_box:function(e,t,r,n,i,o){var s=new Uint8Array(32);return W(s,i,o),X(e,t,r,n,s)},crypto_box_open:function(e,t,r,n,i,o){var s=new Uint8Array(32);return W(s,i,o),V(e,t,r,n,s)},crypto_box_keypair:j,crypto_hash:z,crypto_sign:se,crypto_sign_keypair:re,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},e.util||(e.util={},e.util.decodeUTF8=e.util.encodeUTF8=e.util.encodeBase64=e.util.decodeBase64=function(){throw new Error("nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js")}),e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,r){ue(e,t,r),fe(r,t);for(var n=new Uint8Array(32+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+32]=e[o];return B(i,n,n.length,t,r),i.subarray(16)},e.secretbox.open=function(e,t,r){ue(e,t,r),fe(r,t);for(var n=new Uint8Array(16+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+16]=e[o];return!(n.length<32)&&(0===R(i,n,n.length,t,r)&&i.subarray(32))},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(ue(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return F(r,e,t),r},e.scalarMult.base=function(e){if(ue(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return q(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox(t,r,o)},e.box.before=function(e,t){ue(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return W(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox.open(t,r,o)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return j(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(ue(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return q(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(ue(e,t),64!==t.length)throw new Error("bad secret key size");var r=new Uint8Array(64+e.length);return se(r,e,e.length,t),r},e.sign.open=function(e,t){if(2!==arguments.length)throw new Error("nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?");if(ue(e,t),32!==t.length)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=ce(r,e,e.length,t);if(n<0)return null;for(var i=new Uint8Array(n),o=0;o<i.length;o++)i[o]=r[o];return i},e.sign.detached=function(t,r){for(var n=e.sign(t,r),i=new Uint8Array(64),o=0;o<i.length;o++)i[o]=n[o];return i},e.sign.detached.verify=function(e,t,r){if(ue(e,t,r),64!==t.length)throw new Error("bad signature size");if(32!==r.length)throw new Error("bad public key size");var n,i=new Uint8Array(64+e.length),o=new Uint8Array(64+e.length);for(n=0;n<64;n++)i[n]=t[n];for(n=0;n<e.length;n++)i[n+64]=e[n];return ce(o,i,i.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(64);return re(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(ue(e),64!==e.length)throw new Error("bad secret key size");for(var t=new Uint8Array(32),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(ue(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(32),r=new Uint8Array(64),n=0;n<32;n++)r[n]=e[n];return re(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=32,e.sign.secretKeyLength=64,e.sign.seedLength=32,e.sign.signatureLength=64,e.hash=function(e){ue(e);var t=new Uint8Array(64);return z(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return ue(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===g(e,0,t,0,e.length))},e.setPRNG=function(e){n=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG((function(e,r){var n,i=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(i.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=i[n];he(i)}))}else(t=r(7))&&t.randomBytes&&e.setPRNG((function(e,r){var n,i=t.randomBytes(r);for(n=0;n<r;n++)e[n]=i[n];he(i)}))}()}(e.exports?e.exports:self.nacl=self.nacl||{})},function(e,t){function r(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function n(){return new r(null)}r.prototype.am=function(e,t,r,n,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var c=16383&this[e],f=this[e++]>>14,u=a*c+f*s;i=((c=s*c+((16383&u)<<14)+r[n]+i)>>28)+(u>>14)+a*f,r[n++]=268435455&c}return i},r.prototype.DB=28,r.prototype.DM=268435455,r.prototype.DV=1<<28;r.prototype.FV=Math.pow(2,52),r.prototype.F1=24,r.prototype.F2=4;var i,o,s=new Array;for(i="0".charCodeAt(0),o=0;o<=9;++o)s[i++]=o;for(i="a".charCodeAt(0),o=10;o<36;++o)s[i++]=o;for(i="A".charCodeAt(0),o=10;o<36;++o)s[i++]=o;function a(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function c(e,t){var r=s[e.charCodeAt(t)];return null==r?-1:r}function f(e){var t=n();return t.fromInt(e),t}function u(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function h(e){this.m=e}function l(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function p(e,t){return e&t}function d(e,t){return e|t}function g(e,t){return e^t}function y(e,t){return e&~t}function m(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function v(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function E(){}function _(e){return e}function b(e){this.r2=n(),this.q3=n(),r.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}h.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},h.prototype.revert=function(e){return e},h.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},h.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},h.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},l.prototype.convert=function(e){var t=n();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(r.ZERO)>0&&this.m.subTo(t,t),t},l.prototype.revert=function(e){var t=n();return e.copyTo(t),this.reduce(t),t},l.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},l.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},l.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},r.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},r.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},r.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var i=e.length,o=!1,s=0;--i>=0;){var a=8==n?255&e[i]:c(e,i);a<0?"-"==e.charAt(i)&&(o=!0):(o=!1,0==s?this[this.t++]=a:s+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=n)>=this.DB&&(s-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&r.ZERO.subTo(this,this)},r.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},r.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},r.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},r.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t[r+s+1]=this[r]>>i|a,a=(this[r]&o)<<n;for(r=s-1;r>=0;--r)t[r]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},r.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,o=(1<<n)-1;t[0]=this[r]>>n;for(var s=r+1;s<this.t;++s)t[s-r-1]|=(this[s]&o)<<i,t[s-r]=this[s]>>n;n>0&&(t[this.t-r-1]|=(this.s&o)<<i),t.t=this.t-r,t.clamp()}},r.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()},r.prototype.multiplyTo=function(e,t){var n=this.abs(),i=e.abs(),o=n.t;for(t.t=o+i.t;--o>=0;)t[o]=0;for(o=0;o<i.t;++o)t[o+n.t]=n.am(0,i[o],t,o,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&r.ZERO.subTo(t,t)},r.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},r.prototype.divRemTo=function(e,t,i){var o=e.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=t&&t.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var a=n(),c=this.s,f=e.s,h=this.DB-u(o[o.t-1]);h>0?(o.lShiftTo(h,a),s.lShiftTo(h,i)):(o.copyTo(a),s.copyTo(i));var l=a.t,p=a[l-1];if(0!=p){var d=p*(1<<this.F1)+(l>1?a[l-2]>>this.F2:0),g=this.FV/d,y=(1<<this.F1)/d,m=1<<this.F2,v=i.t,E=v-l,_=null==t?n():t;for(a.dlShiftTo(E,_),i.compareTo(_)>=0&&(i[i.t++]=1,i.subTo(_,i)),r.ONE.dlShiftTo(l,_),_.subTo(a,a);a.t<l;)a[a.t++]=0;for(;--E>=0;){var b=i[--v]==p?this.DM:Math.floor(i[v]*g+(i[v-1]+m)*y);if((i[v]+=a.am(0,b,i,E,0,l))<b)for(a.dlShiftTo(E,_),i.subTo(_,i);i[v]<--b;)i.subTo(_,i)}null!=t&&(i.drShiftTo(l,t),c!=f&&r.ZERO.subTo(t,t)),i.t=l,i.clamp(),h>0&&i.rShiftTo(h,i),c<0&&r.ZERO.subTo(i,i)}}},r.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},r.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},r.prototype.exp=function(e,t){if(e>4294967295||e<1)return r.ONE;var i=n(),o=n(),s=t.convert(this),a=u(e)-1;for(s.copyTo(i);--a>=0;)if(t.sqrTo(i,o),(e&1<<a)>0)t.mulTo(o,s,i);else{var c=i;i=o,o=c}return t.revert(i)},r.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,o="",s=this.t,c=this.DB-s*this.DB%t;if(s-- >0)for(c<this.DB&&(r=this[s]>>c)>0&&(i=!0,o=a(r));s>=0;)c<t?(r=(this[s]&(1<<c)-1)<<t-c,r|=this[--s]>>(c+=this.DB-t)):(r=this[s]>>(c-=t)&n,c<=0&&(c+=this.DB,--s)),r>0&&(i=!0),i&&(o+=a(r));return i?o:"0"},r.prototype.negate=function(){var e=n();return r.ZERO.subTo(this,e),e},r.prototype.abs=function(){return this.s<0?this.negate():this},r.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},r.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+u(this[this.t-1]^this.s&this.DM)},r.prototype.mod=function(e){var t=n();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(r.ZERO)>0&&e.subTo(t,t),t},r.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new h(t):new l(t),this.exp(e,r)},r.ZERO=f(0),r.ONE=f(1),E.prototype.convert=_,E.prototype.revert=_,E.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},E.prototype.sqrTo=function(e,t){e.squareTo(t)},b.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=n();return e.copyTo(t),this.reduce(t),t},b.prototype.revert=function(e){return e},b.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},b.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},b.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var w=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],S=(1<<26)/w[w.length-1];r.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},r.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),i=f(r),o=n(),s=n(),a="";for(this.divRemTo(i,o,s);o.signum()>0;)a=(r+s.intValue()).toString(e).substr(1)+a,o.divRemTo(i,o,s);return s.intValue().toString(e)+a},r.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),i=Math.pow(t,n),o=!1,s=0,a=0,f=0;f<e.length;++f){var u=c(e,f);u<0?"-"==e.charAt(f)&&0==this.signum()&&(o=!0):(a=t*a+u,++s>=n&&(this.dMultiply(i),this.dAddOffset(a,0),s=0,a=0))}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(a,0)),o&&r.ZERO.subTo(this,this)},r.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(r.ONE.shiftLeft(e-1),d,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(r.ONE.shiftLeft(e-1),this);else{var i=new Array,o=7&e;i.length=1+(e>>3),t.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}},r.prototype.bitwiseTo=function(e,t,r){var n,i,o=Math.min(e.t,this.t);for(n=0;n<o;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=o;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},r.prototype.changeBit=function(e,t){var n=r.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},r.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()},r.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},r.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},r.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,e[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e[i],r,i,0,t-i);r.clamp()},r.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},r.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r},r.prototype.millerRabin=function(e){var t=this.subtract(r.ONE),i=t.getLowestSetBit();if(i<=0)return!1;var o=t.shiftRight(i);(e=e+1>>1)>w.length&&(e=w.length);for(var s=n(),a=0;a<e;++a){s.fromInt(w[Math.floor(Math.random()*w.length)]);var c=s.modPow(o,this);if(0!=c.compareTo(r.ONE)&&0!=c.compareTo(t)){for(var f=1;f++<i&&0!=c.compareTo(t);)if(0==(c=c.modPowInt(2,this)).compareTo(r.ONE))return!1;if(0!=c.compareTo(t))return!1}}return!0},r.prototype.clone=function(){var e=n();return this.copyTo(e),e},r.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},r.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},r.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},r.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},r.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},r.prototype.equals=function(e){return 0==this.compareTo(e)},r.prototype.min=function(e){return this.compareTo(e)<0?this:e},r.prototype.max=function(e){return this.compareTo(e)>0?this:e},r.prototype.and=function(e){var t=n();return this.bitwiseTo(e,p,t),t},r.prototype.or=function(e){var t=n();return this.bitwiseTo(e,d,t),t},r.prototype.xor=function(e){var t=n();return this.bitwiseTo(e,g,t),t},r.prototype.andNot=function(e){var t=n();return this.bitwiseTo(e,y,t),t},r.prototype.not=function(){for(var e=n(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},r.prototype.shiftLeft=function(e){var t=n();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},r.prototype.shiftRight=function(e){var t=n();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},r.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+m(this[e]);return this.s<0?this.t*this.DB:-1},r.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=v(this[r]^t);return e},r.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},r.prototype.setBit=function(e){return this.changeBit(e,d)},r.prototype.clearBit=function(e){return this.changeBit(e,y)},r.prototype.flipBit=function(e){return this.changeBit(e,g)},r.prototype.add=function(e){var t=n();return this.addTo(e,t),t},r.prototype.subtract=function(e){var t=n();return this.subTo(e,t),t},r.prototype.multiply=function(e){var t=n();return this.multiplyTo(e,t),t},r.prototype.divide=function(e){var t=n();return this.divRemTo(e,t,null),t},r.prototype.remainder=function(e){var t=n();return this.divRemTo(e,null,t),t},r.prototype.divideAndRemainder=function(e){var t=n(),r=n();return this.divRemTo(e,t,r),new Array(t,r)},r.prototype.modPow=function(e,t){var r,i,o=e.bitLength(),s=f(1);if(o<=0)return s;r=o<18?1:o<48?3:o<144?4:o<768?5:6,i=o<8?new h(t):t.isEven()?new b(t):new l(t);var a=new Array,c=3,p=r-1,d=(1<<r)-1;if(a[1]=i.convert(this),r>1){var g=n();for(i.sqrTo(a[1],g);c<=d;)a[c]=n(),i.mulTo(g,a[c-2],a[c]),c+=2}var y,m,v=e.t-1,E=!0,_=n();for(o=u(e[v])-1;v>=0;){for(o>=p?y=e[v]>>o-p&d:(y=(e[v]&(1<<o+1)-1)<<p-o,v>0&&(y|=e[v-1]>>this.DB+o-p)),c=r;0==(1&y);)y>>=1,--c;if((o-=c)<0&&(o+=this.DB,--v),E)a[y].copyTo(s),E=!1;else{for(;c>1;)i.sqrTo(s,_),i.sqrTo(_,s),c-=2;c>0?i.sqrTo(s,_):(m=s,s=_,_=m),i.mulTo(_,a[y],s)}for(;v>=0&&0==(e[v]&1<<o);)i.sqrTo(s,_),m=s,s=_,_=m,--o<0&&(o=this.DB-1,--v)}return i.revert(s)},r.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return r.ZERO;for(var n=e.clone(),i=this.clone(),o=f(1),s=f(0),a=f(0),c=f(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),t?(a.isEven()&&c.isEven()||(a.addTo(this,a),c.subTo(e,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);n.compareTo(i)>=0?(n.subTo(i,n),t&&o.subTo(a,o),s.subTo(c,s)):(i.subTo(n,i),t&&a.subTo(o,a),c.subTo(s,c))}return 0!=i.compareTo(r.ONE)?r.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c},r.prototype.pow=function(e){return this.exp(e,new E)},r.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(i<o&&(o=i),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},r.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=w[w.length-1]){for(t=0;t<w.length;++t)if(r[0]==w[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<w.length;){for(var n=w[t],i=t+1;i<w.length&&n<S;)n*=w[i++];for(n=r.modInt(n);t<i;)if(n%w[t++]==0)return!1}return r.millerRabin(e)},r.prototype.square=function(){var e=n();return this.squareTo(e),e},r.prototype.Barrett=b,e.exports=r},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function s(e){var t=h();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){var t="function"==typeof Map?new Map:void 0;return(f=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)})(e)}function u(e,t,r){return(u=h()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&l(i,r.prototype),i}).apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=r(0).inspect;function g(e,t){if(!e)throw new ERR_INTERNAL_ASSERTION(t)}function y(e){for(var t="",r=e.length,n="-"===e[0]?1:0;r>=n+4;r-=3)t="_".concat(e.slice(r-3,r)).concat(t);return"".concat(e.slice(0,r)).concat(t)}function m(e,t){if(g("string"==typeof t,"`thing` has to be of type string"),Array.isArray(e)){var r=e.length;return g(r>0,"At least one expected value needs to be specified"),e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}g.fail=function(e){throw new ERR_INTERNAL_ASSERTION(e)},t.ERR_INTERNAL_ASSERTION=function(e){o(r,e);var t=s(r);function r(e){var n;i(this,r),n=t.call(this),Error.captureStackTrace(c(n),r);var o="This is caused by either a bug in ssh2-streams or incorrect usage of ssh2-streams internals.\nPlease open an issue with this stack trace at https://github.com/mscdex/ssh2-streams/issues\n";return n.message=void 0===e?o:"".concat(e,"\n").concat(o),n}return r}(f(Error));var v=Math.pow(2,32),E=function(){try{return new Function("return 2n ** 32n")()}catch(e){}}();function _(e,t){emitErrorNT(e,t),b(e)}function b(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}t.ERR_OUT_OF_RANGE=function(e){o(r,e);var t=s(r);function r(e,n,o,s){var a;i(this,r),a=t.call(this),Error.captureStackTrace(c(a),r),g(n,'Missing "range" argument');var f,u=s?e:'The value of "'.concat(e,'" is out of range.');return Number.isInteger(o)&&Math.abs(o)>v?f=y(String(o)):"bigint"==typeof o?(f=String(o),(o>E||o<-E)&&(f=y(f)),f+="n"):f=d(o),u+=" It must be ".concat(n,". Received ").concat(f),a.message=u,a}return r}(f(RangeError)),t.ERR_INVALID_ARG_TYPE=function(e){o(r,e);var t=s(r);function r(e,o,s){var a,f,u;if(i(this,r),a=t.call(this),Error.captureStackTrace(c(a),r),g("string"==typeof e,"'name' must be a string"),"string"==typeof o&&o.startsWith("not ")?(f="must not be",o=o.replace(/^not /,"")):f="must be",e.endsWith(" argument"))u="The ".concat(e," ").concat(f," ").concat(m(o,"type"));else{var h=e.includes(".")?"property":"argument";u='The "'.concat(e,'" ').concat(h," ").concat(f," ").concat(m(o,"type"))}return u+=". Received type ".concat(n(s)),a.message=u,a}return r}(f(TypeError)),t.validateNumber=function(e,t){if("number"!=typeof e)throw new ERR_INVALID_ARG_TYPE(t,"number",e)},t.destroyImpl=function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,e)):process.nextTick(emitErrorNT,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted?process.nextTick(b,r):(r._writableState.errorEmitted=!0,process.nextTick(_,r,e)):process.nextTick(_,r,e):t?(process.nextTick(b,r),t(e)):process.nextTick(b,r)})),this)}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(7),o=r(63),s=r(4).Transform,a=r(0).inherits,c=r(0).inspect,f=r(64),u=r(14).Ber,h=r(5).readUInt32BE,l=r(5).writeUInt32BE,p=r(17),d=r(1),g=d.iv_inc,y=d.readString,m=d.readInt,v=d.DSASigBERToBare,E=d.ECDSASigASN1ToSSH,_=d.sigSSHToASN1,b=r(26).parseDERKey,w=p.CIPHER_INFO,S=p.HMAC_INFO,A=p.MESSAGE,k=(p.DYNAMIC_KEXDH_MESSAGE,p.KEXDH_MESSAGE,p.ALGORITHMS),T=p.DISCONNECT_REASON,O=p.CHANNEL_OPEN_FAILURE,B=p.SSH_TO_OPENSSL,R=p.TERMINAL_MODE,U=p.SIGNALS,N=(p.EDDSA_SUPPORTED,p.CURVE25519_SUPPORTED),C=p.BUGS,I=p.BUGGY_IMPLS,D=I.length,L=r(65).version,P=0,x=P++,H=P++,M=P++,K=P++,G=P++,F=P++,q=P++,j=P++,W=P++,X=P++,V=P++,Q=o.Z_PARTIAL_FLUSH,Y={flush:Q},z=/\x00/g,$=Buffer.from("SSH-"),Z=Buffer.allocUnsafe(0),J=Buffer.allocUnsafe(9),ee=Buffer.from([A.GLOBAL_REQUEST,0,0,0,21,107,101,101,112,97,108,105,118,101,64,111,112,101,110,115,115,104,46,99,111,109,1]),te=Buffer.from([A.NEWKEYS]),re=Buffer.from([A.USERAUTH_SUCCESS]),ne=Buffer.from([A.REQUEST_SUCCESS]),ie=Buffer.from([A.REQUEST_FAILURE]),oe=Buffer.from([R.TTY_OP_END]),se=Buffer.from([A.KEXDH_GEX_REQUEST,0,0,4,0,0,0,16,0,0,0,32,0]);function ae(e){}function ce(e){"object"===n(e)&&null!==e||(e={}),s.call(this,{highWaterMark:"number"==typeof e.highWaterMark?e.highWaterMark:32768}),this._needContinue=!1,this.bytesSent=this.bytesReceived=0,this.debug="function"==typeof e.debug?e.debug:ae,this.server=!0===e.server,this.maxPacketSize="number"==typeof e.maxPacketSize?e.maxPacketSize:35e3,this.remoteBugs=0,this.server&&(this.remoteBugs=C.BAD_DHGEX),this.readable=!0;var t=this,r=e.hostKeys;if(this.server&&("object"!==n(r)||null===r))throw new Error("hostKeys must be an object keyed on host key type");if(this.config={hostKeys:r,ident:"SSH-2.0-"+(e.ident||"ssh2js"+L+(this.server?"srv":"")),algorithms:{kex:k.KEX,kexBuf:k.KEX_BUF,serverHostKey:k.SERVER_HOST_KEY,serverHostKeyBuf:k.SERVER_HOST_KEY_BUF,cipher:k.CIPHER,cipherBuf:k.CIPHER_BUF,hmac:k.HMAC,hmacBuf:k.HMAC_BUF,compress:k.COMPRESS,compressBuf:k.COMPRESS_BUF}},this.config.ident.replace(z,""),this.config.ident.length+2>255)throw new Error("ident too long");if("object"===n(e.algorithms)&&null!==e.algorithms){var o=e.algorithms;Array.isArray(o.kex)&&o.kex.length>0&&(this.config.algorithms.kex=o.kex,Buffer.isBuffer(o.kexBuf)||(o.kexBuf=Buffer.from(o.kex.join(","),"ascii")),this.config.algorithms.kexBuf=o.kexBuf),Array.isArray(o.serverHostKey)&&o.serverHostKey.length>0&&(this.config.algorithms.serverHostKey=o.serverHostKey,Buffer.isBuffer(o.serverHostKeyBuf)||(o.serverHostKeyBuf=Buffer.from(o.serverHostKey.join(","),"ascii")),this.config.algorithms.serverHostKeyBuf=o.serverHostKeyBuf),Array.isArray(o.cipher)&&o.cipher.length>0&&(this.config.algorithms.cipher=o.cipher,Buffer.isBuffer(o.cipherBuf)||(o.cipherBuf=Buffer.from(o.cipher.join(","),"ascii")),this.config.algorithms.cipherBuf=o.cipherBuf),Array.isArray(o.hmac)&&o.hmac.length>0&&(this.config.algorithms.hmac=o.hmac,Buffer.isBuffer(o.hmacBuf)||(o.hmacBuf=Buffer.from(o.hmac.join(","),"ascii")),this.config.algorithms.hmacBuf=o.hmacBuf),Array.isArray(o.compress)&&o.compress.length>0&&(this.config.algorithms.compress=o.compress,Buffer.isBuffer(o.compressBuf)||(o.compressBuf=Buffer.from(o.compress.join(","),"ascii")),this.config.algorithms.compressBuf=o.compressBuf)}this.reset(!0),this.on("end",(function(){t.readable=!1,t._state=void 0,t.reset(),t._state.outgoing.bufSeqno=void 0})),this.on("DISCONNECT",(function(e,r,n,i){!function(e,t,r,n,i){if(r!==T.BY_APPLICATION){var o=new Error(n||t);o.code=r,e.emit("error",o)}e.reset()}(t,e,r,n)})),this.on("KEXINIT",(function(e,r){!function(e,t,r){var n=e._state,i=n.outgoing;i.status===X?(e.debug("DEBUG: Received re-key request"),i.status=V,i.kexinit=void 0,me(e,o)):o();function o(){!0===function(e,t,r){var n,i,o,s,a,c=e._state,f=c.incoming,u=c.outgoing,h=e.debug;h("DEBUG: Comparing KEXINITs ...");var l=e.config.algorithms,p=l.kex;if(e.remoteBugs&C.BAD_DHGEX)for(var d=!1,g=p.length-1;g>=0;--g)-1!==p[g].indexOf("group-exchange")&&(d||(p=p.slice(),d=!0),p.splice(g,1));h("DEBUG: (local) KEX algorithms: "+p),h("DEBUG: (remote) KEX algorithms: "+t.algorithms.kex),e.server?(n=p,i=t.algorithms.kex):(n=t.algorithms.kex,i=p);for(a=0,s=i.length;a<s&&-1===n.indexOf(i[a]);++a);if(a===s){return h("DEBUG: No matching key exchange algorithm"),(m=new Error("Handshake failed: no matching key exchange algorithm")).level="handshake",e.emit("error",m),e.disconnect(T.KEY_EXCHANGE_FAILED),!1}var y=i[a];h("DEBUG: KEX algorithm: "+y),!r||t.algorithms.kex.length&&y===t.algorithms.kex[0]||(f.ignoreNext=!0);h("DEBUG: (local) Host key formats: "+l.serverHostKey),h("DEBUG: (remote) Host key formats: "+t.algorithms.srvHostKey),e.server?(n=l.serverHostKey,i=t.algorithms.srvHostKey):(n=t.algorithms.srvHostKey,i=l.serverHostKey);for(a=0,s=i.length;a<s&&-1===n.indexOf(i[a]);++a);if(a===s){return h("DEBUG: No matching host key format"),(m=new Error("Handshake failed: no matching host key format")).level="handshake",e.emit("error",m),e.disconnect(T.KEY_EXCHANGE_FAILED),!1}c.hostkeyFormat=i[a],h("DEBUG: Host key format: "+c.hostkeyFormat),h("DEBUG: (local) Client->Server ciphers: "+l.cipher),h("DEBUG: (remote) Client->Server ciphers: "+t.algorithms.cs.encrypt),e.server?(n=l.cipher,i=t.algorithms.cs.encrypt):(n=t.algorithms.cs.encrypt,i=l.cipher);for(a=0,s=i.length;a<s&&-1===n.indexOf(i[a]);++a);if(a===s){return h("DEBUG: No matching Client->Server cipher"),(m=new Error("Handshake failed: no matching client->server cipher")).level="handshake",e.emit("error",m),e.disconnect(T.KEY_EXCHANGE_FAILED),!1}o=e.server?f.decrypt.type=i[a]:u.encrypt.type=i[a];h("DEBUG: Client->Server Cipher: "+o),h("DEBUG: (local) Server->Client ciphers: "+l.cipher),h("DEBUG: (remote) Server->Client ciphers: "+t.algorithms.sc.encrypt),e.server?(n=l.cipher,i=t.algorithms.sc.encrypt):(n=t.algorithms.sc.encrypt,i=l.cipher);for(a=0,s=i.length;a<s&&-1===n.indexOf(i[a]);++a);if(a===s){return h("DEBUG: No matching Server->Client cipher"),(m=new Error("Handshake failed: no matching server->client cipher")).level="handshake",e.emit("error",m),e.disconnect(T.KEY_EXCHANGE_FAILED),!1}o=e.server?u.encrypt.type=i[a]:f.decrypt.type=i[a];h("DEBUG: Server->Client Cipher: "+o),h("DEBUG: (local) Client->Server HMAC algorithms: "+l.hmac),h("DEBUG: (remote) Client->Server HMAC algorithms: "+t.algorithms.cs.mac),e.server?(n=l.hmac,i=t.algorithms.cs.mac):(n=t.algorithms.cs.mac,i=l.hmac);for(a=0,s=i.length;a<s&&-1===n.indexOf(i[a]);++a);if(a===s){return h("DEBUG: No matching Client->Server HMAC algorithm"),(m=new Error("Handshake failed: no matching client->server HMAC")).level="handshake",e.emit("error",m),e.disconnect(T.KEY_EXCHANGE_FAILED),!1}o=e.server?f.hmac.type=i[a]:u.hmac.type=i[a];h("DEBUG: Client->Server HMAC algorithm: "+o),h("DEBUG: (local) Server->Client HMAC algorithms: "+l.hmac),h("DEBUG: (remote) Server->Client HMAC algorithms: "+t.algorithms.sc.mac),e.server?(n=l.hmac,i=t.algorithms.sc.mac):(n=t.algorithms.sc.mac,i=l.hmac);for(a=0,s=i.length;a<s&&-1===n.indexOf(i[a]);++a);if(a===s){return h("DEBUG: No matching Server->Client HMAC algorithm"),(m=new Error("Handshake failed: no matching server->client HMAC")).level="handshake",e.emit("error",m),e.disconnect(T.KEY_EXCHANGE_FAILED),!1}o=e.server?u.hmac.type=i[a]:f.hmac.type=i[a];h("DEBUG: Server->Client HMAC algorithm: "+o),h("DEBUG: (local) Client->Server compression algorithms: "+l.compress),h("DEBUG: (remote) Client->Server compression algorithms: "+t.algorithms.cs.compress),e.server?(n=l.compress,i=t.algorithms.cs.compress):(n=t.algorithms.cs.compress,i=l.compress);for(a=0,s=i.length;a<s&&-1===n.indexOf(i[a]);++a);if(a===s){return h("DEBUG: No matching Client->Server compression algorithm"),(m=new Error("Handshake failed: no matching client->server compression algorithm")).level="handshake",e.emit("error",m),e.disconnect(T.KEY_EXCHANGE_FAILED),!1}o=e.server?f.decompress.type=i[a]:u.compress.type=i[a];h("DEBUG: Client->Server compression algorithm: "+o),h("DEBUG: (local) Server->Client compression algorithms: "+l.compress),h("DEBUG: (remote) Server->Client compression algorithms: "+t.algorithms.sc.compress),e.server?(n=l.compress,i=t.algorithms.sc.compress):(n=t.algorithms.sc.compress,i=l.compress);for(a=0,s=i.length;a<s&&-1===n.indexOf(i[a]);++a);if(a===s){var m;return h("DEBUG: No matching Server->Client compression algorithm"),(m=new Error("Handshake failed: no matching server->client compression algorithm")).level="handshake",e.emit("error",m),e.disconnect(T.KEY_EXCHANGE_FAILED),!1}o=e.server?u.compress.type=i[a]:f.decompress.type=i[a];return h("DEBUG: Server->Client compression algorithm: "+o),c.kex=new Te(y),c.kex.generateKeys(),u.pubkey=c.kex.getPublicKey(),!0}(e,t,r)&&(e.server?n.incoming.expectedPacket=n.kex.pktInit:"groupex"===n.kex.type?function(e){e._state.incoming.expectedPacket="KEXDH_GEX_GROUP",e.debug("DEBUG: Outgoing: Writing KEXDH_GEX_REQUEST"),be(e,se,void 0,!0)}(e):ve(e))}}(t,e,r)})),this.on("NEWKEYS",(function(){fe(t)})),this.server?this.on("KEXDH_INIT",(function(e){!function(e,t){!function(e,t){var r=e._state,n=r.outgoing,o=r.incoming,s=e.config.hostKeys[r.hostkeyFormat];Array.isArray(s)&&(s=s[0]);var a=s.getPublicSSH(),c=s.type;t=r.kex.convertPublicKey(t);var f=r.kex.computeSecret(t);if(f instanceof Error)return f.message="Error while computing DH secret ("+r.kex.type+"): "+f.message,f.level="handshake",e.emit("error",f),e.disconnect(T.KEY_EXCHANGE_FAILED),!1;var u,h,p,d,g=i.createHash(r.kex.hash),y=Buffer.byteLength(o.identRaw),m=Buffer.byteLength(e.config.ident),v=o.kexinit.length,E=n.kexinit.length,_=a.length,b=t.length,w=n.pubkey.length,S=f.length,k=y+m+v+E+_+b+w+S+32,O=r.kex.getDHParams();O&&(p=O.prime,d=O.generator,u=p.length,h=d.length,k+=12,k+=8,k+=u,k+=h);var B=0,R=Buffer.allocUnsafe(k);l(R,y,B),B+=4,R.write(o.identRaw,B,"utf8"),l(R,m,B+=y),B+=4,R.write(e.config.ident,B,"utf8"),l(R,v,B+=m),B+=4,o.kexinit.copy(R,B),B+=v,o.kexinit=void 0,l(R,E,B),B+=4,n.kexinit.copy(R,B),B+=E,n.kexinit=void 0,l(R,_,B),B+=4,a.copy(R,B),B+=_,O&&(se.slice(1).copy(R,B),l(R,u,B+=12),B+=4,p.copy(R,B),l(R,h,B+=u),B+=4,d.copy(R,B),B+=h);l(R,b,B),B+=4,t.copy(R,B),l(R,w,B+=b),B+=4,n.pubkey.copy(R,B),l(R,S,B+=w),B+=4,f.copy(R,B),n.exchangeHash=g.update(R).digest(),void 0===n.sessionId&&(n.sessionId=n.exchangeHash);n.kexsecret=f;var U=s.sign(n.exchangeHash);if(U instanceof Error)return U.message="Error while signing data with host key ("+c+"): "+U.message,U.level="handshake",e.emit("error",U),e.disconnect(T.KEY_EXCHANGE_FAILED),!1;if(!1===(U=Ae(U,c)))return U.message="Error while converting handshake signature",U.level="handshake",e.emit("error",U),e.disconnect(T.KEY_EXCHANGE_FAILED),!1;var N=4+c.length+4+U.length,C=Buffer.allocUnsafe(5+_+4+w+4+N);C[B=0]=A[r.kex.pktReply],++B,l(C,_,B),B+=4,a.copy(C,B),l(C,w,B+=_),B+=4,n.pubkey.copy(C,B),l(C,N,B+=w),B+=4,l(C,c.length,B),B+=4,C.write(c,B,c.length,"ascii"),B+=c.length,l(C,U.length,B),B+=4,U.copy(C,B),r.incoming.expectedPacket="NEWKEYS",e.debug("DEBUG: Outgoing: Writing "+r.kex.pktReply),be(e,C,void 0,!0),n.sentNEWKEYS=!0,e.debug("DEBUG: Outgoing: Writing NEWKEYS"),be(e,te,void 0,!0)}(e,t)}(t,e)})):this.on("KEXDH_REPLY",(function(e){!function e(t,r,n){var o=t._state,s=o.incoming,a=o.outgoing,c=t.debug;if(void 0===n){s.expectedPacket="NEWKEYS",a.sentNEWKEYS=!1,c("DEBUG: Checking host key format");var f=y(r.hostkey,0,"ascii",t);if(!1===f)return!1;if(r.hostkey_format!==o.hostkeyFormat||r.hostkey_format!==f)return c("DEBUG: Host key format mismatch"),t.disconnect(T.KEY_EXCHANGE_FAILED),t.reset(),(x=new Error("Handshake failed: host key format mismatch")).level="handshake",t.emit("error",x),!1;c("DEBUG: Checking signature format");var u=y(r.sig,0,"ascii",t);if(!1===u)return!1;if(r.sig_format!==u)return c("DEBUG: Signature format mismatch"),t.disconnect(T.KEY_EXCHANGE_FAILED),t.reset(),(x=new Error("Handshake failed: signature format mismatch")).level="handshake",t.emit("error",x),!1}if(a.status===W){if(void 0===n){c("DEBUG: Verifying host fingerprint");var h=!0,p=t.emit("fingerprint",r.hostkey,(function(i){void 0===n&&(n=!!i,h||e(t,r,n))}));if(h=!1,p&&void 0===n)return}if(void 0===n)c("DEBUG: Host accepted by default (no verification)");else{if(!0!==n)return c("DEBUG: Host denied via fingerprint verification"),t.disconnect(T.KEY_EXCHANGE_FAILED),t.reset(),(x=new Error("Handshake failed: host fingerprint verification failed")).level="handshake",t.emit("error",x),!1;c("DEBUG: Host accepted (verified)")}}if(r.pubkey=o.kex.convertPublicKey(r.pubkey),r.secret=o.kex.computeSecret(r.pubkey),r.secret instanceof Error)return r.secret.message="Error while computing DH secret ("+o.kex.type+"): "+r.secret.message,r.secret.level="handshake",t.emit("error",r.secret),t.disconnect(T.KEY_EXCHANGE_FAILED),!1;var d,g,m,v,E=i.createHash(o.kex.hash),w=Buffer.byteLength(t.config.ident),S=Buffer.byteLength(s.identRaw),A=a.kexinit.length,k=s.kexinit.length,O=r.hostkey.length,B=a.pubkey.length,R=r.pubkey.length,U=r.secret.length,N=w+S+A+k+O+B+R+U+32,C=o.kex.getDHParams();C&&(m=C.prime,v=C.generator,d=m.length,g=v.length,N+=12,N+=8,N+=d,N+=g);var I=0,D=Buffer.allocUnsafe(N);l(D,w,I),I+=4,D.write(t.config.ident,I,"utf8"),l(D,S,I+=w),I+=4,D.write(s.identRaw,I,"utf8"),l(D,A,I+=S),I+=4,a.kexinit.copy(D,I),I+=A,a.kexinit=void 0,l(D,k,I),I+=4,s.kexinit.copy(D,I),I+=k,s.kexinit=void 0,l(D,O,I),I+=4,r.hostkey.copy(D,I),I+=O,C&&(se.slice(1).copy(D,I),l(D,d,I+=12),I+=4,m.copy(D,I),l(D,g,I+=d),I+=4,v.copy(D,I),I+=g);l(D,B,I),I+=4,a.pubkey.copy(D,I),l(D,R,I+=B),I+=4,r.pubkey.copy(D,I),l(D,U,I+=R),I+=4,r.secret.copy(D,I),a.exchangeHash=E.update(D).digest();var L=y(r.sig,r.sig._pos,t);if(!1===L||!(L=_(L,r.sig_format,t)))return!1;var P=b(r.hostkey,r.sig_format);if(P instanceof Error)return!1;if(c("DEBUG: Verifying signature"),!0!==P.verify(a.exchangeHash,L)){var x;return c("DEBUG: Signature verification failed"),t.disconnect(T.KEY_EXCHANGE_FAILED),t.reset(),(x=new Error("Handshake failed: signature verification failed")).level="handshake",t.emit("error",x),!1}void 0===a.sessionId&&(a.sessionId=a.exchangeHash);a.kexsecret=r.secret,c("DEBUG: Outgoing: Writing NEWKEYS"),a.status===V?be(t,te,void 0,!0):be(t,te);a.sentNEWKEYS=!0,void 0!==n&&void 0===s.expectedPacket&&fe(t)}(t,e)})).on("KEXDH_GEX_GROUP",(function(e,r){!function(e,t,r){var n=e._state,i=n.outgoing;n.kex.setDHParams(t,r),n.kex.generateKeys(),i.pubkey=n.kex.getPublicKey(),ve(e)}(t,e,r)})),this.server&&("string"==typeof e.greeting&&e.greeting.length&&("\r\n"===e.greeting.slice(-2)?this.push(e.greeting):this.push(e.greeting+"\r\n")),"string"==typeof e.banner&&e.banner.length&&("\r\n"===e.banner.slice(-2)?this.banner=e.banner:this.banner=e.banner+"\r\n")),this.debug("DEBUG: Local ident: "+c(this.config.ident)),this.push(this.config.ident+"\r\n"),this._state.incoming.expectedPacket="KEXINIT"}function fe(e){var t=e._state,r=t.outgoing,n=t.incoming;if(n.expectedPacket=void 0,r.sentNEWKEYS){var s,a,c=r.kexsecret.length,f=r.encrypt.info=w[r.encrypt.type],u=0,h=t.kex.hash,p=Buffer.allocUnsafe(4+c);if(t.authsQueue=[],l(p,c,u),u+=4,r.kexsecret.copy(p,u),r.kexsecret=void 0,f.stream)s=Z;else{for(s=i.createHash(h).update(p).update(r.exchangeHash).update(e.server?"B":"A","ascii").update(r.sessionId).digest();s.length<f.ivLen;)s=Buffer.concat([s,i.createHash(h).update(p).update(r.exchangeHash).update(s).digest()]);s.length>f.ivLen&&(s=s.slice(0,f.ivLen))}for(a=i.createHash(h).update(p).update(r.exchangeHash).update(e.server?"D":"C","ascii").update(r.sessionId).digest();a.length<f.keyLen;)a=Buffer.concat([a,i.createHash(h).update(p).update(r.exchangeHash).update(a).digest()]);if(a.length>f.keyLen&&(a=a.slice(0,f.keyLen)),f.authLen>0)r.encrypt.iv=s,r.encrypt.key=a,r.encrypt.instance=!0;else{var d=B[r.encrypt.type];r.encrypt.instance=i.createCipheriv(d,a,s),r.encrypt.instance.setAutoPadding(!1)}var g=n.decrypt.info=w[n.decrypt.type];if(g.stream)s=Z;else{for(s=i.createHash(h).update(p).update(r.exchangeHash).update(e.server?"A":"B","ascii").update(r.sessionId).digest();s.length<g.ivLen;)s=Buffer.concat([s,i.createHash(h).update(p).update(r.exchangeHash).update(s).digest()]);s.length>g.ivLen&&(s=s.slice(0,g.ivLen))}for(n.decrypt.buf=Buffer.allocUnsafe(g.blockLen),a=i.createHash(h).update(p).update(r.exchangeHash).update(e.server?"C":"D","ascii").update(r.sessionId).digest();a.length<g.keyLen;)a=Buffer.concat([a,i.createHash(h).update(p).update(r.exchangeHash).update(a).digest()]);a.length>g.keyLen&&(a=a.slice(0,g.keyLen));var y,m=B[n.decrypt.type];n.decrypt.instance=i.createDecipheriv(m,a,s),n.decrypt.instance.setAutoPadding(!1),n.decrypt.iv=s,n.decrypt.key=a,f.discardLen>0&&(y=Buffer.alloc(f.discardLen),r.encrypt.instance.update(y)),g.discardLen>0&&(y&&y.length===g.discardLen||(y=Buffer.alloc(f.discardLen)),n.decrypt.instance.update(y));var v=r.hmac.info=S[r.hmac.type],E=n.hmac.info=S[n.hmac.type];if(0===f.authLen){for(a=i.createHash(h).update(p).update(r.exchangeHash).update(e.server?"F":"E","ascii").update(r.sessionId).digest();a.length<v.len;)a=Buffer.concat([a,i.createHash(h).update(p).update(r.exchangeHash).update(a).digest()]);a.length>v.len&&(a=a.slice(0,v.len)),r.hmac.key=a}else r.hmac.key=void 0;if(0===g.authLen){for(a=i.createHash(h).update(p).update(r.exchangeHash).update(e.server?"E":"F","ascii").update(r.sessionId).digest();a.length<E.len;)a=Buffer.concat([a,i.createHash(h).update(p).update(r.exchangeHash).update(a).digest()]);a.length>E.len&&(a=a.slice(0,E.len)),n.hmac.key=a}else n.hmac.key=void 0;var _=g.authLen||n.hmac.info.actualLen;if(n.hmac.buf&&n.hmac.buf.length===_||(n.hmac.buf=Buffer.allocUnsafe(_)),r.exchangeHash=void 0,"zlib"===r.compress.type?(r.compress.instance=o.createDeflate(Y),r.compress.queue=[]):"none"===r.compress.type&&(r.compress.instance=!1,r.compress.queue=null),"zlib"===n.decompress.type?n.decompress.instance=o.createInflate(Y):"none"===n.decompress.type&&(n.decompress.instance=!1),e.bytesSent=e.bytesReceived=0,r.status===V){r.status=X;var b=r.rekeyQueue,A=b.length,k=0;for(r.rekeyQueue=[];k<A;++k)Buffer.isBuffer(b[k])?be(e,b[k]):be(e,b[k][0],b[k][1]);A=(b=n.rekeyQueue).length,k=0,n.rekeyQueue=[];for(var T=n.seqno;k<A;++k){if(n.seqno=b[k][0],n.payload=b[k][1],!1===he(e))return;if(n.status===x)return}n.seqno=T}else r.status=X,n.status===G&&(e.debug("DEBUG: Parser: IN_PACKETBEFORE (update) (expecting "+g.blockLen+")"),ge(e,2,g.blockLen,n.decrypt.buf)),e.emit("ready")}}function ue(e,t){var r=e._state.kex;if(r)switch(t){case 30:return r.pktInit;case 31:switch(r.type){case"group":return"KEXDH_REPLY";case"groupex":return"KEXDH_GEX_GROUP";default:return"KEXECDH_REPLY"}break;case 33:if("groupex"===r.type)return"KEXDH_GEX_REPLY"}return A[t]}function he(e,t){var r,n,i,s,a,c,f,u,p,d,g,v,E,b,w=e._state.incoming,S=e._state.outgoing,k=w.payload,B=w.seqno;if(++w.seqno>4294967295&&(w.seqno=0),w.ignoreNext)return e.debug("DEBUG: Parser: Packet ignored"),void(w.ignoreNext=!1);var U=k[0];if(void 0===U)return!1;if(S.status!==X&&ue(e,U)!==w.expectedPacket&&U<1&&U>4){e.debug("DEBUG: Parser: IN_PACKETDATAAFTER, expected: "+w.expectedPacket+" but got: "+ue(e,U)),e.disconnect(T.PROTOCOL_ERROR);var N=new Error("Received unexpected packet");return N.level="protocol",e.emit("error",N),!1}if(U===A.CHANNEL_DATA){if(!1===(a=m(k,1,e,t)))return!1;if(!1===(c=y(k,5,e,t,32768)))return!1;e.debug("DEBUG: Parser: IN_PACKETDATAAFTER, packet: CHANNEL_DATA ("+a+")"),e.emit("CHANNEL_DATA:"+a,c)}else if(U===A.CHANNEL_EXTENDED_DATA){if(!1===(a=m(k,1,e,t)))return!1;var I=m(k,5,e,t);if(!1===I)return!1;if(!1===(c=y(k,9,e,t)))return!1;e.debug("DEBUG: Parser: IN_PACKETDATAAFTER, packet: CHANNEL_EXTENDED_DATA ("+a+")"),e.emit("CHANNEL_EXTENDED_DATA:"+a,I,c)}else if(U===A.CHANNEL_WINDOW_ADJUST){if(!1===(a=m(k,1,e,t)))return!1;var D=m(k,5,e,t);if(!1===D)return!1;e.debug("DEBUG: Parser: IN_PACKETDATAAFTER, packet: CHANNEL_WINDOW_ADJUST ("+a+", "+D+")"),e.emit("CHANNEL_WINDOW_ADJUST:"+a,D)}else if(U===A.CHANNEL_SUCCESS){if(!1===(a=m(k,1,e,t)))return!1;e.debug("DEBUG: Parser: IN_PACKETDATAAFTER, packet: CHANNEL_SUCCESS ("+a+")"),e.emit("CHANNEL_SUCCESS:"+a)}else if(U===A.CHANNEL_FAILURE){if(!1===(a=m(k,1,e,t)))return!1;e.debug("DEBUG: Parser: IN_PACKETDATAAFTER, packet: CHANNEL_FAILURE ("+a+")"),e.emit("CHANNEL_FAILURE:"+a)}else if(U===A.CHANNEL_EOF){if(!1===(a=m(k,1,e,t)))return!1;e.debug("DEBUG: Parser: IN_PACKETDATAAFTER, packet: CHANNEL_EOF ("+a+")"),e.emit("CHANNEL_EOF:"+a)}else if(U===A.CHANNEL_OPEN){var L,P=y(k,1,"ascii",e,t);if(!1===P)return!1;if(!1===(p=m(k,k._pos,e,t)))return!1;if(!1===(d=m(k,k._pos+=4,e,t)))return!1;if(!1===(g=m(k,k._pos+=4,e,t)))return!1;if(e.debug("DEBUG: Parser: IN_PACKETDATAAFTER, packet: CHANNEL_OPEN ("+p+", "+P+")"),"forwarded-tcpip"===P||"direct-tcpip"===P){var x=y(k,k._pos+=4,"ascii",e,t);if(!1===x)return!1;var H=m(k,k._pos,e,t);if(!1===H)return!1;if(!1===(f=y(k,k._pos+=4,"ascii",e,t)))return!1;if(!1===(u=m(k,k._pos,e,t)))return!1;L={type:P,sender:p,window:d,packetSize:g,data:{destIP:x,destPort:H,srcIP:f,srcPort:u}}}else if("forwarded-streamlocal@openssh.com"===P||"direct-streamlocal@openssh.com"===P){if(!1===(b=y(k,k._pos+=4,"utf8",e,t)))return!1;L={type:P,sender:p,window:d,packetSize:g,data:{socketPath:b}}}else if("x11"===P){if(!1===(f=y(k,k._pos+=4,"ascii",e,t)))return!1;if(!1===(u=m(k,k._pos,e,t)))return!1;L={type:P,sender:p,window:d,packetSize:g,data:{srcIP:f,srcPort:u}}}else L={type:P,sender:p,window:d,packetSize:g,data:{}};e.emit("CHANNEL_OPEN",L)}else if(U===A.CHANNEL_OPEN_CONFIRMATION){if(!1===(v=m(k,1,e,t)))return!1;if(!1===(p=m(k,5,e,t)))return!1;if(!1===(d=m(k,9,e,t)))return!1;if(!1===(g=m(k,13,e,t)))return!1;s={recipient:v,sender:p,window:d,packetSize:g},k.length>17&&(s.data=k.slice(17)),e.emit("CHANNEL_OPEN_CONFIRMATION:"+s.recipient,s)}else if(U===A.CHANNEL_OPEN_FAILURE){if(!1===(v=m(k,1,e,t)))return!1;var M=m(k,5,e,t);if(!1===M)return!1;if(!1===(E=y(k,9,"utf8",e,t)))return!1;if(!1===(n=y(k,k._pos,"utf8",e,t)))return!1;k._pos=9,s={recipient:v,reasonCode:M,reason:O[M],description:E,lang:n},e.emit("CHANNEL_OPEN_FAILURE:"+s.recipient,s)}else if(U===A.CHANNEL_CLOSE){if(!1===(a=m(k,1,e,t)))return!1;e.debug("DEBUG: Parser: IN_PACKETDATAAFTER, packet: CHANNEL_CLOSE ("+a+")"),e.emit("CHANNEL_CLOSE:"+a)}else if(U===A.IGNORE);else if(U===A.DISCONNECT){var K=m(k,1,e,t);if(!1===K)return!1;var G=T[K];if(!1===(E=y(k,5,"utf8",e,t)))return!1;k._pos<k.length&&(n=y(k,k._pos,"ascii",e,t)),e.debug("DEBUG: Parser: IN_PACKETDATAAFTER, packet: DISCONNECT ("+G+")"),e.emit("DISCONNECT",G,K,E,n)}else if(U===A.DEBUG){if(!1===(i=y(k,2,"utf8",e,t)))return!1;if(!1===(n=y(k,k._pos,"ascii",e,t)))return!1;e.emit("DEBUG",i,n)}else if(U===A.NEWKEYS)e.emit("NEWKEYS");else if(U===A.SERVICE_REQUEST){if(!1===(r=y(k,1,"ascii",e,t)))return!1;e.emit("SERVICE_REQUEST",r)}else if(U===A.SERVICE_ACCEPT){if(!1===(r=y(k,1,"ascii",e,t)))return!1;e.emit("SERVICE_ACCEPT",r)}else if(U===A.USERAUTH_REQUEST){var F=y(k,1,"utf8",e,t);if(!1===F)return!1;var q=y(k,k._pos,"ascii",e,t);if(!1===q)return!1;var j,W,V=y(k,k._pos,"ascii",e,t);if(!1===V)return!1;if("password"===V){if(!1===(j=y(k,k._pos+1,"utf8",e,t)))return!1}else if("publickey"===V||"hostbased"===V){var Q,z,$,Z,J,ee,te;if("publickey"===V){if(void 0===(Q=k[k._pos++]))return!1;Q=0!==Q}if(!1===(z=y(k,k._pos,"ascii",e,t)))return!1;if(!1===($=y(k,k._pos,e,t)))return!1;if(Q||"hostbased"===V){if("hostbased"===V){if(!1===(ee=y(k,k._pos,"ascii",e,t)))return!1;if(!1===(te=y(k,k._pos,"utf8",e,t)))return!1}var re=k._pos;if(!1===(Z=y(k,re,e,t)))return!1;if(Z.length>4+z.length+4&&Z.toString("ascii",4,4+z.length)===z&&(Z=Z.slice(4+z.length+4)),!1===(Z=_(Z,z,e,t)))return!1;J=Buffer.allocUnsafe(4+S.sessionId.length+re),l(J,S.sessionId.length,0),S.sessionId.copy(J,4),k.copy(J,4+S.sessionId.length,0,re)}else W="publickey -- check";j={keyAlgo:z,key:$,signature:Z,blob:J,localHostname:ee,localUsername:te}}else if("keyboard-interactive"===V){var ne=m(k,k._pos,e,t);if(!1===ne)return!1;if(!1===(j=y(k,k._pos+4+ne,"utf8",e,t)))return!1}else"none"!==V&&(j=k.slice(k._pos));void 0===W&&(W=V),e.debug("DEBUG: Parser: IN_PACKETDATAAFTER, packet: USERAUTH_REQUEST ("+W+")"),e._state.authsQueue.push(V),e.emit("USERAUTH_REQUEST",F,q,V,j)}else if(U===A.USERAUTH_SUCCESS)"zlib@openssh.com"===S.compress.type&&(S.compress.instance=o.createDeflate(Y),S.compress.queue=[]),"zlib@openssh.com"===w.decompress.type&&(w.decompress.instance=o.createInflate(Y)),e._state.authsQueue.shift(),e.emit("USERAUTH_SUCCESS");else if(U===A.USERAUTH_FAILURE){var ie=y(k,1,"ascii",e,t);if(!1===ie)return!1;var oe=k[k._pos];if(void 0===oe)return!1;oe=0!==oe,ie=ie.split(","),e._state.authsQueue.shift(),e.emit("USERAUTH_FAILURE",ie,oe)}else if(U===A.USERAUTH_BANNER){if(!1===(i=y(k,1,"utf8",e,t)))return!1;if(!1===(n=y(k,k._pos,"utf8",e,t)))return!1;e.emit("USERAUTH_BANNER",i,n)}else if(U===A.GLOBAL_REQUEST){var se=y(k,1,"ascii",e,t);if(!1===se)return e.debug("DEBUG: Parser: IN_PACKETDATAAFTER, packet: GLOBAL_REQUEST"),!1;e.debug("DEBUG: Parser: IN_PACKETDATAAFTER, packet: GLOBAL_REQUEST ("+se+")");var ae,ce=k[k._pos++];if(void 0===ce)return!1;if(ce=0!==ce,"tcpip-forward"===se||"cancel-tcpip-forward"===se){var fe=y(k,k._pos,"ascii",e,t);if(!1===fe)return!1;var he=m(k,k._pos,e,t);if(!1===he)return!1;ae={bindAddr:fe,bindPort:he}}else if("streamlocal-forward@openssh.com"===se||"cancel-streamlocal-forward@openssh.com"===se){if(!1===(b=y(k,k._pos,"utf8",e,t)))return!1;ae={socketPath:b}}else"no-more-sessions@openssh.com"===se||(ae=k.slice(k._pos));e.emit("GLOBAL_REQUEST",se,ce,ae)}else if(U===A.REQUEST_SUCCESS)k.length>1?e.emit("REQUEST_SUCCESS",k.slice(1)):e.emit("REQUEST_SUCCESS");else if(U===A.REQUEST_FAILURE)e.emit("REQUEST_FAILURE");else if(U===A.UNIMPLEMENTED);else{if(U===A.KEXINIT)return function(e,t){var r,n=e._state.incoming,i=n.payload,o={algorithms:{kex:void 0,srvHostKey:void 0,cs:{encrypt:void 0,mac:void 0,compress:void 0},sc:{encrypt:void 0,mac:void 0,compress:void 0}},languages:{cs:void 0,sc:void 0}};if(!1===(r=ye(i,17,e,t)))return!1;if(o.algorithms.kex=r,!1===(r=ye(i,i._pos,e,t)))return!1;if(o.algorithms.srvHostKey=r,!1===(r=ye(i,i._pos,e,t)))return!1;if(o.algorithms.cs.encrypt=r,!1===(r=ye(i,i._pos,e,t)))return!1;if(o.algorithms.sc.encrypt=r,!1===(r=ye(i,i._pos,e,t)))return!1;if(o.algorithms.cs.mac=r,!1===(r=ye(i,i._pos,e,t)))return!1;if(o.algorithms.sc.mac=r,!1===(r=ye(i,i._pos,e,t)))return!1;if(o.algorithms.cs.compress=r,!1===(r=ye(i,i._pos,e,t)))return!1;if(o.algorithms.sc.compress=r,!1===(r=ye(i,i._pos,e,t)))return!1;if(o.languages.cs=r,!1===(r=ye(i,i._pos,e,t)))return!1;o.languages.sc=r;var s=i._pos<i.length&&1===i[i._pos];n.kexinit=i,e.emit("KEXINIT",o,s)}(e,t);if(U===A.CHANNEL_REQUEST)return function(e,t){var r,n,i,o,s,a,c,f=e._state.incoming.payload,u=m(f,1,e,t);if(!1===u)return!1;var l=y(f,5,"ascii",e,t);if(!1===l)return!1;if("exit-status"===l){var p=m(f,++f._pos,e,t);if(!1===p)return!1;r={recipient:u,request:l,wantReply:!1,code:p}}else if("exit-signal"===l){var d;if(e.remoteBugs&C.OLD_EXIT){if(!1===(c=m(f,++f._pos,e,t)))return!1;switch(c){case 1:c="HUP";break;case 2:c="INT";break;case 3:c="QUIT";break;case 6:c="ABRT";break;case 9:c="KILL";break;case 14:c="ALRM";break;case 15:c="TERM";break;default:c="UNKNOWN ("+c+")"}d=!1}else{if(!1===(c=y(f,++f._pos,"ascii",e,t)))return!1;if(void 0===(d=f[f._pos++]))return!1;d=0!==d}var g=y(f,f._pos,"utf8",e,t);if(!1===g)return!1;var v=y(f,f._pos,"utf8",e,t);if(!1===v)return!1;r={recipient:u,request:l,wantReply:!1,signal:c,coredump:d,description:g,lang:v}}else if("pty-req"===l){if(void 0===(a=f[f._pos++]))return!1;a=0!==a;var E=y(f,f._pos,"ascii",e,t);if(!1===E)return!1;if(!1===(n=m(f,f._pos,e,t)))return!1;if(!1===(i=m(f,f._pos+=4,e,t)))return!1;if(!1===(o=m(f,f._pos+=4,e,t)))return!1;if(!1===(s=m(f,f._pos+=4,e,t)))return!1;var _=y(f,f._pos+=4,e,t);if(!1===_)return!1;_=function(e){for(var t,r={},n=0,i=e.length;n<i&&!((t=e[n])===R.TTY_OP_END||void 0===R[t]||n+5>i);n+=5)r[R[t]]=h(e,n+1);return r}(_),r={recipient:u,request:l,wantReply:a,term:E,cols:n,rows:i,width:o,height:s,modes:_}}else if("window-change"===l){if(!1===(n=m(f,++f._pos,e,t)))return!1;if(!1===(i=m(f,f._pos+=4,e,t)))return!1;if(!1===(o=m(f,f._pos+=4,e,t)))return!1;if(!1===(s=m(f,f._pos+=4,e,t)))return!1;r={recipient:u,request:l,wantReply:!1,cols:n,rows:i,width:o,height:s}}else if("x11-req"===l){if(void 0===(a=f[f._pos++]))return!1;a=0!==a;var b=f[f._pos++];if(void 0===b)return!1;b=0!==b;var w=y(f,f._pos,"ascii",e,t);if(!1===w)return!1;var S=y(f,f._pos,"binary",e,t);if(!1===S)return!1;var A=m(f,f._pos,e,t);if(!1===A)return!1;r={recipient:u,request:l,wantReply:a,single:b,protocol:w,cookie:S,screen:A}}else if("env"===l){if(void 0===(a=f[f._pos++]))return!1;a=0!==a;var k=y(f,f._pos,"utf8",e,t);if(!1===k)return!1;var T=y(f,f._pos,"utf8",e,t);if(!1===T)return!1;r={recipient:u,request:l,wantReply:a,key:k,val:T}}else if("shell"===l){if(void 0===(a=f[f._pos]))return!1;r={recipient:u,request:l,wantReply:a=0!==a}}else if("exec"===l){if(void 0===(a=f[f._pos++]))return!1;a=0!==a;var O=y(f,f._pos,"utf8",e,t);if(!1===O)return!1;r={recipient:u,request:l,wantReply:a,command:O}}else if("subsystem"===l){if(void 0===(a=f[f._pos++]))return!1;a=0!==a;var B=y(f,f._pos,"utf8",e,t);if(!1===B)return!1;r={recipient:u,request:l,wantReply:a,subsystem:B}}else if("signal"===l){if(!1===(c=y(f,++f._pos,"ascii",e,t)))return!1;r={recipient:u,request:l,wantReply:!1,signal:"SIG"+c}}else if("xon-xoff"===l){var U=f[++f._pos];if(void 0===U)return!1;r={recipient:u,request:l,wantReply:!1,clientControl:U=0!==U}}else if("auth-agent-req@openssh.com"===l){if(void 0===(a=f[f._pos]))return!1;r={recipient:u,request:l,wantReply:a=0!==a}}else{if(void 0===(a=f[f._pos]))return!1;r={recipient:u,request:l,wantReply:a=0!==a}}e.debug("DEBUG: Parser: IN_PACKETDATAAFTER, packet: CHANNEL_REQUEST ("+u+", "+l+")"),e.emit("CHANNEL_REQUEST:"+u,r)}(e,t);if(U>=30&&U<=49)return function(e,t,r){var n=e._state,i=n.incoming,o=i.payload;if(n.outgoing.status===X||ue(e,t)!==i.expectedPacket){return e.debug("DEBUG: Parser: IN_PACKETDATAAFTER, expected: "+i.expectedPacket+" but got: "+ue(e,t)),e.disconnect(T.PROTOCOL_ERROR),(s=new Error("Received unexpected packet")).level="protocol",e.emit("error",s),!1}if("groupex"===n.kex.type){var s;if(e.server)return e.disconnect(T.PROTOCOL_ERROR),(s=new Error("DH group exchange not supported by server")).level="handshake",e.emit("error",s),!1;if(t===A.KEXDH_GEX_GROUP){var a=y(o,1,e,r);if(!1===a)return!1;var c=y(o,o._pos,e,r);if(!1===c)return!1;e.emit("KEXDH_GEX_GROUP",a,c)}else if(t===A.KEXDH_GEX_REPLY)return le(e,r)}else if(t===A.KEXDH_INIT){var f=y(o,1,e,r);if(!1===f)return!1;e.emit("KEXDH_INIT",f)}else if(t===A.KEXDH_REPLY)return le(e,r)}(e,U,t);if(U>=60&&U<=70)return function(e,t,r){var n,i,o,s=e._state,a=s.authsQueue[0],c=s.incoming.payload;if("password"===a){if(t===A.USERAUTH_PASSWD_CHANGEREQ){if(!1===(n=y(c,1,"utf8",e,r)))return!1;if(!1===(i=y(c,c._pos,"utf8",e,r)))return!1;e.emit("USERAUTH_PASSWD_CHANGEREQ",n,i)}}else if("keyboard-interactive"===a){if(t===A.USERAUTH_INFO_REQUEST){var f,u,h;if(!1===(f=y(c,1,"utf8",e,r)))return!1;if(!1===(u=y(c,c._pos,"utf8",e,r)))return!1;if(!1===(i=y(c,c._pos,"utf8",e,r)))return!1;if(!1===(h=m(c,c._pos,e,r)))return!1;c._pos+=4;for(var l=[],p=0;p<h;++p){if(!1===(o=y(c,c._pos,"utf8",e,r)))return!1;var d=c[c._pos++];if(void 0===d)return!1;d=0!==d,l.push({prompt:o,echo:d})}e.emit("USERAUTH_INFO_REQUEST",f,u,i,l)}else if(t===A.USERAUTH_INFO_RESPONSE){var g=m(c,1,e,r);if(!1===g)return!1;c._pos=5;for(var v=[],E=0;E<g;++E){if(!1===(o=y(c,c._pos,"utf8",e,r)))return!1;v.push(o)}e.emit("USERAUTH_INFO_RESPONSE",v)}}else if("publickey"===a){if(t===A.USERAUTH_PK_OK){var _=e._state.authsQueue;if(!_.length||"publickey"!==_[0])return;_.shift(),e.emit("USERAUTH_PK_OK")}}else if(void 0!==a){e.disconnect(T.PROTOCOL_ERROR);var b=new Error("Invalid authentication method: "+a);b.level="protocol",e.emit("error",b)}}(e,U,t);var pe=Buffer.allocUnsafe(5);pe[0]=A.UNIMPLEMENTED,l(pe,B,1),be(e,pe)}}function le(e,t){var r=e._state.incoming.payload,n=y(r,1,e,t);if(!1===n)return!1;var i=y(r,r._pos,e,t);if(!1===i)return!1;var o=y(r,r._pos,e,t);if(!1===o)return!1;var s={hostkey:n,hostkey_format:void 0,pubkey:i,sig:o,sig_format:void 0},a=y(n,0,"ascii",e,t);if(!1===a)return!1;s.hostkey_format=a;var c=y(o,0,"ascii",e,t);if(!1===c)return!1;s.sig_format=c,e.emit("KEXDH_REPLY",s)}function pe(e,t){var r=e._state.incoming,n=r.hmac;if(e.debug("DEBUG: Parser: Verifying MAC"),r.decrypt.info.authLen>0){var o=r.decrypt,s=o.instance;s.setAuthTag(t);var a=s.update(r.packet);return r.payload=a.slice(1,r.packet.length-a[0]),g(o.iv),o.instance=i.createDecipheriv(B[o.type],o.key,o.iv),o.instance.setAutoPadding(!1),!0}var c=i.createHmac(B[n.type],n.key);l(J,r.seqno,0),l(J,r.pktLen,4),J[8]=r.padLen,c.update(J),c.update(r.packet);var f=c.digest();return f.length>r.hmac.info.actualLen&&(f=f.slice(0,r.hmac.info.actualLen)),ke(f,t)}function de(e,t){var r=e._state.incoming.decrypt.instance;return e.debug("DEBUG: Parser: Decrypting"),r.update(t)}function ge(e,t,r,n){var i=e._state.incoming.expect;i.amount=r,i.type=t,i.ptr=0,n?i.buf=n:r&&(i.buf=Buffer.allocUnsafe(r))}function ye(e,t,r,n){var i=y(e,t,"ascii",r,n);return!1!==i&&(i.length?i.split(","):[])}function me(e,t){return function(e,t){i.randomBytes(e,(function r(n,o){if(n)return i.randomBytes(e,r);t&&t(o)}))}(16,(function(r){var n=e.config.algorithms,i=n.kexBuf;if(e.remoteBugs&C.BAD_DHGEX){for(var o=!1,s=n.kex,a=s.length-1;a>=0;--a)-1!==s[a].indexOf("group-exchange")&&(o||(s=s.slice(),o=!0),s.splice(a,1));o&&(i=Buffer.from(s.join(",")))}var c=n.serverHostKeyBuf,f=21+i.length+4+c.length+2*(4+n.cipherBuf.length)+2*(4+n.hmacBuf.length)+2*(4+n.compressBuf.length)+8+1+4,u=Buffer.allocUnsafe(f),h=17;u[0]=A.KEXINIT,!1!==r&&r.copy(u,1),l(u,i.length,h),h+=4,i.copy(u,h),h+=i.length,l(u,c.length,h),h+=4,c.copy(u,h),h+=c.length,l(u,n.cipherBuf.length,h),h+=4,n.cipherBuf.copy(u,h),h+=n.cipherBuf.length,l(u,n.cipherBuf.length,h),h+=4,n.cipherBuf.copy(u,h),h+=n.cipherBuf.length,l(u,n.hmacBuf.length,h),h+=4,n.hmacBuf.copy(u,h),h+=n.hmacBuf.length,l(u,n.hmacBuf.length,h),h+=4,n.hmacBuf.copy(u,h),h+=n.hmacBuf.length,l(u,n.compressBuf.length,h),h+=4,n.compressBuf.copy(u,h),h+=n.compressBuf.length,l(u,n.compressBuf.length,h),h+=4,n.compressBuf.copy(u,h),h+=n.compressBuf.length,u.fill(0,u.length-13),e.debug("DEBUG: Outgoing: Writing KEXINIT"),e._state.incoming.expectedPacket="KEXINIT";var p=e._state.outgoing;p.kexinit=u,p.status===X&&(p.status=V),be(e,u,t,!0)})),!0}function ve(e){var t=e._state,r=t.outgoing,n=Buffer.allocUnsafe(5+r.pubkey.length);return t.incoming.expectedPacket=t.kex.pktReply,"groupex"===t.kex.type?(n[0]=A.KEXDH_GEX_INIT,e.debug("DEBUG: Outgoing: Writing KEXDH_GEX_INIT")):(n[0]=A.KEXDH_INIT,"group"===t.kex.type?e.debug("DEBUG: Outgoing: Writing KEXDH_INIT"):e.debug("DEBUG: Outgoing: Writing KEXECDH_INIT")),l(n,r.pubkey.length,1),r.pubkey.copy(n,5),be(e,n,void 0,!0)}function Ee(e,t,r){var n=e._state.outgoing.compress.instance;n.write(t),n.flush(Q,_e.bind(e,r))}function _e(e){if(!this._readableState.ended&&!this._writableState.ended){we(this,this._state.outgoing.compress.instance.read(),e);var t=this._state.outgoing.compress.queue;t.shift(),t.length>0&&Ee(this,t[0][0],t[0][1])}}function be(e,t,r,n){var i=e._state;if(!i)return!1;var o=i.outgoing;if(o.status===V&&!n)return"function"==typeof r?o.rekeyQueue.push([t,r]):o.rekeyQueue.push(t),!1;if(e._readableState.ended||e._writableState.ended)return!1;if(o.compress.instance){var s=o.compress.queue;return s.push([t,r]),1===s.length&&Ee(e,s[0][0],s[0][1]),!0}return we(e,t,r)}function we(e,t,r){var n,o,s,a,c,f=e._state.outgoing,u=f.encrypt,h=f.hmac;if(n=t.length+9,!1!==u.instance)if(u.info.authLen>0){for(var p=1+t.length+4;p%u.info.blockLen!=0;)++p;o=p-1-t.length,n=4+p}else{var d=u.info.blockLen;o=(n+=(d-1)*n%d)-t.length-5}else o=(n+=7*n%8)-t.length-5;s=Buffer.allocUnsafe(n),l(s,n-4,0),s[4]=o,t.copy(s,5),Se(s,5+t.length,o),!1!==h.type&&h.key&&(a=i.createHmac(B[h.type],h.key),l(f.bufSeqno,f.seqno,0),a.update(f.bufSeqno),a.update(s),(a=a.digest()).length>h.info.actualLen&&(a=a.slice(0,h.info.actualLen)));var y,m=0;if(!1!==u.instance)if(u.info.authLen>0){var v=i.createCipheriv(B[u.type],u.key,u.iv);v.setAutoPadding(!1);var E=s.slice(0,4);v.setAAD(E),e.push(E),m+=E,y=v.update(s.slice(4)),e.push(y),m+=y.length;var _=v.final();_.length&&(e.push(_),m+=_.length);var b=v.getAuthTag();c=e.push(b),m+=b.length,g(u.iv)}else y=u.instance.update(s),e.push(y),m+=y.length,c=e.push(a),m+=a.length;else c=e.push(s),m=s.length;return e.bytesSent+=m,++f.seqno>4294967295&&(f.seqno=0),r&&r(),c}a(ce,s),ce.prototype.__read=s.prototype._read,ce.prototype._read=function(e){return this._needContinue&&(this._needContinue=!1,this.emit("continue")),this.__read(e)},ce.prototype.__push=s.prototype.push,ce.prototype.push=function(e,t){var r=this.__push(e,t);return this._needContinue=!1===r,r},ce.prototype._cleanup=function(e){this.reset(),this.debug("DEBUG: Parser: Malformed packet"),e&&e(new Error("Malformed packet"))},ce.prototype._transform=function(e,t,r,n){var i,o,s,a,u=!1,h=!1,l=this._state,p=l.incoming,d=l.outgoing,g=p.expect,y=p.decrypt,v=p.decompress,E=e.length,_=0,b=this.debug,w=this,S=0,k=S;for(this.bytesReceived+=E;;){if(void 0!==g.type){if(S>=E)break;if(2===g.type){_=E-S;var O=g.buf.length-g.ptr;O<=_?(e.copy(g.buf,g.ptr,S,S+O),S+=O,o=g.buf,g.buf=void 0,g.ptr=0,g.type=void 0):(e.copy(g.buf,g.ptr,S),g.ptr+=_,S+=_);continue}if(0===g.type){if(S+=p.search.push(e),void 0!==g.type)continue}else if(1===g.type){if(4+ ++g.ptr>255)return this.reset(),b("DEBUG: Parser: Identification string exceeded 255 characters"),r(new Error("Max identification string size exceeded"));if(10!==e[S]){++S===E&&k<S&&(void 0===g.buf?g.buf=e.toString("ascii",k,S):g.buf+=e.toString("ascii",k,S));continue}g.type=void 0,k<S&&(void 0===g.buf?g.buf=e.toString("ascii",k,S):g.buf+=e.toString("ascii",k,S)),o=g.buf,g.buf=void 0,++S}}if(p.status===x){if(!this.readable)return r();if(this.server)if(o){if(83!==o[0]||83!==o[1]||72!==o[2]||45!==o[3])return this.reset(),b("DEBUG: Parser: Bad identification start"),r(new Error("Bad identification start"));p.status=H,b("DEBUG: Parser: IN_INIT (waiting for rest of identification)")}else b("DEBUG: Parser: IN_INIT (waiting for identification begin)"),ge(this,2,4);else{b("DEBUG: Parser: IN_INIT");var B=p.search=new f($);B.on("info",(function e(t,r,n,i){r&&(void 0===p.greeting?p.greeting=r.toString("binary",n,i):p.greeting+=r.toString("binary",n,i)),t&&(g.type=void 0,p.search.removeListener("info",e))})),B.maxMatches=1,ge(this,0),p.status=H}}else if(p.status===H)b("DEBUG: Parser: IN_GREETING"),p.search=void 0,k=S,ge(this,1),p.status=M;else{if(p.status===M){b("DEBUG: Parser: IN_HEADER"),13===o.charCodeAt(o.length-1)&&(o=o.slice(0,-1));var R=o.indexOf("-"),U=o.indexOf(" "),N={greeting:p.greeting,identRaw:"SSH-"+o,versions:{protocol:o.substr(0,R),software:-1===U?o.substring(R+1):o.substring(R+1,U)},comments:U>-1?o.substring(U+1):void 0};if(p.greeting=void 0,"1.99"!==N.versions.protocol&&"2.0"!==N.versions.protocol)return this.reset(),b("DEBUG: Parser: protocol version not supported: "+N.versions.protocol),r(new Error("Protocol version not supported"));if(this.emit("header",N),p.status===x)return;var C=N.identRaw,L=N.versions.software;this.debug("DEBUG: Remote ident: "+c(C));for(var P,W=0;W<D;++W)"string"==typeof(P=I[W])[0]?L===P[0]&&(this.remoteBugs|=P[1]):P[0].test(L)&&(this.remoteBugs|=P[1]);return p.identRaw=C,this.bytesReceived-=E-S,me(this,(function(){S===E?r():w._transform(e.slice(S),t,r)})),void(p.status=K)}if(p.status===K)b("DEBUG: Parser: IN_PACKETBEFORE (expecting "+(i=y.instance?y.info.blockLen:8)+")"),ge(this,2,i,y.buf),p.status=G;else if(p.status===G){if(b("DEBUG: Parser: IN_PACKET"),y.instance?((h=y.info.authLen>0)||(o=de(this,o)),i=y.info.blockLen):(h=!1,i=8),!1===(a=m(o,0,this,r)))return;var Y,z=p.hmac.info,J=a+4+(Y=z?z.actualLen:0),ee=this.maxPacketSize;if(v.instance&&(ee+=5*(this.maxPacketSize/16384+1)+6),a>ee||J<16+Y||(a+(h?0:4))%i!=0)return this.disconnect(T.PROTOCOL_ERROR),b("DEBUG: Parser: Bad packet length ("+J+")"),r(new Error("Bad packet length"));p.pktLen=a;var te=p.pktLen+4-i;if(h?(y.instance.setAAD(o.slice(0,4)),b("DEBUG: Parser: pktLen:"+p.pktLen+",remainLen:"+te)):(p.padLen=o[4],b("DEBUG: Parser: pktLen:"+p.pktLen+",padLen:"+p.padLen+",remainLen:"+te)),te>0)p.pktExtra=h?o.slice(4):o.slice(5),ge(this,2,te),p.status=F;else{if(!(te<0)){u=!0,p.status=F;continue}p.status=K}}else if(p.status===F){b("DEBUG: Parser: IN_PACKETDATA"),y.instance?(h=y.info.authLen>0,u?u=!1:h||(o=de(this,o))):(h=!1,u=!1);var re=p.pktLen-p.padLen-1;if(p.pktExtra?(s=Buffer.allocUnsafe(p.pktExtra.length+o.length),p.pktExtra.copy(s),o.copy(s,p.pktExtra.length),p.payload=s.slice(0,re)):(s=h?o.slice(4):o.slice(5),p.payload=o.slice(5,5+re)),void 0!==p.hmac.info){var ne=y.info.authLen||p.hmac.info.actualLen;b("DEBUG: Parser: HMAC size:"+ne),ge(this,2,ne,p.hmac.buf),p.status=q,p.packet=s}else p.status=j;p.pktExtra=void 0,s=void 0}else if(p.status===q){if(b("DEBUG: Parser: IN_PACKETDATAVERIFY"),!pe(this,o))return this.reset(),b("DEBUG: Parser: IN_PACKETDATAVERIFY (Invalid HMAC)"),r(new Error("Invalid HMAC"));b("DEBUG: Parser: IN_PACKETDATAVERIFY (Valid HMAC)"),p.status=j,p.packet=void 0}else if(p.status===j){if(v.instance){if(!n){b("DEBUG: Parser: Decompressing"),v.instance.write(p.payload);var ie=[],oe=0;return void v.instance.on("readable",(function(){for(var e;e=this.read();)ie.push(e),oe+=e.length})).flush(Q,(function(){var n;v.instance.removeAllListeners("readable"),1===ie.length?p.payload=ie[0]:p.payload=Buffer.concat(ie,oe),ie=null,n=S===E?Z:e.slice(S),w._transform(n,t,r,!0)}))}n=!1}this.emit("packet");var se=p.payload[0];if(b!==ae){var ce="DEBUG: Parser: IN_PACKETDATAAFTER, packet: ",fe=l.authsQueue[0],ue=null;if(d.status!==V||se<=4||se>=20&&se<=49||(ce+="(enqueued) "),se===A.KEXDH_INIT)switch(l.kex.type){case"group":ue="KEXDH_INIT";break;case"groupex":ue="KEXDH_GEX_REQUEST";break;default:ue="KEXECDH_INIT"}else if(se===A.KEXDH_REPLY)switch(l.kex.type){case"group":ue="KEXDH_REPLY";break;case"groupex":ue="KEXDH_GEX_GROUP";break;default:ue="KEXECDH_REPLY"}else se===A.KEXDH_GEX_GROUP?ue="KEXDH_GEX_GROUP":se===A.KEXDH_GEX_REPLY?ue="KEXDH_GEX_REPLY":60===se?ue="password"===fe?"USERAUTH_PASSWD_CHANGEREQ":"keyboard-interactive"===fe?"USERAUTH_INFO_REQUEST":"publickey"===fe?"USERAUTH_PK_OK":"UNKNOWN PACKET 60":61===se&&(ue="keyboard-interactive"===fe?"USERAUTH_INFO_RESPONSE":"UNKNOWN PACKET 61");null===ue&&(ue=A[se]),se!==A.CHANNEL_OPEN&&se!==A.CHANNEL_REQUEST&&se!==A.CHANNEL_SUCCESS&&se!==A.CHANNEL_FAILURE&&se!==A.CHANNEL_EOF&&se!==A.CHANNEL_CLOSE&&se!==A.CHANNEL_DATA&&se!==A.CHANNEL_EXTENDED_DATA&&se!==A.CHANNEL_WINDOW_ADJUST&&se!==A.DISCONNECT&&se!==A.USERAUTH_REQUEST&&se!==A.GLOBAL_REQUEST&&b(ce+ue)}if(d.status===X||se<=4||se>=20&&se<=49){if(!1===he(this,r))return;if(p.status===x)return}else if(d.status===V){if(50===p.rekeyQueue.length)return b("DEBUG: Parser: Max incoming re-key queue length reached"),this.disconnect(T.PROTOCOL_ERROR),r(new Error("Incoming re-key queue length limit reached"));var le=p.seqno;++p.seqno>4294967295&&(p.seqno=0),p.rekeyQueue.push([le,p.payload])}p.status=K,p.payload=void 0}}void 0!==o&&(o=void 0)}r()},ce.prototype.reset=function(e){if(this._state){var t=this._state;t.incoming.status=x,t.outgoing.status=W}else this._state={authsQueue:[],hostkeyFormat:void 0,kex:void 0,incoming:{status:x,expectedPacket:void 0,search:void 0,greeting:void 0,seqno:0,pktLen:void 0,padLen:void 0,pktExtra:void 0,payload:void 0,packet:void 0,kexinit:void 0,identRaw:void 0,rekeyQueue:[],ignoreNext:!1,expect:{amount:void 0,type:void 0,ptr:0,buf:void 0},decrypt:{instance:!1,info:void 0,iv:void 0,key:void 0,buf:void 0,type:void 0},hmac:{info:void 0,key:void 0,buf:void 0,type:!1},decompress:{instance:!1,type:!1}},outgoing:{status:W,seqno:0,bufSeqno:Buffer.allocUnsafe(4),rekeyQueue:[],kexinit:void 0,kexsecret:void 0,pubkey:void 0,exchangeHash:void 0,sessionId:void 0,sentNEWKEYS:!1,encrypt:{instance:!1,info:void 0,iv:void 0,key:void 0,type:void 0},hmac:{info:void 0,key:void 0,buf:void 0,type:!1},compress:{instance:!1,type:!1,queue:null}}};e||this.readable&&this.push(null)},ce.prototype.disconnect=function(e){var t=Buffer.alloc(13);return t[0]=A.DISCONNECT,void 0===T[e]&&(e=T.BY_APPLICATION),l(t,e,1),this.debug("DEBUG: Outgoing: Writing DISCONNECT ("+T[e]+")"),be(this,t),this.reset(),!1},ce.prototype.ping=function(){return this.debug("DEBUG: Outgoing: Writing ping (GLOBAL_REQUEST: keepalive@openssh.com)"),be(this,ee)},ce.prototype.rekey=function(){var e=this._state.outgoing.status;if(e===V)throw new Error("A re-key is already in progress");if(e!==X)throw new Error("Cannot re-key yet");return this.debug("DEBUG: Outgoing: Starting re-key"),me(this)},ce.prototype.requestSuccess=function(e){var t;return Buffer.isBuffer(e)?((t=Buffer.allocUnsafe(1+e.length))[0]=A.REQUEST_SUCCESS,e.copy(t,1)):t=ne,this.debug("DEBUG: Outgoing: Writing REQUEST_SUCCESS"),be(this,t)},ce.prototype.requestFailure=function(){return this.debug("DEBUG: Outgoing: Writing REQUEST_FAILURE"),be(this,ie)},ce.prototype.channelSuccess=function(e){var t=Buffer.allocUnsafe(5);return t[0]=A.CHANNEL_SUCCESS,l(t,e,1),this.debug("DEBUG: Outgoing: Writing CHANNEL_SUCCESS ("+e+")"),be(this,t)},ce.prototype.channelFailure=function(e){var t=Buffer.allocUnsafe(5);return t[0]=A.CHANNEL_FAILURE,l(t,e,1),this.debug("DEBUG: Outgoing: Writing CHANNEL_FAILURE ("+e+")"),be(this,t)},ce.prototype.channelEOF=function(e){var t=Buffer.allocUnsafe(5);return t[0]=A.CHANNEL_EOF,l(t,e,1),this.debug("DEBUG: Outgoing: Writing CHANNEL_EOF ("+e+")"),be(this,t)},ce.prototype.channelClose=function(e){var t=Buffer.allocUnsafe(5);return t[0]=A.CHANNEL_CLOSE,l(t,e,1),this.debug("DEBUG: Outgoing: Writing CHANNEL_CLOSE ("+e+")"),be(this,t)},ce.prototype.channelWindowAdjust=function(e,t){var r=Buffer.allocUnsafe(9);return r[0]=A.CHANNEL_WINDOW_ADJUST,l(r,e,1),l(r,t,5),this.debug("DEBUG: Outgoing: Writing CHANNEL_WINDOW_ADJUST ("+e+", "+t+")"),be(this,r)},ce.prototype.channelData=function(e,t){var r=Buffer.isBuffer(t),n=r?t.length:Buffer.byteLength(t),i=Buffer.allocUnsafe(9+n);return i[0]=A.CHANNEL_DATA,l(i,e,1),l(i,n,5),r?t.copy(i,9):i.write(t,9,n,"utf8"),this.debug("DEBUG: Outgoing: Writing CHANNEL_DATA ("+e+")"),be(this,i)},ce.prototype.channelExtData=function(e,t,r){var n=Buffer.isBuffer(t),i=n?t.length:Buffer.byteLength(t),o=Buffer.allocUnsafe(13+i);return o[0]=A.CHANNEL_EXTENDED_DATA,l(o,e,1),l(o,r,5),l(o,i,9),n?t.copy(o,13):o.write(t,13,i,"utf8"),this.debug("DEBUG: Outgoing: Writing CHANNEL_EXTENDED_DATA ("+e+")"),be(this,o)},ce.prototype.channelOpenConfirm=function(e,t,r,n){var i=Buffer.allocUnsafe(17);return i[0]=A.CHANNEL_OPEN_CONFIRMATION,l(i,e,1),l(i,t,5),l(i,r,9),l(i,n,13),this.debug("DEBUG: Outgoing: Writing CHANNEL_OPEN_CONFIRMATION (r:"+e+", l:"+t+")"),be(this,i)},ce.prototype.channelOpenFail=function(e,t,r,n){"string"!=typeof r&&(r=""),"string"!=typeof n&&(n="");var i=Buffer.byteLength(r),o=Buffer.byteLength(n),s=9,a=Buffer.allocUnsafe(13+i+4+o);return a[0]=A.CHANNEL_OPEN_FAILURE,l(a,e,1),l(a,t,5),l(a,i,s),s+=4,i&&(a.write(r,s,i,"utf8"),s+=i),l(a,o,s),o&&a.write(n,s+=4,o,"ascii"),this.debug("DEBUG: Outgoing: Writing CHANNEL_OPEN_FAILURE ("+e+")"),be(this,a)},ce.prototype.service=function(e){if(this.server)throw new Error("Client-only method called in server mode");var t=Buffer.byteLength(e),r=Buffer.allocUnsafe(5+t);return r[0]=A.SERVICE_REQUEST,l(r,t,1),r.write(e,5,t,"ascii"),this.debug("DEBUG: Outgoing: Writing SERVICE_REQUEST ("+e+")"),be(this,r)},ce.prototype.tcpipForward=function(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");var n=Buffer.byteLength(e),i=Buffer.allocUnsafe(23+n+4);return i[0]=A.GLOBAL_REQUEST,l(i,13,1),i.write("tcpip-forward",5,13,"ascii"),i[18]=void 0===r||!0===r?1:0,l(i,n,19),i.write(e,23,n,"ascii"),l(i,t,23+n),this.debug("DEBUG: Outgoing: Writing GLOBAL_REQUEST (tcpip-forward)"),be(this,i)},ce.prototype.cancelTcpipForward=function(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");var n=Buffer.byteLength(e),i=Buffer.allocUnsafe(30+n+4);return i[0]=A.GLOBAL_REQUEST,l(i,20,1),i.write("cancel-tcpip-forward",5,20,"ascii"),i[25]=void 0===r||!0===r?1:0,l(i,n,26),i.write(e,30,n,"ascii"),l(i,t,30+n),this.debug("DEBUG: Outgoing: Writing GLOBAL_REQUEST (cancel-tcpip-forward)"),be(this,i)},ce.prototype.openssh_streamLocalForward=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");var r=Buffer.byteLength(e),n=Buffer.allocUnsafe(41+r);return n[0]=A.GLOBAL_REQUEST,l(n,31,1),n.write("streamlocal-forward@openssh.com",5,31,"ascii"),n[36]=void 0===t||!0===t?1:0,l(n,r,37),n.write(e,41,r,"utf8"),this.debug("DEBUG: Outgoing: Writing GLOBAL_REQUEST (streamlocal-forward@openssh.com)"),be(this,n)},ce.prototype.openssh_cancelStreamLocalForward=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");var r=Buffer.byteLength(e),n=Buffer.allocUnsafe(48+r);return n[0]=A.GLOBAL_REQUEST,l(n,38,1),n.write("cancel-streamlocal-forward@openssh.com",5,38,"ascii"),n[43]=void 0===t||!0===t?1:0,l(n,r,44),n.write(e,48,r,"utf8"),this.debug("DEBUG: Outgoing: Writing GLOBAL_REQUEST (cancel-streamlocal-forward@openssh.com)"),be(this,n)},ce.prototype.directTcpip=function(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");var i=Buffer.byteLength(n.srcIP),o=Buffer.byteLength(n.dstIP),s=29,a=Buffer.allocUnsafe(33+i+4+4+o+4);return a[0]=A.CHANNEL_OPEN,l(a,12,1),a.write("direct-tcpip",5,12,"ascii"),l(a,e,17),l(a,t,21),l(a,r,25),l(a,o,s),a.write(n.dstIP,s+=4,o,"ascii"),l(a,n.dstPort,s+=o),l(a,i,s+=4),a.write(n.srcIP,s+=4,i,"ascii"),l(a,n.srcPort,s+=i),this.debug("DEBUG: Outgoing: Writing CHANNEL_OPEN ("+e+", direct-tcpip)"),be(this,a)},ce.prototype.openssh_directStreamLocal=function(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");var i=Buffer.byteLength(n.socketPath),o=47,s=Buffer.allocUnsafe(51+i+4+4);return s[0]=A.CHANNEL_OPEN,l(s,30,1),s.write("direct-streamlocal@openssh.com",5,30,"ascii"),l(s,e,35),l(s,t,39),l(s,r,43),l(s,i,o),s.write(n.socketPath,o+=4,i,"utf8"),s.fill(0,s.length-8),this.debug("DEBUG: Outgoing: Writing CHANNEL_OPEN ("+e+", direct-streamlocal@openssh.com)"),be(this,s)},ce.prototype.openssh_noMoreSessions=function(e){if(this.server)throw new Error("Client-only method called in server mode");var t=Buffer.allocUnsafe(34);return t[0]=A.GLOBAL_REQUEST,l(t,28,1),t.write("no-more-sessions@openssh.com",5,28,"ascii"),t[33]=void 0===e||!0===e?1:0,this.debug("DEBUG: Outgoing: Writing GLOBAL_REQUEST (no-more-sessions@openssh.com)"),be(this,t)},ce.prototype.session=function(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");var n=Buffer.allocUnsafe(24);return n[0]=A.CHANNEL_OPEN,l(n,7,1),n.write("session",5,7,"ascii"),l(n,e,12),l(n,t,16),l(n,r,20),this.debug("DEBUG: Outgoing: Writing CHANNEL_OPEN ("+e+", session)"),be(this,n)},ce.prototype.windowChange=function(e,t,r,n,i){if(this.server)throw new Error("Client-only method called in server mode");var o=Buffer.allocUnsafe(39);return o[0]=A.CHANNEL_REQUEST,l(o,e,1),l(o,13,5),o.write("window-change",9,13,"ascii"),o[22]=0,l(o,r,23),l(o,t,27),l(o,i,31),l(o,n,35),this.debug("DEBUG: Outgoing: Writing CHANNEL_REQUEST ("+e+", window-change)"),be(this,o)},ce.prototype.pty=function(e,t,r,i,o,s,a,c){if(this.server)throw new Error("Client-only method called in server mode");s&&s.length||(s="vt100"),!a||Buffer.isBuffer(a)||Array.isArray(a)||"object"!==n(a)||(a=function(e){for(var t,r,n,i=/^\d+$/,o=Object.keys(e),s=0,a=[],c=0,f=o.length;c<f;++c)t=o[c],(r=R[t])&&!i.test(t)&&"number"==typeof e[t]&&"TTY_OP_END"!==t&&(n=e[t],a[s++]=r,a[s++]=n>>>24&255,a[s++]=n>>>16&255,a[s++]=n>>>8&255,a[s++]=255&n);return a[s]=R.TTY_OP_END,a}(a)),a&&a.length||(a=oe);var f=s.length,u=a.length,h=21,p=Buffer.allocUnsafe(21+f+4+4+4+4+4+u);if(p[0]=A.CHANNEL_REQUEST,l(p,e,1),l(p,7,5),p.write("pty-req",9,7,"ascii"),p[16]=void 0===c||!0===c?1:0,l(p,f,17),p.write(s,21,f,"utf8"),l(p,r,h+=f),l(p,t,h+=4),l(p,o,h+=4),l(p,i,h+=4),l(p,u,h+=4),h+=4,Array.isArray(a))for(var d=0;d<u;++d)p[h++]=a[d];else Buffer.isBuffer(a)&&a.copy(p,h);return this.debug("DEBUG: Outgoing: Writing CHANNEL_REQUEST ("+e+", pty-req)"),be(this,p)},ce.prototype.shell=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");var r=Buffer.allocUnsafe(15);return r[0]=A.CHANNEL_REQUEST,l(r,e,1),l(r,5,5),r.write("shell",9,5,"ascii"),r[14]=void 0===t||!0===t?1:0,this.debug("DEBUG: Outgoing: Writing CHANNEL_REQUEST ("+e+", shell)"),be(this,r)},ce.prototype.exec=function(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");var n=Buffer.isBuffer(t)?t.length:Buffer.byteLength(t),i=Buffer.allocUnsafe(18+n);return i[0]=A.CHANNEL_REQUEST,l(i,e,1),l(i,4,5),i.write("exec",9,4,"ascii"),i[13]=void 0===r||!0===r?1:0,l(i,n,14),Buffer.isBuffer(t)?t.copy(i,18):i.write(t,18,n,"utf8"),this.debug("DEBUG: Outgoing: Writing CHANNEL_REQUEST ("+e+", exec)"),be(this,i)},ce.prototype.signal=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");if("SIG"===(t=t.toUpperCase()).slice(0,3)&&(t=t.substring(3)),-1===U.indexOf(t))throw new Error("Invalid signal: "+t);var r=t.length,n=Buffer.allocUnsafe(20+r);return n[0]=A.CHANNEL_REQUEST,l(n,e,1),l(n,6,5),n.write("signal",9,6,"ascii"),n[15]=0,l(n,r,16),n.write(t,20,r,"ascii"),this.debug("DEBUG: Outgoing: Writing CHANNEL_REQUEST ("+e+", signal)"),be(this,n)},ce.prototype.env=function(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");var i=Buffer.byteLength(t),o=Buffer.isBuffer(r)?r.length:Buffer.byteLength(r),s=Buffer.allocUnsafe(17+i+4+o);return s[0]=A.CHANNEL_REQUEST,l(s,e,1),l(s,3,5),s.write("env",9,3,"ascii"),s[12]=void 0===n||!0===n?1:0,l(s,i,13),s.write(t,17,i,"ascii"),l(s,o,17+i),Buffer.isBuffer(r)?r.copy(s,17+i+4):s.write(r,17+i+4,o,"utf8"),this.debug("DEBUG: Outgoing: Writing CHANNEL_REQUEST ("+e+", env)"),be(this,s)},ce.prototype.x11Forward=function(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");var n=Buffer.byteLength(t.protocol),i=Buffer.byteLength(t.cookie),o=Buffer.allocUnsafe(22+n+4+i+4);o[0]=A.CHANNEL_REQUEST,l(o,e,1),l(o,7,5),o.write("x11-req",9,7,"ascii"),o[16]=void 0===r||!0===r?1:0,o[17]=t.single?1:0,l(o,n,18);var s=22;return Buffer.isBuffer(t.protocol)?t.protocol.copy(o,s):o.write(t.protocol,s,n,"utf8"),l(o,i,s+=n),s+=4,Buffer.isBuffer(t.cookie)?t.cookie.copy(o,s):o.write(t.cookie,s,i,"binary"),s+=i,l(o,t.screen||0,s),this.debug("DEBUG: Outgoing: Writing CHANNEL_REQUEST ("+e+", x11-req)"),be(this,o)},ce.prototype.subsystem=function(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");var n=Buffer.byteLength(t),i=Buffer.allocUnsafe(23+n);return i[0]=A.CHANNEL_REQUEST,l(i,e,1),l(i,9,5),i.write("subsystem",9,9,"ascii"),i[18]=void 0===r||!0===r?1:0,l(i,n,19),i.write(t,23,n,"ascii"),this.debug("DEBUG: Outgoing: Writing CHANNEL_REQUEST ("+e+", subsystem: "+t+")"),be(this,i)},ce.prototype.openssh_agentForward=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");var r=Buffer.allocUnsafe(36);return r[0]=A.CHANNEL_REQUEST,l(r,e,1),l(r,26,5),r.write("auth-agent-req@openssh.com",9,26,"ascii"),r[35]=void 0===t||!0===t?1:0,this.debug("DEBUG: Outgoing: Writing CHANNEL_REQUEST ("+e+", auth-agent-req@openssh.com)"),be(this,r)},ce.prototype.authPassword=function(e,t){if(this.server)throw new Error("Client-only method called in server mode");var r=Buffer.byteLength(e),n=Buffer.byteLength(t),i=0,o=Buffer.allocUnsafe(5+r+4+14+4+8+1+4+n);return o[i]=A.USERAUTH_REQUEST,l(o,r,++i),o.write(e,i+=4,r,"utf8"),l(o,14,i+=r),o.write("ssh-connection",i+=4,14,"ascii"),l(o,8,i+=14),o.write("password",i+=4,8,"ascii"),o[i+=8]=0,l(o,n,++i),o.write(t,i+=4,n,"utf8"),this._state.authsQueue.push("password"),this.debug("DEBUG: Outgoing: Writing USERAUTH_REQUEST (password)"),be(this,o)},ce.prototype.authPK=function(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");var n,i=this,o=this._state.outgoing;"function"==typeof t.getPublicSSH?(n=t.type,t=t.getPublicSSH()):n=t.toString("ascii",4,4+h(t,0));var s=Buffer.byteLength(e),a=Buffer.byteLength(n),c=t.length,f=o.sessionId.length,u=0,p=Buffer.allocUnsafe((r?4+f:0)+1+4+s+4+14+4+9+1+4+a+4+c);return r?(l(p,f,u),o.sessionId.copy(p,u+=4),p[u+=f]=A.USERAUTH_REQUEST):p[u]=A.USERAUTH_REQUEST,l(p,s,++u),p.write(e,u+=4,s,"utf8"),l(p,14,u+=s),p.write("ssh-connection",u+=4,14,"ascii"),l(p,9,u+=14),p.write("publickey",u+=4,9,"ascii"),p[u+=9]=r?1:0,l(p,a,++u),p.write(n,u+=4,a,"ascii"),l(p,c,u+=a),t.copy(p,u+=4),r?(r(p,(function(r){if(!1===(r=Ae(r,n)))throw new Error("Error while converting handshake signature");var o=r.length,f=Buffer.allocUnsafe(5+s+4+14+4+9+1+4+a+4+c+4+4+a+4+o);return f[u=0]=A.USERAUTH_REQUEST,l(f,s,++u),f.write(e,u+=4,s,"utf8"),l(f,14,u+=s),f.write("ssh-connection",u+=4,14,"ascii"),l(f,9,u+=14),f.write("publickey",u+=4,9,"ascii"),f[u+=9]=1,l(f,a,++u),f.write(n,u+=4,a,"ascii"),l(f,c,u+=a),t.copy(f,u+=4),l(f,4+a+4+o,u+=c),l(f,a,u+=4),f.write(n,u+=4,a,"ascii"),l(f,o,u+=a),r.copy(f,u+=4),i._state.authsQueue.push("publickey"),i.debug("DEBUG: Outgoing: Writing USERAUTH_REQUEST (publickey)"),be(i,f)})),!0):(this._state.authsQueue.push("publickey"),this.debug("DEBUG: Outgoing: Writing USERAUTH_REQUEST (publickey -- check)"),be(this,p))},ce.prototype.authHostbased=function(e,t,r,n,i){if(this.server)throw new Error("Client-only method called in server mode");var o,s=this,a=this._state.outgoing;"function"==typeof t.getPublicSSH?(o=t.type,t=t.getPublicSSH()):o=t.toString("ascii",4,4+h(t,0));var c=Buffer.byteLength(e),f=Buffer.byteLength(o),u=t.length,p=a.sessionId.length,d=Buffer.byteLength(r),g=Buffer.byteLength(n),y=0,m=Buffer.allocUnsafe(4+p+1+4+c+4+14+4+9+4+f+4+u+4+d+4+g);return l(m,p,y),a.sessionId.copy(m,y+=4),m[y+=p]=A.USERAUTH_REQUEST,l(m,c,++y),m.write(e,y+=4,c,"utf8"),l(m,14,y+=c),m.write("ssh-connection",y+=4,14,"ascii"),l(m,9,y+=14),m.write("hostbased",y+=4,9,"ascii"),l(m,f,y+=9),m.write(o,y+=4,f,"ascii"),l(m,u,y+=f),t.copy(m,y+=4),l(m,d,y+=u),m.write(r,y+=4,d,"ascii"),l(m,g,y+=d),m.write(n,y+=4,g,"utf8"),i(m,(function(e){if(!1===(e=Ae(e,o)))throw new Error("Error while converting handshake signature");var t=e.length,r=Buffer.allocUnsafe(m.length-p+t);return m.copy(r,0,4+p),l(r,t,r.length-t-4),e.copy(r,r.length-t),s._state.authsQueue.push("hostbased"),s.debug("DEBUG: Outgoing: Writing USERAUTH_REQUEST (hostbased)"),be(s,r)})),!0},ce.prototype.authKeyboard=function(e){if(this.server)throw new Error("Client-only method called in server mode");var t=Buffer.byteLength(e),r=0,n=Buffer.allocUnsafe(5+t+4+14+4+20+4+4);return n[r]=A.USERAUTH_REQUEST,l(n,t,++r),n.write(e,r+=4,t,"utf8"),l(n,14,r+=t),n.write("ssh-connection",r+=4,14,"ascii"),l(n,20,r+=14),n.write("keyboard-interactive",r+=4,20,"ascii"),l(n,0,r+=20),l(n,0,r+=4),this._state.authsQueue.push("keyboard-interactive"),this.debug("DEBUG: Outgoing: Writing USERAUTH_REQUEST (keyboard-interactive)"),be(this,n)},ce.prototype.authNone=function(e){if(this.server)throw new Error("Client-only method called in server mode");var t=Buffer.byteLength(e),r=0,n=Buffer.allocUnsafe(5+t+4+14+4+4);return n[r]=A.USERAUTH_REQUEST,l(n,t,++r),n.write(e,r+=4,t,"utf8"),l(n,14,r+=t),n.write("ssh-connection",r+=4,14,"ascii"),l(n,4,r+=14),n.write("none",r+=4,4,"ascii"),this._state.authsQueue.push("none"),this.debug("DEBUG: Outgoing: Writing USERAUTH_REQUEST (none)"),be(this,n)},ce.prototype.authInfoRes=function(e){if(this.server)throw new Error("Client-only method called in server mode");var t,r,n,i=0,o=0;if(e)for(n=0,r=e.length;n<r;++n)i+=4+Buffer.byteLength(e[n]);var s=Buffer.allocUnsafe(5+i);if(s[o++]=A.USERAUTH_INFO_RESPONSE,l(s,e?e.length:0,o),e)for(o+=4,n=0,r=e.length;n<r;++n)t=Buffer.byteLength(e[n]),l(s,t,o),o+=4,t&&(s.write(e[n],o,t,"utf8"),o+=t);return this.debug("DEBUG: Outgoing: Writing USERAUTH_INFO_RESPONSE"),be(this,s)},ce.prototype.serviceAccept=function(e){if(!this.server)throw new Error("Server-only method called in client mode");var t=e.length,r=Buffer.allocUnsafe(5+t);if(r[0]=A.SERVICE_ACCEPT,l(r,t,1),r.write(e,5,t,"ascii"),this.debug("DEBUG: Outgoing: Writing SERVICE_ACCEPT ("+e+")"),be(this,r),this.server&&this.banner&&"ssh-userauth"===e){var n=Buffer.byteLength(this.banner),i=5+n+4,o=Buffer.allocUnsafe(i);o[0]=A.USERAUTH_BANNER,l(o,n,1),o.write(this.banner,5,n,"utf8"),o.fill(0,i-4),this.debug("DEBUG: Outgoing: Writing USERAUTH_BANNER"),be(this,o),this.banner=void 0}},ce.prototype.forwardedTcpip=function(e,t,r,n){if(!this.server)throw new Error("Server-only method called in client mode");var i=Buffer.byteLength(n.boundAddr),o=Buffer.byteLength(n.remoteAddr),s=36+i,a=Buffer.allocUnsafe(36+i+4+4+o+4);return a[0]=A.CHANNEL_OPEN,l(a,15,1),a.write("forwarded-tcpip",5,15,"ascii"),l(a,e,20),l(a,t,24),l(a,r,28),l(a,i,32),a.write(n.boundAddr,36,i,"ascii"),l(a,n.boundPort,s),l(a,o,s+=4),a.write(n.remoteAddr,s+=4,o,"ascii"),l(a,n.remotePort,s+=o),this.debug("DEBUG: Outgoing: Writing CHANNEL_OPEN ("+e+", forwarded-tcpip)"),be(this,a)},ce.prototype.x11=function(e,t,r,n){if(!this.server)throw new Error("Server-only method called in client mode");var i=Buffer.byteLength(n.originAddr),o=24+i,s=Buffer.allocUnsafe(24+i+4);return s[0]=A.CHANNEL_OPEN,l(s,3,1),s.write("x11",5,3,"ascii"),l(s,e,8),l(s,t,12),l(s,r,16),l(s,i,20),s.write(n.originAddr,24,i,"ascii"),l(s,n.originPort,o),this.debug("DEBUG: Outgoing: Writing CHANNEL_OPEN ("+e+", x11)"),be(this,s)},ce.prototype.openssh_authAgent=function(e,t,r){if(!this.server)throw new Error("Server-only method called in client mode");var n=Buffer.allocUnsafe(39);return n[0]=A.CHANNEL_OPEN,l(n,22,1),n.write("auth-agent@openssh.com",5,22,"ascii"),l(n,e,27),l(n,t,31),l(n,r,35),this.debug("DEBUG: Outgoing: Writing CHANNEL_OPEN ("+e+", auth-agent@openssh.com)"),be(this,n)},ce.prototype.openssh_forwardedStreamLocal=function(e,t,r,n){if(!this.server)throw new Error("Server-only method called in client mode");var i=Buffer.byteLength(n.socketPath),o=Buffer.allocUnsafe(54+i+4);return o[0]=A.CHANNEL_OPEN,l(o,33,1),o.write("forwarded-streamlocal@openssh.com",5,33,"ascii"),l(o,e,38),l(o,t,42),l(o,r,46),l(o,i,50),o.write(n.socketPath,54,i,"utf8"),l(o,0,54+i),this.debug("DEBUG: Outgoing: Writing CHANNEL_OPEN ("+e+", forwarded-streamlocal@openssh.com)"),be(this,o)},ce.prototype.exitStatus=function(e,t){if(!this.server)throw new Error("Server-only method called in client mode");var r=Buffer.allocUnsafe(25);return r[0]=A.CHANNEL_REQUEST,l(r,e,1),l(r,11,5),r.write("exit-status",9,11,"ascii"),r[20]=0,l(r,t,21),this.debug("DEBUG: Outgoing: Writing CHANNEL_REQUEST ("+e+", exit-status)"),be(this,r)},ce.prototype.exitSignal=function(e,t,r,n){if(!this.server)throw new Error("Server-only method called in client mode");var i=Buffer.byteLength(t),o=n?Buffer.byteLength(n):0,s=25+i,a=Buffer.allocUnsafe(25+i+1+4+o+4);return a[0]=A.CHANNEL_REQUEST,l(a,e,1),l(a,11,5),a.write("exit-signal",9,11,"ascii"),a[20]=0,l(a,i,21),a.write(t,25,i,"utf8"),a[s++]=r?1:0,l(a,o,s),s+=4,o&&(a.write(n,s,o,"utf8"),s+=o),l(a,0,s),this.debug("DEBUG: Outgoing: Writing CHANNEL_REQUEST ("+e+", exit-signal)"),be(this,a)},ce.prototype.authFailure=function(e,t){if(!this.server)throw new Error("Server-only method called in client mode");var r;if(!this._state.authsQueue.length)throw new Error("No auth in progress");if("boolean"==typeof e&&(t=e,e=void 0),e){r=[];for(var n=0,i=e.length;n<i;++n)"none"!==e[n].toLowerCase()&&r.push(e[n]);r=r.join(",")}else r="";var o=r.length,s=Buffer.allocUnsafe(5+o+1);return s[0]=A.USERAUTH_FAILURE,l(s,o,1),s.write(r,5,o,"ascii"),s[5+o]=!0===t?1:0,this._state.authsQueue.shift(),this.debug("DEBUG: Outgoing: Writing USERAUTH_FAILURE"),be(this,s)},ce.prototype.authSuccess=function(){if(!this.server)throw new Error("Server-only method called in client mode");if(!this._state.authsQueue.length)throw new Error("No auth in progress");var e=this._state,t=e.outgoing,r=e.incoming;e.authsQueue.shift(),this.debug("DEBUG: Outgoing: Writing USERAUTH_SUCCESS");var n=be(this,re);return"zlib@openssh.com"===t.compress.type&&(t.compress.instance=o.createDeflate(Y),t.compress.queue=[]),"zlib@openssh.com"===r.decompress.type&&(r.decompress.instance=o.createInflate(Y)),n},ce.prototype.authPKOK=function(e,t){if(!this.server)throw new Error("Server-only method called in client mode");var r=this._state.authsQueue;if(!r.length||"publickey"!==r[0])throw new Error('"publickey" auth not in progress');var n=e.length,i=t.length,o=Buffer.allocUnsafe(5+n+4+i);return o[0]=A.USERAUTH_PK_OK,l(o,n,1),o.write(e,5,n,"ascii"),l(o,i,5+n),t.copy(o,5+n+4),this._state.authsQueue.shift(),this.debug("DEBUG: Outgoing: Writing USERAUTH_PK_OK"),be(this,o)},ce.prototype.authPasswdChg=function(e,t){if(!this.server)throw new Error("Server-only method called in client mode");var r=Buffer.byteLength(e),n=t?t.length:0,i=0,o=Buffer.allocUnsafe(5+r+4+n);return o[i]=A.USERAUTH_PASSWD_CHANGEREQ,l(o,r,++i),o.write(e,i+=4,r,"utf8"),l(o,n,i+=r),n&&o.write(t,i+=4,n,"ascii"),this.debug("DEBUG: Outgoing: Writing USERAUTH_PASSWD_CHANGEREQ"),be(this,o)},ce.prototype.authInfoReq=function(e,t,r){if(!this.server)throw new Error("Server-only method called in client mode");var n,i,o,s,a=0,c=e?Buffer.byteLength(e):0,f=t?Buffer.byteLength(t):0,u=0;for(s=0,o=r.length;s<o;++s)a+=4+Buffer.byteLength(r[s].prompt)+1;var h=Buffer.allocUnsafe(5+c+4+f+4+4+a);for(h[u++]=A.USERAUTH_INFO_REQUEST,l(h,c,u),u+=4,e&&(h.write(e,u,c,"utf8"),u+=c),l(h,f,u),u+=4,t&&(h.write(t,u,f,"utf8"),u+=f),l(h,0,u),u+=4,l(h,r.length,u),u+=4,s=0,o=r.length;s<o;++s)i=r[s],n=Buffer.byteLength(i.prompt),l(h,n,u),u+=4,n&&(h.write(i.prompt,u,n,"utf8"),u+=n),h[u++]=i.echo?1:0;return this.debug("DEBUG: Outgoing: Writing USERAUTH_INFO_REQUEST"),be(this,h)};var Se="function"==typeof i.randomFillSync?i.randomFillSync:function(e,t,r){i.randomBytes(r).copy(e,t)};function Ae(e,t){switch(t){case"ssh-dss":return v(e);case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":return E(e)}return e}var ke="function"==typeof i.timingSafeEqual?function(e,t){return e.length!==t.length?(i.timingSafeEqual(e,e),!1):i.timingSafeEqual(e,t)}:function(e,t){var r;e.length===t.length?r=0:(r=1,t=e);for(var n=0,i=e.length;n<i;++n)r|=e[n]^t[n];return 0===r};function Te(e,t){switch(e){case"curve25519-sha256":case"curve25519-sha256@libssh.org":if(!N)break;return this.type="25519",this.hash="sha256",this.pktInit="KEXECDH_INIT",void(this.pktReply="KEXECDH_REPLY");case"ecdh-sha2-nistp256":return this.type="ecdh",this.name="prime256v1",this.hash="sha256",this.pktInit="KEXECDH_INIT",void(this.pktReply="KEXECDH_REPLY");case"ecdh-sha2-nistp384":return this.type="ecdh",this.name="secp384r1",this.hash="sha384",this.pktInit="KEXECDH_INIT",void(this.pktReply="KEXECDH_REPLY");case"ecdh-sha2-nistp521":return this.type="ecdh",this.name="secp521r1",this.hash="sha512",this.pktInit="KEXECDH_INIT",void(this.pktReply="KEXECDH_REPLY");case"diffie-hellman-group1-sha1":return this.type="group",this.name="modp2",this.hash="sha1",this.pktInit="KEXDH_INIT",void(this.pktReply="KEXDH_REPLY");case"diffie-hellman-group14-sha1":return this.type="group",this.name="modp14",this.hash="sha1",this.pktInit="KEXDH_INIT",void(this.pktReply="KEXDH_REPLY");case"diffie-hellman-group14-sha256":return this.type="group",this.name="modp14",this.hash="sha256",this.pktInit="KEXDH_INIT",void(this.pktReply="KEXDH_REPLY");case"diffie-hellman-group16-sha512":return this.type="group",this.name="modp16",this.hash="sha512",this.pktInit="KEXDH_INIT",void(this.pktReply="KEXDH_REPLY");case"diffie-hellman-group18-sha512":return this.type="group",this.name="modp18",this.hash="sha512",this.pktInit="KEXDH_INIT",void(this.pktReply="KEXDH_REPLY");case"diffie-hellman-group-exchange-sha1":return this.type="groupex",this.hash="sha1",this.pktInit="KEXDH_GEX_REQ",this.pktReply="KEXDH_GEX_REPLY",this._prime=null,void(this._generator=null);case"diffie-hellman-group-exchange-sha256":return this.type="groupex",this.hash="sha256",this.pktInit="KEXDH_GEX_REQ",this.pktReply="KEXDH_GEX_REPLY",this._prime=null,void(this._generator=null)}throw new Error("Unsupported key exchange algorithm: "+e)}function Oe(e){for(var t,r=0,n=e.length;0===e[r];)++r,--n;return 128&e[r]?((t=Buffer.allocUnsafe(1+n))[0]=0,e.copy(t,1,r),e=t):n!==e.length&&(t=Buffer.allocUnsafe(n),e.copy(t,0,r),e=t),e}Te.prototype.setDHParams=function(e,t){if("groupex"===this.type){if(!Buffer.isBuffer(e))throw new Error("Invalid prime value");if(!Buffer.isBuffer(t))throw new Error("Invalid generator value");this._prime=e,this._generator=t}},Te.prototype.getDHParams=function(){if("groupex"===this.type&&this._kex)return{prime:Oe(this._kex.getPrime()),generator:Oe(this._kex.getGenerator())}},Te.prototype.generateKeys=function(){switch(this.type){case"25519":this._keys||(this._keys=i.generateKeyPairSync("x25519"));break;case"ecdh":this._kex||(this._kex=i.createECDH(this.name),this._public=this._kex.generateKeys());break;case"group":case"groupex":this._kex||(this.name?this._kex=i.createDiffieHellmanGroup(this.name):this._prime&&this._generator&&(this._kex=i.createDiffieHellman(this._prime,this._generator)),this._kex&&(this._public=this._kex.generateKeys()))}},Te.prototype.getPublicKey=function(){var e;switch(this.generateKeys(),this.type){case"25519":return(e=this._keys.publicKey.export({type:"spki",format:"der"})).slice(-32);case"ecdh":case"group":case"groupex":e=this._public}if(e)return this.convertPublicKey(e)},Te.prototype.convertPublicKey=function(e){for(var t,r=0,n=e.length;0===e[r];)++r,--n;switch(this.type){case"25519":if(32===e.length)return e;break;default:if(128&e[r])return(t=Buffer.allocUnsafe(1+n))[0]=0,e.copy(t,1,r),t}return n!==e.length&&(t=Buffer.allocUnsafe(n),e.copy(t,0,r),e=t),e},Te.prototype.computeSecret=function(e){switch(this.generateKeys(),this.type){case"25519":try{var t=new u.Writer;return t.startSequence(),t.startSequence(),t.writeOID("1.3.101.110"),t.endSequence(),t.startSequence(u.BitString),t.writeByte(0),t._ensure(e.length),e.copy(t._buf,t._offset,0,e.length),t._offset+=e.length,t.endSequence(),t.endSequence(),Oe(i.diffieHellman({privateKey:this._keys.privateKey,publicKey:i.createPublicKey({key:t.buffer,type:"spki",format:"der"})}))}catch(e){return e}break;case"ecdh":case"group":case"groupex":try{return Oe(this._kex.computeSecret(e))}catch(e){return e}}},e.exports=ce,e.exports._send=be},function(e,t){e.exports=require("zlib")},function(e,t,r){var n=r(3).EventEmitter;function i(e,t,r,n,i){for(var o=0;o<i;++o,++t,++n)if(e[t]!==r[n])return!1;return!0}function o(e){"string"==typeof e&&(e=new Buffer(e));var t,r,n=e.length;for(this.maxMatches=1/0,this.matches=0,this._occ=new Array(256),this._lookbehind_size=0,this._needle=e,this._bufpos=0,this._lookbehind=new Buffer(n),r=0;r<256;++r)this._occ[r]=n;if(n>=1)for(t=0;t<n-1;++t)this._occ[e[t]]=n-1-t}(0,r(0).inherits)(o,n),o.prototype.reset=function(){this._lookbehind_size=0,this.matches=0,this._bufpos=0},o.prototype.push=function(e,t){var r,n;for(Buffer.isBuffer(e)||(e=new Buffer(e,"binary")),n=e.length,this._bufpos=t||0;r!==n&&this.matches<this.maxMatches;)r=this._sbmh_feed(e);return r},o.prototype._sbmh_feed=function(e){var t=e.length,r=this._needle,n=r.length,o=-this._lookbehind_size,s=r[n-1],a=this._occ,c=this._lookbehind;if(o<0){for(;o<0&&o<=t-n;){if((u=this._sbmh_lookup_char(e,o+n-1))===s&&this._sbmh_memcmp(e,o,n-1))return this._lookbehind_size=0,++this.matches,o>-this._lookbehind_size?this.emit("info",!0,c,0,this._lookbehind_size+o):this.emit("info",!0),this._bufpos=o+n,o+n;o+=a[u]}if(o<0)for(;o<0&&!this._sbmh_memcmp(e,o,t-o);)o++;if(!(o>=0)){var f=this._lookbehind_size+o;return f>0&&this.emit("info",!1,c,0,f),c.copy(c,0,f,this._lookbehind_size-f),this._lookbehind_size-=f,e.copy(c,this._lookbehind_size),this._lookbehind_size+=t,this._bufpos=t,t}this.emit("info",!1,c,0,this._lookbehind_size),this._lookbehind_size=0}for(o>=0&&(o+=this._bufpos);o<=t-n;){var u;if((u=e[o+n-1])===s&&e[o]===r[0]&&i(r,0,e,o,n-1))return++this.matches,o>0?this.emit("info",!0,e,this._bufpos,o):this.emit("info",!0),this._bufpos=o+n,o+n;o+=a[u]}if(o<t){for(;o<t&&(e[o]!==r[0]||!i(e,o,r,0,t-o));)++o;o<t&&(e.copy(c,0,o,o+(t-o)),this._lookbehind_size=t-o)}return o>0&&this.emit("info",!1,e,this._bufpos,o<t?o:t),this._bufpos=t,t},o.prototype._sbmh_lookup_char=function(e,t){return t<0?this._lookbehind[this._lookbehind_size+t]:e[t]},o.prototype._sbmh_memcmp=function(e,t,r){for(var n=0;n<r;){if(this._sbmh_lookup_char(e,t+n)!==this._needle[n])return!1;++n}return!0},e.exports=o},function(e){e.exports=JSON.parse('{"_args":[["ssh2-streams@0.4.10","/Users/v_yuzhuang01/Documents/SFTP"]],"_from":"ssh2-streams@0.4.10","_id":"ssh2-streams@0.4.10","_inBundle":false,"_integrity":"sha1-SO9+ig452PKSHDBSHVbayzHSOjQ=","_location":"/ssh2-streams","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"ssh2-streams@0.4.10","name":"ssh2-streams","escapedName":"ssh2-streams","rawSpec":"0.4.10","saveSpec":null,"fetchSpec":"0.4.10"},"_requiredBy":["/ssh2"],"_resolved":"https://registry.npm.taobao.org/ssh2-streams/download/ssh2-streams-0.4.10.tgz","_spec":"0.4.10","_where":"/Users/v_yuzhuang01/Documents/SFTP","author":{"name":"Brian White","email":"mscdex@mscdex.net"},"bugs":{"url":"https://github.com/mscdex/ssh2-streams/issues"},"dependencies":{"asn1":"~0.2.0","bcrypt-pbkdf":"^1.0.2","streamsearch":"~0.1.2"},"description":"SSH2 and SFTP(v3) client/server protocol streams for node.js","engines":{"node":">=5.2.0"},"homepage":"https://github.com/mscdex/ssh2-streams#readme","keywords":["ssh","ssh2","sftp","secure","protocol","streams","client","server"],"licenses":[{"type":"MIT","url":"http://github.com/mscdex/ssh2-streams/raw/master/LICENSE"}],"main":"./index","name":"ssh2-streams","repository":{"type":"git","url":"git+ssh://git@github.com/mscdex/ssh2-streams.git"},"scripts":{"test":"node test/test.js"},"version":"0.4.10"}')},function(e,t,r){var n,i=r(67).Agent,o=r(68).Agent,s=r(0).inherits;function a(e,t){var i=e&&e.localAddress||this._defaultSrcIP,o=e&&e.localPort||0,s=e.host,a=e.port;void 0===n&&(n=r(24).Client);var f=new n,u=!1;f.on("ready",(function(){f.forwardOut(i,o,s,a,(function(e,r){if(u=!0,e)return f.end(),t(e);r.once("close",(function(){f.end()})),t(null,function(e){return e.setKeepAlive=c,e.setNoDelay=c,e.setTimeout=c,e.ref=c,e.unref=c,e.destroySoon=e.destroy,e}(r))}))})).on("error",t).on("close",(function(){u||t(new Error("Unexpected connection loss"))})).connect(this._connectCfg)}function c(){}[i,o].forEach((function(e){function r(t,n){if(!(this instanceof r))return new r(t,n);e.call(this,n),this._connectCfg=t,this._defaultSrcIP=n&&n.srcIP||"localhost"}s(r,e),r.prototype.createConnection=a,t[e===i?"SSHTTPAgent":"SSHTTPSAgent"]=r}))},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("https")},function(e,t,r){(function(t){var n=r(12).Socket,i=r(3).EventEmitter,o=r(0).inherits,s=r(6),a=r(2),c=r(70),f=r(8).readUInt32BE,u=r(8).writeUInt32BE,h=r(8).writeUInt32LE,l=/^\!<socket >(\d+) s ([A-Z0-9]{8}\-[A-Z0-9]{8}\-[A-Z0-9]{8}\-[A-Z0-9]{8})/,p=/^[/\\][/\\]\.[/\\]pipe[/\\].+/;if(e.exports=function(e,t,r,i,o){var s,d,g,y,m,v,E,_,b=0,w=Buffer.isBuffer(t),S=0,A=0,k=0,T=0,O=!1;function B(){var e;if(w){var r=9;e=Buffer.allocUnsafe(9+b+4+y+4),u(e,e.length-4,0),e[4]=13,u(e,b,5),t.copy(e,r),u(e,y,r+=b),i.copy(e,r+=4),u(e,0,r+=y),s.write(e)}else s.write(Buffer.from([0,0,0,1,11]))}function R(e){for(var r=0,n=e.length;r<n;++r)if(void 0===m)5==++S&&(m=e[r],S=0);else if(14===m)if(g){if(g[S]=e[r],++S===A)return s.removeAllListeners("data"),s.destroy()}else A<<=8,A+=e[r],4==++S&&(g=Buffer.allocUnsafe(A),S=0);else if(12===m)if(void 0===v){if(k<<=8,k+=e[r],4==++S&&(v=new Array(k),S=0,0===k))return s.removeAllListeners("data"),s.destroy()}else if(t)if(!1===O){if(t[S]=e[r],++S===b&&(v[k-1]=t,b=0,S=0,O=!0,0==--k))return t=void 0,s.removeAllListeners("data"),s.destroy()}else!0===O?(T<<=8,T+=e[r],4==++S&&(S=0,T>0?O=T:(t=void 0,O=!1),T=0)):++S===O&&(O=!1,S=0,t=void 0);else b<<=8,b+=e[r],4==++S&&(t=Buffer.allocUnsafe(b),S=0);else if(5===m)return d=w?new Error("Agent unable to sign data"):new Error("Unable to retrieve list of keys from agent"),s.removeAllListeners("data"),s.destroy()}function U(e){d=e}function N(){d?o(d):w&&!g||!w&&!v?o(new Error("Unexpected disconnection from agent")):w&&g?o(void 0,g):!w&&v&&o(void 0,v)}if("function"==typeof t&&"function"==typeof r?(E=t,_=r):w?(b=t.length,y=i.length):(o=t,t=void 0),"win32"!==process.platform||p.test(e))s=new n;else{if("pageant"!==e){var C=!1;return void a.readFile(e,(function t(r,i){if(r)return C?o(new Error("Invalid cygwin unix socket path")):void c.exec('cygpath -w "'+e+'"',(function(r,n,i){if(r||0===n.length)return o(new Error("Invalid cygwin unix socket path"));C=!0,e=n.toString().replace(/[\r\n]/g,""),a.readFile(e,t)}));var u;if(u=l.exec(i.toString("ascii"))){var p,d,g,y,m,v,E=0,_=!1,b=[],w=Buffer.allocUnsafe(12);for(w.fill(0),p=parseInt(u[1],10),d=u[2].replace(/\-/g,""),g=Buffer.allocUnsafe(16),m=0,v=0;v<32;++m,v+=2)g[m]=parseInt(d.substring(v,v+2),16);for(m=0;m<16;m+=4)h(g,f(g,m),m);function S(){E=0,y="secret",s.write(g)}function A(e){E+=e.length,"secret"===y?16===E&&(E=0,y="creds",s.write(w)):"creds"===y&&(_||b.push(e),12===E&&(s.removeListener("connect",S),s.removeListener("data",A),s.removeListener("close",k),_?(I(),s.emit("connect")):(_=!0,w=Buffer.concat(b),h(w,process.pid,0),s.destroy(),T())))}function k(){o(new Error("Problem negotiating cygwin unix socket security"))}function T(){(s=new n).once("connect",S),s.on("data",A),s.once("close",k),s.connect(p)}T()}else o(new Error("Malformed cygwin unix socket file"))}))}s=new PageantSock}function I(){var e;E||_?(s.once("connect",(function(){e=E();var t=!1;function r(){t||(s.destroy(),t=!0)}e.once("end",r).once("close",r).on("data",(function(e){s.write(e)})),s.on("data",(function(t){e.write(t)}))})),s.once("close",(function(){e||_()}))):(s.once("connect",B),s.on("data",R),s.once("error",U),s.once("close",N))}I(),s.connect(e)},"win32"===process.platform){var d={},g=s.resolve(t,"..","util/pagent.exe");function y(){this.proc=void 0,this.buffer=null}d[10]=new Error("Invalid pagent.exe arguments"),d[11]=new Error("Pageant is not running"),d[12]=new Error("pagent.exe could not create an mmap"),d[13]=new Error("pagent.exe could not set mode for stdin"),d[14]=new Error("pagent.exe could not set mode for stdout"),d[15]=new Error("pagent.exe did not get expected input payload"),o(y,i),y.prototype.write=function(e){if(null===this.buffer?this.buffer=e:this.buffer=Buffer.concat([this.buffer,e],this.buffer.length+e.length),!(this.buffer.length<4)){var t=f(this.buffer,0);if(!(this.buffer.length-4<t)){e=this.buffer.slice(0,4+t),this.buffer.length>4+t?this.buffer=this.buffer.slice(4+t):this.buffer=null;var r,n=this,i=!1;(r=this.proc=c.spawn(g,[e.length])).stdout.on("data",(function(e){n.emit("data",e)})),r.once("error",(function(e){i||(i=!0,n.emit("error",e))})),r.once("close",(function(e){n.proc=void 0,d[e]&&!i&&(i=!0,n.emit("error",d[e])),n.emit("close",i)})),r.stdin.end(e)}}},y.prototype.end=y.prototype.destroy=function(){this.buffer=null,this.proc&&(this.proc.kill(),this.proc=void 0)},y.prototype.connect=function(){this.emit("connect")}}}).call(this,"/")},function(e,t){e.exports=require("child_process")},function(e,t,r){var n=r(0).inherits,i=r(3).EventEmitter;function o(e){var t=this;i.call(this),this._stream=e,e.on("error",(function(e){t.emit("error",e)})).on("end",(function(){t.emit("end")})).on("close",(function(){t.emit("close")})).on("continue",(function(){t.emit("continue")}))}n(o,i),o.prototype.end=function(){return this._stream.end()},o.prototype.createReadStream=function(e,t){return this._stream.createReadStream(e,t)},o.prototype.createWriteStream=function(e,t){return this._stream.createWriteStream(e,t)},o.prototype.open=function(e,t,r,n){return this._stream.open(e,t,r,n)},o.prototype.close=function(e,t){return this._stream.close(e,t)},o.prototype.read=function(e,t,r,n,i,o){return this._stream.readData(e,t,r,n,i,o)},o.prototype.write=function(e,t,r,n,i,o){return this._stream.writeData(e,t,r,n,i,o)},o.prototype.fastGet=function(e,t,r,n){return this._stream.fastGet(e,t,r,n)},o.prototype.fastPut=function(e,t,r,n){return this._stream.fastPut(e,t,r,n)},o.prototype.readFile=function(e,t,r){return this._stream.readFile(e,t,r)},o.prototype.writeFile=function(e,t,r,n){return this._stream.writeFile(e,t,r,n)},o.prototype.appendFile=function(e,t,r,n){return this._stream.appendFile(e,t,r,n)},o.prototype.exists=function(e,t){return this._stream.exists(e,t)},o.prototype.unlink=function(e,t){return this._stream.unlink(e,t)},o.prototype.rename=function(e,t,r){return this._stream.rename(e,t,r)},o.prototype.mkdir=function(e,t,r){return this._stream.mkdir(e,t,r)},o.prototype.rmdir=function(e,t){return this._stream.rmdir(e,t)},o.prototype.readdir=function(e,t,r){return this._stream.readdir(e,t,r)},o.prototype.fstat=function(e,t){return this._stream.fstat(e,t)},o.prototype.stat=function(e,t){return this._stream.stat(e,t)},o.prototype.lstat=function(e,t){return this._stream.lstat(e,t)},o.prototype.opendir=function(e,t){return this._stream.opendir(e,t)},o.prototype.setstat=function(e,t,r){return this._stream.setstat(e,t,r)},o.prototype.fsetstat=function(e,t,r){return this._stream.fsetstat(e,t,r)},o.prototype.futimes=function(e,t,r,n){return this._stream.futimes(e,t,r,n)},o.prototype.utimes=function(e,t,r,n){return this._stream.utimes(e,t,r,n)},o.prototype.fchown=function(e,t,r,n){return this._stream.fchown(e,t,r,n)},o.prototype.chown=function(e,t,r,n){return this._stream.chown(e,t,r,n)},o.prototype.fchmod=function(e,t,r){return this._stream.fchmod(e,t,r)},o.prototype.chmod=function(e,t,r){return this._stream.chmod(e,t,r)},o.prototype.readlink=function(e,t){return this._stream.readlink(e,t)},o.prototype.symlink=function(e,t,r){return this._stream.symlink(e,t,r)},o.prototype.realpath=function(e,t){return this._stream.realpath(e,t)},o.prototype.ext_openssh_rename=function(e,t,r){return this._stream.ext_openssh_rename(e,t,r)},o.prototype.ext_openssh_statvfs=function(e,t){return this._stream.ext_openssh_statvfs(e,t)},o.prototype.ext_openssh_fstatvfs=function(e,t){return this._stream.ext_openssh_fstatvfs(e,t)},o.prototype.ext_openssh_hardlink=function(e,t,r){return this._stream.ext_openssh_hardlink(e,t,r)},o.prototype.ext_openssh_fsync=function(e,t){return this._stream.ext_openssh_fsync(e,t)},e.exports=o},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,o=r(12),s=r(3).EventEmitter,a=s.listenerCount,c=r(0).inherits,f=r(13),u=f.utils.parseKey,h=f.SSH2Stream,l=f.SFTPStream,p=f.constants,d=p.DISCONNECT_REASON,g=p.CHANNEL_OPEN_FAILURE,y=p.ALGORITHMS,m=r(27),v=r(73),E=r(8).writeUInt32BE,_=Math.pow(2,32)-1;function b(e,t){if(!(this instanceof b))return new b(e,t);var r,c={"ssh-rsa":null,"ssh-dss":null,"ssh-ed25519":null,"ecdsa-sha2-nistp256":null,"ecdsa-sha2-nistp384":null,"ecdsa-sha2-nistp521":null},f=e.hostKeys;if(!Array.isArray(f))throw new Error("hostKeys must be an array");for(r=0;r<f.length;++r){var l;if((l=Buffer.isBuffer(f[r])||"string"==typeof f[r]?u(f[r]):u(f[r].key,f[r].passphrase))instanceof Error)throw new Error("Cannot parse privateKey: "+l.message);if(Array.isArray(l)&&(l=l[0]),null===l.getPrivatePEM())throw new Error("privateKey value contains an invalid private key");c[l.type]||(c[l.type]=l)}var p={kex:void 0,kexBuf:void 0,cipher:void 0,cipherBuf:void 0,serverHostKey:void 0,serverHostKeyBuf:void 0,hmac:void 0,hmacBuf:void 0,compress:void 0,compressBuf:void 0};if("object"===n(e.algorithms)&&null!==e.algorithms){var g,m;if(m=e.algorithms.kex,Array.isArray(m)&&m.length>0){for(g=y.SUPPORTED_KEX,r=0;r<m.length;++r)if(-1===g.indexOf(m[r]))throw new Error("Unsupported key exchange algorithm: "+m[r]);p.kex=m}if(m=e.algorithms.cipher,Array.isArray(m)&&m.length>0){for(g=y.SUPPORTED_CIPHER,r=0;r<m.length;++r)if(-1===g.indexOf(m[r]))throw new Error("Unsupported cipher algorithm: "+m[r]);p.cipher=m}m=e.algorithms.serverHostKey;var E=!1;if(Array.isArray(m)&&m.length>0){for(g=y.SUPPORTED_SERVER_HOST_KEY,r=m.length-1;r>=0;--r){if(-1===g.indexOf(m[r]))throw new Error("Unsupported server host key algorithm: "+m[r]);c[m[r]]||(E||(m=m.slice(),E=!0),m.splice(r,1))}m.length>0&&(p.serverHostKey=m)}if(m=e.algorithms.hmac,Array.isArray(m)&&m.length>0){for(g=y.SUPPORTED_HMAC,r=0;r<m.length;++r)if(-1===g.indexOf(m[r]))throw new Error("Unsupported HMAC algorithm: "+m[r]);p.hmac=m}if(m=e.algorithms.compress,Array.isArray(m)&&m.length>0){for(g=y.SUPPORTED_COMPRESS,r=0;r<m.length;++r)if(-1===g.indexOf(m[r]))throw new Error("Unsupported compression algorithm: "+m[r]);p.compress=m}}if(void 0===p.serverHostKey){var _=Object.keys(c);for(r=_.length-1;r>=0;--r)c[_[r]]||_.splice(r,1);p.serverHostKey=_}!i&&b.KEEPALIVE_INTERVAL>0&&b.KEEPALIVE_CLIENT_INTERVAL>0&&b.KEEPALIVE_CLIENT_COUNT_MAX>=0&&(i=new v(b.KEEPALIVE_INTERVAL,b.KEEPALIVE_CLIENT_INTERVAL,b.KEEPALIVE_CLIENT_COUNT_MAX));var S=this;s.call(this),"function"==typeof t&&S.on("connection",t);var A,k,T={algorithms:p,hostKeys:c,server:!0};for(r=0,k=(A=Object.keys(e)).length;r<k;++r){var O=A[r];"privateKey"!==O&&"publicKey"!==O&&"passphrase"!==O&&"algorithms"!==O&&"hostKeys"!==O&&"server"!==O&&(T[O]=e[O])}if("function"==typeof T.debug)var B=T.debug,R=Object.keys(T);this._srv=new o.Server((function(e){if(S._connections>=S.maxConnections)e.destroy();else{++S._connections,e.once("close",(function(e){--S._connections,o.read()})).on("error",(function(e){o.reset(),o.emit("error",e)}));var t=T;if(B){t={};for(var r,n=0;n<R.length;++n)t[r=R[n]]=T[r];var i="["+process.hrtime().join(".")+"] ";t.debug=function(e){B(i+e)}}var o=new h(t),s=new w(o,e);e.pipe(o).pipe(e),s.on("error",c),o.once("header",(function(t){if(!o._readableState.ended){if(!a(S,"connection"))return o.disconnect(d.BY_APPLICATION);s.removeListener("error",c),S.emit("connection",s,{ip:e.remoteAddress,family:e.remoteFamily,port:e.remotePort,header:t})}}))}function c(e){}})).on("error",(function(e){S.emit("error",e)})).on("listening",(function(){S.emit("listening")})).on("close",(function(){S.emit("close")})),this._connections=0,this.maxConnections=1/0}function w(e,t){s.call(this);var r=this;this._sshstream=e;var n=this._channels={};this._curChan=-1,this._sock=t,this.noMoreSessions=!1,this.authenticated=!1,e.on("end",(function(){t.resume(),r.emit("end")})).on("close",(function(e){r.emit("close",e)})).on("error",(function(e){r.emit("error",e)})).on("drain",(function(){r.emit("drain")})).on("continue",(function(){r.emit("continue")}));var o,c=0,f=!1,u=[];function h(t,n,i,s){if(0===c||o&&(o.username!==t||o.service!==n)||"password"!==i&&"publickey"!==i&&"hostbased"!==i&&"keyboard-interactive"!==i&&"none"!==i||10===u.length)return e.disconnect(d.PROTOCOL_ERROR);if("ssh-connection"!==n)return e.disconnect(d.SERVICE_NOT_AVAILABLE);var f;if(e._state.authMethod=i,"keyboard-interactive"===i?f=new T(e,t,n,i,s,l):"publickey"===i?f=new O(e,t,n,i,s,l):"hostbased"===i?f=new B(e,t,n,i,s,l):"password"===i?f=new R(e,t,n,i,s,l):"none"===i&&(f=new A(e,t,n,i,l)),o){if(!o._initialResponse)return u.push(f);o._multistep&&!this._finalResponse&&(o._cleanup&&o._cleanup(),o.emit("abort"))}o=f,a(r,"authentication")?r.emit("authentication",o):o.reject()}function l(t,n,i,s){o!==t||r.authenticated||(n?(e.removeListener("USERAUTH_REQUEST",h),o=void 0,r.authenticated=!0,e.authSuccess(),u=[],r.emit("ready")):(e.authFailure(i,s),u.length&&(o=u.pop(),a(r,"authentication")?r.emit("authentication",o):o.reject())))}e.on("SERVICE_REQUEST",(function(t){if(0===c||f||r.authenticated||"ssh-userauth"!==t)return e.disconnect(d.SERVICE_NOT_AVAILABLE);f=!0,e.serviceAccept(t)})).on("USERAUTH_REQUEST",h);var p=[];e.on("GLOBAL_REQUEST",(function(t,n,i){var o={type:null,buf:null};function s(t,r){o.type=t,o.buf=r,function(){for(var t;p.length>0&&p[0].type;)"SUCCESS"===(t=p.shift()).type&&e.requestSuccess(t.buf),"FAILURE"===t.type&&e.requestFailure()}()}if(n&&p.push(o),("tcpip-forward"===t||"cancel-tcpip-forward"===t||"no-more-sessions@openssh.com"===t||"streamlocal-forward@openssh.com"===t||"cancel-streamlocal-forward@openssh.com"===t)&&a(r,"request")&&r.authenticated){var c,f;if(n){var u=!1;c=function(e){var r;u||(u=!0,"tcpip-forward"===t&&0===i.bindPort&&"number"==typeof e&&(r=Buffer.allocUnsafe(4),E(r,e,0)),s("SUCCESS",r))},f=function(){u||(u=!0,s("FAILURE"))}}if("no-more-sessions@openssh.com"===t)return r.noMoreSessions=!0,void(c&&c());r.emit("request",c,f,t,i)}else n&&s("FAILURE")})),e.on("CHANNEL_OPEN",(function(t){if("session"===t.type&&r.noMoreSessions||!r.authenticated){var i=g.ADMINISTRATIVELY_PROHIBITED;return e.channelOpenFail(t.sender,i)}var o,s,c=N(r),f=!1;if(!1===c)return e.channelOpenFail(t.sender,g.RESOURCE_SHORTAGE);switch(n[c]=!0,s=function(){if(!f){f=!0,delete n[c];var r=g.ADMINISTRATIVELY_PROHIBITED;return e.channelOpenFail(t.sender,r)}},t.type){case"session":a(r,"session")?(o=function(){if(!f)return f=!0,e.channelOpenConfirm(t.sender,c,m.MAX_WINDOW,m.PACKET_SIZE),new S(r,t,c)},r.emit("session",o,s)):s();break;case"direct-tcpip":a(r,"tcpip")?(o=function(){if(!f){f=!0,e.channelOpenConfirm(t.sender,c,m.MAX_WINDOW,m.PACKET_SIZE);var n={type:void 0,incoming:{id:c,window:m.MAX_WINDOW,packetSize:m.PACKET_SIZE,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}};return new m(n,r)}},r.emit("tcpip",o,s,t.data)):s();break;case"direct-streamlocal@openssh.com":a(r,"openssh.streamlocal")?(o=function(){if(!f){f=!0,e.channelOpenConfirm(t.sender,c,m.MAX_WINDOW,m.PACKET_SIZE);var n={type:void 0,incoming:{id:c,window:m.MAX_WINDOW,packetSize:m.PACKET_SIZE,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}};return new m(n,r)}},r.emit("openssh.streamlocal",o,s,t.data)):s();break;default:s()}})),e.on("NEWKEYS",(function(){++c>1&&r.emit("rekey")})),i&&this.once("ready",(function(){i.add(e)}))}function S(e,t,r){this.subtype=void 0;var n,i=!1,o=this,s=t.sender,c={type:"session",incoming:{id:r,window:m.MAX_WINDOW,packetSize:m.PACKET_SIZE,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}};e._sshstream.on("CHANNEL_REQUEST:"+r,(function(t){var r,f,u=!1;if(t.wantReply&&("shell"!==t.request&&"exec"!==t.request&&"subsystem"!==t.request&&(r=function(){if(!(u||i||n))return u=!0,e._sshstream.channelSuccess(s)}),f=function(){if(!(u||i||n))return u=!0,e._sshstream.channelFailure(s)}),i)f&&f();else switch(t.request){case"env":a(o,"env")?o.emit("env",r,f,{key:t.key,val:t.val}):f&&f();break;case"pty-req":a(o,"pty")?o.emit("pty",r,f,{cols:t.cols,rows:t.rows,width:t.width,height:t.height,term:t.term,modes:t.modes}):f&&f();break;case"window-change":a(o,"window-change")?o.emit("window-change",r,f,{cols:t.cols,rows:t.rows,width:t.width,height:t.height}):f&&f();break;case"x11-req":a(o,"x11")?o.emit("x11",r,f,{single:t.single,protocol:t.protocol,cookie:t.cookie,screen:t.screen}):f&&f();break;case"signal":a(o,"signal")?o.emit("signal",r,f,{name:t.signal}):f&&f();break;case"auth-agent-req@openssh.com":a(o,"auth-agent")?o.emit("auth-agent",r,f):f&&f();break;case"shell":a(o,"shell")?(r=function(){if(!(u||i||n))return u=!0,t.wantReply&&e._sshstream.channelSuccess(s),(n=new m(c,e,{server:!0})).subtype=o.subtype=t.request,n},o.emit("shell",r,f)):f&&f();break;case"exec":a(o,"exec")?(r=function(){if(!(u||i||n))return u=!0,t.wantReply&&e._sshstream.channelSuccess(s),(n=new m(c,e,{server:!0})).subtype=o.subtype=t.request,n},o.emit("exec",r,f,{command:t.command})):f&&f();break;case"subsystem":r=function(){if(!(u||i||n)){if(u=!0,t.wantReply&&e._sshstream.channelSuccess(s),(n=new m(c,e,{server:!0})).subtype=o.subtype=t.request+":"+t.subsystem,"sftp"===t.subsystem){var r=new l({server:!0,debug:e._sshstream.debug});return n.pipe(r).pipe(n),r}return n}},"sftp"===t.subsystem&&a(o,"sftp")?o.emit("sftp",r,f):"sftp"!==t.subsystem&&a(o,"subsystem")?o.emit("subsystem",r,f,{name:t.subsystem}):f&&f();break;default:f&&f()}})).once("CHANNEL_EOF:"+r,(function(){i=!0,o.emit("eof"),o.emit("end")})).once("CHANNEL_CLOSE:"+r,(function(){i=!0,o.emit("close")}))}function A(e,t,r,n,i){s.call(this);var o=this;this.username=this.user=t,this.service=r,this.method=n,this._initialResponse=!1,this._finalResponse=!1,this._multistep=!1,this._cbfinal=function(e,t,r){o._finalResponse||(o._finalResponse=!0,i(o,e,t,r))},this._stream=e}c(b,s),b.prototype.listen=function(){return this._srv.listen.apply(this._srv,arguments),this},b.prototype.address=function(){return this._srv.address()},b.prototype.getConnections=function(e){this._srv.getConnections(e)},b.prototype.close=function(e){return this._srv.close(e),this},b.prototype.ref=function(){this._srv.ref()},b.prototype.unref=function(){this._srv.unref()},c(w,s),w.prototype.end=function(){return this._sshstream.disconnect(d.BY_APPLICATION)},w.prototype.x11=function(e,t,r){return U(this,"x11",{originAddr:e,originPort:t},r)},w.prototype.forwardOut=function(e,t,r,n,i){return U(this,"forwarded-tcpip",{boundAddr:e,boundPort:t,remoteAddr:r,remotePort:n},i)},w.prototype.openssh_forwardOutStreamLocal=function(e,t){return U(this,"forwarded-streamlocal@openssh.com",{socketPath:e},t)},w.prototype.rekey=function(e){var t,r=this._sshstream,n=!0;try{n=r.rekey()}catch(e){t=e}return"function"==typeof e&&(t?process.nextTick((function(){e(t)})):this.once("rekey",e)),n},c(S,s),c(A,s),A.prototype.accept=function(){this._cleanup&&this._cleanup(),this._initialResponse=!0,this._cbfinal(!0)},A.prototype.reject=function(e,t){this._cleanup&&this._cleanup(),this._initialResponse=!0,this._cbfinal(!1,e,t)};var k=/[ \t\r\n]*,[ \t\r\n]*/g;function T(e,t,r,n,i,o){A.call(this,e,t,r,n,o),this._multistep=!0;var s=this;this._cb=void 0,this._onInfoResponse=function(e){if(s._cb){var t=s._cb;s._cb=void 0,t(e)}},this.submethods=i.split(k),this.on("abort",(function(){s._cb&&s._cb(new Error("Authentication request aborted"))}))}function O(e,t,r,n,i,o){var s;if(A.call(this,e,t,r,n,o),this.key={algo:i.keyAlgo,data:i.key},this.signature=i.signature,this.signature)switch(i.keyAlgo){case"ssh-rsa":case"ssh-dss":s="sha1";break;case"ssh-ed25519":s=null;break;case"ecdsa-sha2-nistp256":s="sha256";break;case"ecdsa-sha2-nistp384":s="sha384";break;case"ecdsa-sha2-nistp521":s="sha512"}this.sigAlgo=s,this.blob=i.blob}function B(e,t,r,n,i,o){var s;if(A.call(this,e,t,r,n,o),this.key={algo:i.keyAlgo,data:i.key},this.signature=i.signature,this.signature)switch(i.keyAlgo){case"ssh-rsa":case"ssh-dss":s="sha1";break;case"ssh-ed25519":s=null;break;case"ecdsa-sha2-nistp256":s="sha256";break;case"ecdsa-sha2-nistp384":s="sha384";break;case"ecdsa-sha2-nistp521":s="sha512"}this.sigAlgo=s,this.blob=i.blob,this.localHostname=i.localHostname,this.localUsername=i.localUsername}function R(e,t,r,n,i,o){A.call(this,e,t,r,n,o),this.password=i}function U(e,t,r,n){var i=N(e),o=m.MAX_WINDOW,s=m.PACKET_SIZE,a=!0;if(!1===i)return n(new Error("No free channels available"));"function"==typeof r&&(n=r,r={}),e._channels[i]=!0;var c=e._sshstream;return c.once("CHANNEL_OPEN_CONFIRMATION:"+i,(function(r){c.removeAllListeners("CHANNEL_OPEN_FAILURE:"+i);var a={type:t,incoming:{id:i,window:o,packetSize:s,state:"open"},outgoing:{id:r.sender,window:r.window,packetSize:r.packetSize,state:"open"}};n(void 0,new m(a,e,{server:!0}))})).once("CHANNEL_OPEN_FAILURE:"+i,(function(t){c.removeAllListeners("CHANNEL_OPEN_CONFIRMATION:"+i),delete e._channels[i];var r=new Error("(SSH) Channel open failure: "+t.description);r.reason=t.reason,r.lang=t.lang,n(r)})),"forwarded-tcpip"===t?a=c.forwardedTcpip(i,o,s,r):"x11"===t?a=c.x11(i,o,s,r):"forwarded-streamlocal@openssh.com"===t&&(a=c.openssh_forwardedStreamLocal(i,o,s,r)),a}function N(e){if(e._curChan<_)return++e._curChan;for(var t=0,r=e._channels;t<_;++t)if(!r[t])return t;return!1}c(T,A),T.prototype._cleanup=function(){this._stream.removeListener("USERAUTH_INFO_RESPONSE",this._onInfoResponse)},T.prototype.prompt=function(e,t,r,n){Array.isArray(e)||(e=[e]),"function"==typeof t?(n=t,t=r=void 0):"function"==typeof r&&(n=r,r=void 0);for(var i=0;i<e.length;++i)"string"==typeof e[i]&&(e[i]={prompt:e[i],echo:!0});return this._cb=n,this._initialResponse=!0,this._stream.once("USERAUTH_INFO_RESPONSE",this._onInfoResponse),this._stream.authInfoReq(t,r,e)},c(O,A),O.prototype.accept=function(){this.signature?A.prototype.accept.call(this):(this._initialResponse=!0,this._stream.authPKOK(this.key.algo,this.key.data))},c(B,A),c(R,A),b.createServer=function(e,t){return new b(e,t)},b.KEEPALIVE_INTERVAL=1e3,b.KEEPALIVE_CLIENT_INTERVAL=15e3,b.KEEPALIVE_CLIENT_COUNT_MAX=3,e.exports=b,e.exports.IncomingClient=w},function(e,t){function r(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}function n(e,t,n){var i=this._streams=[];this._timer=void 0,this._timerInterval=e,this._timerfn=function(){for(var e,o,s=Date.now(),a=0,c=i.length;a<c;++a)if((o=(e=i[a])._kalast)&&s-o>=t)if(++e._kacnt>n){var f=new Error("Keepalive timeout");f.level="client-timeout",e.emit("error",f),e.disconnect(),r(i,a),--a,c=i.length}else e._kalast=s,e.ping()}}n.prototype.start=function(){this._timer&&this.stop(),this._timer=setInterval(this._timerfn,this._timerInterval)},n.prototype.stop=function(){this._timer&&(clearInterval(this._timer),this._timer=void 0)},n.prototype.add=function(e){var t=this._streams,r=this;function n(){e._kalast=Date.now(),e._kacnt=0}e.once("end",(function(){r.remove(e)})).on("packet",n),t[t.length]=e,n(),this._timer||this.start()},n.prototype.remove=function(e){var t=this._streams,n=t.indexOf(e);n>-1&&r(t,n),t.length||this.stop()},e.exports=n}])}));